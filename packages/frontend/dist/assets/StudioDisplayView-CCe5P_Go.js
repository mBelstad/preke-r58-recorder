const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/InputPreview.vue_vue_type_script_setup_true_lang-oVvr5NIv.js","assets/index-DxgRH3SN.js","assets/index-Domh98PJ.css"])))=>i.map(i=>d[i]);
import{d as B,G as O,r as I,o as E,p as F,l as _,K as A,w as P,e,c as l,F as W,z as H,g as L,t,f,n as G,y as C,k as a,_ as N,C as z,a6 as Y,H as q,a5 as J,J as Q}from"./index-DxgRH3SN.js";import{_ as j}from"./InputPreview.vue_vue_type_script_setup_true_lang-oVvr5NIv.js";import{S as V}from"./StudioDisplayShell-CxcIEdpi.js";import"./AnimatedBackground-ByxKnVPb.js";const X={class:"podcast-display__timing"},Z={class:"podcast-display__timer"},ee={key:0,class:"podcast-display__remaining"},se={class:"podcast-display__layout"},te={class:"podcast-display__left glass-card"},ae={key:0,class:"podcast-display__grid"},ie={class:"podcast-display__camera-label"},oe={key:1,class:"podcast-display__tip"},le={class:"podcast-display__tip-icon"},re={class:"podcast-display__tip-title"},ne={class:"podcast-display__tip-text"},de={class:"podcast-display__right"},ce={class:"podcast-display__card glass-panel"},pe={class:"podcast-display__value"},ue={class:"podcast-display__meta"},_e={key:0},ve={key:1},me={class:"podcast-display__meta"},ye={key:0,class:"podcast-display__card glass-panel"},ge={class:"podcast-display__slide"},fe=["src","alt"],he={class:"podcast-display__card glass-panel"},we={key:0,class:"podcast-display__meta"},be={class:"podcast-display__footer-left"},ke={key:0,class:"podcast-display__rec-badge"},$e={key:0,class:"podcast-display__footer-right"},Se=B({__name:"PodcastDisplay",props:{status:{},isPreview:{type:Boolean}},setup(n){const s=n,$=O(),h=I(0);let k=null;const p=[{icon:"ðŸŽ¤",title:"Use the Shure SM7B Microphone",description:"Speak directly into the microphone for best audio quality"},{icon:"ðŸŽ§",title:"Headset Available",description:"A headset is available if you prefer"},{icon:"ðŸ‘€",title:"Look at the Host",description:"Not at the camera - maintain natural conversation"},{icon:"ðŸ’‡",title:"Check Your Hair",description:"Keep hair away from your face for best visibility"},{icon:"ðŸ˜Œ",title:"Relax and Be Natural",description:"Speak naturally and take your time"}];let S=null;E(async()=>{k=window.setInterval(()=>{h.value=(h.value+1)%p.length},5e3),console.log("[PodcastDisplay] Fetching camera inputs"),await $.fetchInputs(),S=window.setInterval(()=>{$.fetchInputs()},2e3)}),F(()=>{k&&clearInterval(k),S&&clearInterval(S)});const g=_(()=>{var c;return((c=s.status)==null?void 0:c.recording_active)||!1}),T=_(()=>{var v;if(!((v=s.status)!=null&&v.recording_duration_ms))return"00:00:00";const c=Math.floor(s.status.recording_duration_ms/1e3),o=Math.floor(c/3600),i=Math.floor(c%3600/60),r=c%60;return`${o.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}),D=_(()=>{var v;if(!((v=s.status)!=null&&v.booking))return null;const c=new Date,i=new Date(`${s.status.booking.date} ${s.status.booking.slot_end}`).getTime()-c.getTime();return i<=0?"Time expired":`${Math.floor(i/6e4)} min left`}),w=_(()=>{var c,o;return(o=(c=s.status)==null?void 0:c.project)!=null&&o.graphics?s.status.project.graphics[s.status.current_slide_index]:null}),x=_(()=>p[h.value]),y=_(()=>$.inputs.filter(c=>c.hasSignal).slice(0,4));return(c,o)=>(a(),A(V,{title:"Podcast Session",subtitle:"Live multi-cam recording",accent:"gold","show-footer":!0,"main-class":"podcast-display__main"},{"header-right":P(()=>[e("div",X,[e("div",Z,t(T.value),1),D.value?(a(),l("div",ee,t(D.value),1)):f("",!0)])]),footer:P(()=>[e("div",be,[g.value?(a(),l("span",ke,[...o[5]||(o[5]=[e("span",{class:"podcast-display__rec-dot"},null,-1),C(" REC ",-1)])])):f("",!0),o[6]||(o[6]=e("span",{class:"podcast-display__footer-text"},"Stay close to the mic and speak clearly.",-1))]),n.isPreview?f("",!0):(a(),l("div",$e," System connected "))]),default:P(()=>{var i,r,v;return[e("div",se,[e("section",te,[y.value.length>0?(a(),l("div",ae,[(a(!0),l(W,null,H(y.value,b=>(a(),l("div",{key:b.id,class:"podcast-display__camera"},[e("div",ie,t(b.label),1),L(j,{"input-id":b.id,"is-preview":n.isPreview},null,8,["input-id","is-preview"])]))),128)),(a(!0),l(W,null,H(4-y.value.length,b=>(a(),l("div",{key:`empty-${b}`,class:"podcast-display__camera podcast-display__camera--empty"},[...o[0]||(o[0]=[e("span",null,"No Camera",-1)])]))),128))])):(a(),l("div",oe,[e("div",le,t(x.value.icon),1),e("h2",re,t(x.value.title),1),e("p",ne,t(x.value.description),1)]))]),e("aside",de,[e("div",ce,[o[1]||(o[1]=e("div",{class:"podcast-display__label"},"Session",-1)),e("div",pe,t(((i=n.status.booking.customer)==null?void 0:i.name)||"Guest"),1),e("div",ue,[(r=n.status.booking.client)!=null&&r.name?(a(),l("span",_e,t(n.status.booking.client.name),1)):f("",!0),(v=n.status.project)!=null&&v.name?(a(),l("span",ve,"â€¢ "+t(n.status.project.name),1)):f("",!0)]),e("div",me,t(n.status.booking.date)+" â€¢ "+t(n.status.booking.slot_start)+" - "+t(n.status.booking.slot_end),1)]),w.value?(a(),l("div",ye,[o[2]||(o[2]=e("div",{class:"podcast-display__label"},"Current Slide",-1)),e("div",ge,[e("img",{src:w.value.url,alt:w.value.filename},null,8,fe),e("span",null,"Slide "+t(n.status.current_slide_index+1)+" / "+t(n.status.project.graphics.length),1)])])):f("",!0),e("div",he,[o[4]||(o[4]=e("div",{class:"podcast-display__label"},"Status",-1)),e("div",{class:G(["podcast-display__status",{"podcast-display__status--live":g.value}])},[o[3]||(o[3]=e("span",{class:"podcast-display__status-dot"},null,-1)),C(" "+t(g.value?"Recording in progress":"Ready to record"),1)],2),!n.isPreview&&n.status.disk_space_gb?(a(),l("div",we,t(n.status.disk_space_gb.toFixed(1))+" GB available ",1)):f("",!0)])])])]}),_:1}))}}),xe=N(Se,[["__scopeId","data-v-b8505410"]]),Te={class:"teleprompter-display__mirror-wrapper"},De={class:"teleprompter-display__timing"},Ie={class:"teleprompter-display__timer"},Pe={key:0,class:"teleprompter-display__remaining"},Ce={class:"teleprompter-display__layout"},Re={class:"teleprompter-display__script glass-card"},Me={class:"teleprompter-display__text-content"},Ae={class:"teleprompter-display__side"},Le={key:0,class:"teleprompter-display__cameras"},je={class:"teleprompter-display__camera-label"},Be={class:"teleprompter-display__camera-frame"},Ee={class:"teleprompter-display__card glass-panel"},Fe={class:"teleprompter-display__tip-title"},Ne={class:"teleprompter-display__tip-text"},Ue={class:"teleprompter-display__card glass-panel"},Ge={class:"teleprompter-display__meta"},Ve={class:"teleprompter-display__footer-left"},Oe={class:"teleprompter-display__footer-text"},We={key:0,class:"teleprompter-display__footer-right"},He=B({__name:"TeleprompterDisplay",props:{status:{},isPreview:{type:Boolean}},setup(n){const s=n,$=O(),h=I(0),k=I(0),p=I(!1);I(!1);let S=null,g=null;const T=[{icon:"ðŸŽ¯",title:"Look Directly at the Camera Lens",description:"Maintain eye contact with the lens for a natural connection"},{icon:"ðŸ—£ï¸",title:"Speak at a Steady, Natural Pace",description:"Take your time and speak clearly"},{icon:"â¸ï¸",title:"Use the Pause Function",description:"Press Space to pause and collect your thoughts"},{icon:"âš¡",title:"Adjust Scroll Speed",description:"Use +/- keys to match your reading pace"},{icon:"ðŸŒ¬ï¸",title:"Take a Breath Between Sections",description:"Pause naturally between paragraphs"}];let D=null;E(async()=>{S=window.setInterval(()=>{h.value=(h.value+1)%T.length},5e3),window.addEventListener("keydown",v),w.value&&b(),console.log("[TeleprompterDisplay] Fetching camera inputs"),await $.fetchInputs(),D=window.setInterval(()=>{$.fetchInputs()},2e3)}),F(()=>{S&&clearInterval(S),D&&clearInterval(D),g&&cancelAnimationFrame(g),window.removeEventListener("keydown",v)});const w=_(()=>{var u;return((u=s.status)==null?void 0:u.recording_active)||!1}),x=_(()=>{var M;if(!((M=s.status)!=null&&M.recording_duration_ms))return"00:00:00";const u=Math.floor(s.status.recording_duration_ms/1e3),d=Math.floor(u/3600),m=Math.floor(u%3600/60),R=u%60;return`${d.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}:${R.toString().padStart(2,"0")}`}),y=_(()=>{var M;if(!((M=s.status)!=null&&M.booking))return null;const u=new Date,m=new Date(`${s.status.booking.date} ${s.status.booking.slot_end}`).getTime()-u.getTime();return m<=0?"Time expired":`${Math.floor(m/6e4)} min left`}),c=_(()=>T[h.value]),o=_(()=>{var d;return(((d=s.status)==null?void 0:d.teleprompter_scroll_speed)||50)/100*4.5+.5}),i=_(()=>{var u;return s.isPreview?`This is a preview of the teleprompter display.

When a script is loaded, it will appear here and scroll automatically during recording.

Use the arrow keys to scroll manually, or press Space to pause.`:((u=s.status)==null?void 0:u.teleprompter_script)||"No script loaded. Please add a script in the booking settings."}),r=_(()=>$.inputs.filter(u=>u.hasSignal).slice(0,2));function v(u){if(w.value)switch(u.key){case" ":u.preventDefault(),p.value=!p.value;break;case"ArrowUp":u.preventDefault(),k.value=Math.max(0,k.value-50);break;case"ArrowDown":u.preventDefault(),k.value+=50;break}}function b(){function u(){p.value||(k.value+=o.value),g=requestAnimationFrame(u)}u()}return(u,d)=>(a(),l("div",Te,[L(V,{title:"Talking Head",subtitle:"Teleprompter mode",accent:"purple","show-footer":w.value,"main-class":"teleprompter-display__main"},{"header-right":P(()=>[e("div",De,[e("span",Ie,t(x.value),1),y.value?(a(),l("span",Pe,t(y.value),1)):f("",!0)])]),footer:P(()=>[e("div",Ve,[d[3]||(d[3]=e("span",{class:"teleprompter-display__rec-badge"},[e("span",{class:"teleprompter-display__rec-dot"}),C(" REC ")],-1)),e("span",Oe," Space = "+t(p.value?"Resume":"Pause")+" â€¢ â†‘â†“ = Scroll ",1)]),p.value?(a(),l("div",We," â¸ Paused ")):f("",!0)]),default:P(()=>[e("div",Ce,[e("section",Re,[e("div",{class:"teleprompter-display__text",style:z({transform:`translateY(-${k.value}px)`})},[e("div",Me,t(i.value),1)],4)]),e("aside",Ae,[r.value.length>0?(a(),l("div",Le,[(a(!0),l(W,null,H(r.value,m=>(a(),l("div",{key:m.id,class:"teleprompter-display__camera-card glass-panel"},[e("div",je,t(m.label),1),e("div",Be,[L(j,{"input-id":m.id,"is-preview":n.isPreview},null,8,["input-id","is-preview"])])]))),128))])):f("",!0),e("div",Ee,[d[0]||(d[0]=e("div",{class:"teleprompter-display__label"},"Tip",-1)),e("div",Fe,t(c.value.title),1),e("div",Ne,t(c.value.description),1)]),e("div",Ue,[d[2]||(d[2]=e("div",{class:"teleprompter-display__label"},"Status",-1)),e("div",{class:G(["teleprompter-display__status",{"teleprompter-display__status--live":w.value}])},[d[1]||(d[1]=e("span",{class:"teleprompter-display__status-dot"},null,-1)),C(" "+t(w.value?"Recording":"Ready for recording"),1)],2),e("div",Ge," Scroll speed: "+t(n.status.teleprompter_scroll_speed||50)+"% ",1)])])])]),_:1},8,["show-footer"])]))}}),Ke=N(He,[["__scopeId","data-v-41346bd0"]]),ze={class:"webinar-display__timing"},Ye={class:"webinar-display__timer"},qe={key:0,class:"webinar-display__remaining"},Je={class:"webinar-display__layout"},Qe={class:"webinar-display__vdo-section glass-card"},Xe={class:"webinar-display__vdo-frame"},Ze=["src"],es={key:0,class:"webinar-display__recording-indicator"},ss={class:"webinar-display__right"},ts={key:0,class:"webinar-display__card glass-panel"},as={class:"webinar-display__program-preview"},is={key:0,class:"webinar-display__program-loading"},os={class:"webinar-display__card glass-panel"},ls={class:"webinar-display__value"},rs={class:"webinar-display__meta"},ns={key:0},ds={key:1},cs={class:"webinar-display__meta"},ps={class:"webinar-display__card glass-panel"},us={key:0,class:"webinar-display__meta"},_s={class:"webinar-display__footer-left"},vs={key:0,class:"webinar-display__rec-badge"},K="https://app.itagenten.no/mixer_program/whep",ms=B({__name:"WebinarDisplay",props:{status:{},isPreview:{type:Boolean}},setup(n){const s=n,$=Y();_(()=>$.params.token);const h=I(0),k=I("https://app.itagenten.no/vdo/?room=studio&hash=c1f7&password=preke-r58-2024&broadcast&scene&cleanoutput&darkmode"),p=I(null),S=I(!1);let g=null,T=null;const D=[{icon:"ðŸŽ¥",title:"Check Your Audio and Video Settings",description:"Test your microphone and camera before starting"},{icon:"ðŸ”‡",title:"Mute When Not Speaking",description:"Reduce background noise for better audio quality"},{icon:"ðŸ’¡",title:"Use Good Lighting",description:"Face a light source for clear video"},{icon:"ðŸ–¼ï¸",title:"Minimize Background Distractions",description:"Choose a clean, professional background"},{icon:"ðŸ“Š",title:"Have Your Presentation Ready",description:"Prepare slides and materials in advance"}],w=_(()=>{var i;return((i=s.status)==null?void 0:i.recording_active)||!1});async function x(){if(!(!p.value||s.isPreview))try{S.value=!0;const{getIceServers:i}=await J(async()=>{const{getIceServers:m}=await import("./InputPreview.vue_vue_type_script_setup_true_lang-oVvr5NIv.js").then(R=>R.i);return{getIceServers:m}},__vite__mapDeps([0,1,2])),r=await i();g=new RTCPeerConnection({iceServers:r}),g.ontrack=m=>{p.value&&m.track.kind==="video"&&(p.value.srcObject=m.streams[0],p.value.play().catch(console.warn),S.value=!1)};const v=await fetch(K,{method:"POST",headers:{"Content-Type":"application/sdp"}});if(!v.ok)throw new Error(`WHEP connection failed: ${v.statusText}`);const b=await v.text();await g.setRemoteDescription({type:"offer",sdp:b});const u=await g.createAnswer();if(await g.setLocalDescription(u),!(await fetch(v.headers.get("Location")||K,{method:"PATCH",headers:{"Content-Type":"application/sdp"},body:u.sdp})).ok)throw new Error("Failed to send WHEP answer")}catch(i){console.error("[WebinarDisplay] Failed to connect program output:",i),S.value=!1}}function y(){g&&(g.close(),g=null),p.value&&(p.value.srcObject=null)}E(async()=>{T=window.setInterval(()=>{h.value=(h.value+1)%D.length},5e3),w.value&&await x()}),F(()=>{T&&clearInterval(T),y()}),q(w,async i=>{i?await x():y()});const c=_(()=>{var u;if(!((u=s.status)!=null&&u.recording_duration_ms))return"00:00:00";const i=Math.floor(s.status.recording_duration_ms/1e3),r=Math.floor(i/3600),v=Math.floor(i%3600/60),b=i%60;return`${r.toString().padStart(2,"0")}:${v.toString().padStart(2,"0")}:${b.toString().padStart(2,"0")}`}),o=_(()=>{var u;if(!((u=s.status)!=null&&u.booking))return null;const i=new Date,v=new Date(`${s.status.booking.date} ${s.status.booking.slot_end}`).getTime()-i.getTime();return v<=0?"Time expired":`${Math.floor(v/6e4)} min left`});return _(()=>D[h.value]),(i,r)=>(a(),A(V,{title:"Webinar Session",subtitle:"Remote guest experience",accent:"blue","show-footer":!0,"main-class":"webinar-display__main"},{"header-right":P(()=>[e("div",ze,[e("div",Ye,t(c.value),1),o.value?(a(),l("div",qe,t(o.value),1)):f("",!0)])]),footer:P(()=>[e("div",_s,[w.value?(a(),l("span",vs,[...r[6]||(r[6]=[e("span",{class:"webinar-display__rec-dot"},null,-1),C(" REC ",-1)])])):f("",!0),r[7]||(r[7]=e("span",{class:"webinar-display__footer-text"},"Keep your microphone muted when not speaking.",-1))]),r[8]||(r[8]=e("div",{class:"webinar-display__footer-right"}," VDO.ninja room: studio ",-1))]),default:P(()=>{var v,b,u;return[e("div",Je,[e("section",Qe,[e("div",Xe,[e("iframe",{src:k.value,class:"webinar-display__vdo-iframe",allow:"camera; microphone; display-capture; autoplay; clipboard-write",allowfullscreen:""},null,8,Ze),w.value?(a(),l("div",es,[...r[0]||(r[0]=[e("span",{class:"webinar-display__recording-dot"},null,-1),C(" RECORDING ",-1)])])):f("",!0)])]),e("aside",ss,[w.value?(a(),l("div",ts,[r[2]||(r[2]=e("div",{class:"webinar-display__label"},"Program Output",-1)),e("div",as,[e("video",{ref_key:"programVideoRef",ref:p,autoplay:"",muted:"",playsinline:"",class:"webinar-display__program-video"},null,512),S.value?(a(),l("div",is,[...r[1]||(r[1]=[e("div",{class:"webinar-display__spinner"},null,-1)])])):f("",!0)])])):f("",!0),e("div",os,[r[3]||(r[3]=e("div",{class:"webinar-display__label"},"Session",-1)),e("div",ls,t(((v=n.status.booking.customer)==null?void 0:v.name)||"Guest"),1),e("div",rs,[(b=n.status.booking.client)!=null&&b.name?(a(),l("span",ns,t(n.status.booking.client.name),1)):f("",!0),(u=n.status.project)!=null&&u.name?(a(),l("span",ds,"â€¢ "+t(n.status.project.name),1)):f("",!0)]),e("div",cs,t(n.status.booking.date)+" â€¢ "+t(n.status.booking.slot_start)+" - "+t(n.status.booking.slot_end),1)]),e("div",ps,[r[5]||(r[5]=e("div",{class:"webinar-display__label"},"Status",-1)),e("div",{class:G(["webinar-display__status",{"webinar-display__status--ok":!0}])},[...r[4]||(r[4]=[e("span",{class:"webinar-display__status-dot"},null,-1),C(" VDO.ninja room active ",-1)])]),!n.isPreview&&n.status.disk_space_gb?(a(),l("div",us,t(n.status.disk_space_gb.toFixed(1))+" GB available ",1)):f("",!0)])])])]}),_:1}))}}),ys=N(ms,[["__scopeId","data-v-243249a8"]]),gs={class:"course-display__timing"},fs={class:"course-display__timer"},hs={key:0,class:"course-display__remaining"},ws={class:"course-display__layout"},bs={class:"course-display__slides glass-card"},ks={key:0,class:"course-display__slide"},$s=["src","alt"],Ss={class:"course-display__slide-count"},xs={key:1,class:"course-display__tip"},Ts={class:"course-display__tip-icon"},Ds={class:"course-display__tip-title"},Is={class:"course-display__tip-text"},Ps={class:"course-display__side"},Cs={class:"course-display__card glass-panel"},Rs={key:0,class:"course-display__camera"},Ms={class:"course-display__camera-label"},As={key:1,class:"course-display__camera-empty"},Ls={key:0,class:"course-display__card glass-panel"},js={class:"course-display__camera"},Bs={class:"course-display__camera-label"},Es={class:"course-display__card glass-panel"},Fs={class:"course-display__value"},Ns={class:"course-display__meta"},Us={key:0},Gs={key:1},Vs={class:"course-display__meta"},Os={class:"course-display__card glass-panel"},Ws={key:0,class:"course-display__meta"},Hs={class:"course-display__footer-left"},Ks={key:0,class:"course-display__rec-badge"},zs=B({__name:"CourseDisplay",props:{status:{},isPreview:{type:Boolean}},setup(n){const s=n,$=O(),h=I(0);let k=null,p=null;const S=[{icon:"ðŸŽ“",title:"Keep your slides simple",description:"Big text and clear visuals work best on camera"},{icon:"ðŸ§­",title:"Guide the viewer",description:"Use short sections and clear takeaways"},{icon:"ðŸŽ¤",title:"Audio is everything",description:"Speak close to the microphone for clarity"},{icon:"â±ï¸",title:"Keep the pace steady",description:"Pause between points to keep it easy to follow"}];E(async()=>{k=window.setInterval(()=>{h.value=(h.value+1)%S.length},6e3),await $.fetchInputs(),p=window.setInterval(()=>{$.fetchInputs()},2e3)}),F(()=>{k&&clearInterval(k),p&&clearInterval(p)});const g=_(()=>{var o;return((o=s.status)==null?void 0:o.recording_active)||!1}),T=_(()=>{var b;if(!((b=s.status)!=null&&b.recording_duration_ms))return"00:00:00";const o=Math.floor(s.status.recording_duration_ms/1e3),i=Math.floor(o/3600),r=Math.floor(o%3600/60),v=o%60;return`${i.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}:${v.toString().padStart(2,"0")}`}),D=_(()=>{var b;if(!((b=s.status)!=null&&b.booking))return null;const o=new Date,r=new Date(`${s.status.booking.date} ${s.status.booking.slot_end}`).getTime()-o.getTime();return r<=0?"Time expired":`${Math.floor(r/6e4)} min left`}),w=_(()=>{var o,i;return(i=(o=s.status)==null?void 0:o.project)!=null&&i.graphics?s.status.project.graphics[s.status.current_slide_index]:null}),x=_(()=>S[h.value]),y=_(()=>$.inputs.find(o=>o.hasSignal)||null),c=_(()=>{const o=$.inputs.filter(i=>i.hasSignal);return o.length>1?o[1]:null});return(o,i)=>(a(),A(V,{title:"Course Session",subtitle:"Presentation + recording",accent:"blue","show-footer":!0,"main-class":"course-display__main"},{"header-right":P(()=>[e("div",gs,[e("div",fs,t(T.value),1),D.value?(a(),l("div",hs,t(D.value),1)):f("",!0)])]),footer:P(()=>[e("div",Hs,[g.value?(a(),l("span",Ks,[...i[5]||(i[5]=[e("span",{class:"course-display__rec-dot"},null,-1),C(" REC ",-1)])])):f("",!0),i[6]||(i[6]=e("span",{class:"course-display__footer-text"},"Keep the slide in sync with your talk.",-1))]),i[7]||(i[7]=e("div",{class:"course-display__footer-right"}," Slides will appear on this screen. ",-1))]),default:P(()=>{var r,v,b;return[e("div",ws,[e("section",bs,[w.value?(a(),l("div",ks,[e("img",{src:w.value.url,alt:w.value.filename},null,8,$s),e("span",Ss," Slide "+t(s.status.current_slide_index+1)+" / "+t(s.status.project.graphics.length),1)])):(a(),l("div",xs,[e("div",Ts,t(x.value.icon),1),e("h2",Ds,t(x.value.title),1),e("p",Is,t(x.value.description),1)]))]),e("aside",Ps,[e("div",Cs,[i[0]||(i[0]=e("div",{class:"course-display__label"},"Presenter",-1)),y.value?(a(),l("div",Rs,[e("div",Ms,t(y.value.label),1),L(j,{"input-id":y.value.id,"is-preview":n.isPreview},null,8,["input-id","is-preview"])])):(a(),l("div",As,"Waiting for camera signal"))]),c.value?(a(),l("div",Ls,[i[1]||(i[1]=e("div",{class:"course-display__label"},"Second Camera",-1)),e("div",js,[e("div",Bs,t(c.value.label),1),L(j,{"input-id":c.value.id,"is-preview":n.isPreview},null,8,["input-id","is-preview"])])])):f("",!0),e("div",Es,[i[2]||(i[2]=e("div",{class:"course-display__label"},"Session",-1)),e("div",Fs,t(((r=s.status.booking.customer)==null?void 0:r.name)||"Guest"),1),e("div",Ns,[(v=s.status.booking.client)!=null&&v.name?(a(),l("span",Us,t(s.status.booking.client.name),1)):f("",!0),(b=s.status.project)!=null&&b.name?(a(),l("span",Gs,"â€¢ "+t(s.status.project.name),1)):f("",!0)]),e("div",Vs,t(s.status.booking.date)+" â€¢ "+t(s.status.booking.slot_start)+" - "+t(s.status.booking.slot_end),1)]),e("div",Os,[i[4]||(i[4]=e("div",{class:"course-display__label"},"Status",-1)),e("div",{class:G(["course-display__status",{"course-display__status--live":g.value}])},[i[3]||(i[3]=e("span",{class:"course-display__status-dot"},null,-1)),C(" "+t(g.value?"Recording":"Ready for recording"),1)],2),!s.isPreview&&s.status.disk_space_gb?(a(),l("div",Ws,t(s.status.disk_space_gb.toFixed(1))+" GB available ",1)):f("",!0)])])])]}),_:1}))}}),Ys=N(zs,[["__scopeId","data-v-b81b7a57"]]),qs={class:"course-teleprompter-display__mirror-wrapper"},Js={class:"course-teleprompter-display__timing"},Qs={class:"course-teleprompter-display__timer"},Xs={key:0,class:"course-teleprompter-display__remaining"},Zs={class:"course-teleprompter-display__layout"},et={class:"course-teleprompter-display__script glass-card"},st={class:"course-teleprompter-display__text-content"},tt={class:"course-teleprompter-display__side"},at={key:0,class:"course-teleprompter-display__card glass-panel"},it={class:"course-teleprompter-display__camera-frame"},ot={class:"course-teleprompter-display__camera-label"},lt={key:1,class:"course-teleprompter-display__card glass-panel"},rt={class:"course-teleprompter-display__camera-frame"},nt={class:"course-teleprompter-display__camera-label"},dt={class:"course-teleprompter-display__card glass-panel"},ct={class:"course-teleprompter-display__tip-title"},pt={class:"course-teleprompter-display__tip-text"},ut={class:"course-teleprompter-display__card glass-panel"},_t={class:"course-teleprompter-display__meta"},vt={class:"course-teleprompter-display__footer-left"},mt={class:"course-teleprompter-display__footer-text"},yt={key:0,class:"course-teleprompter-display__footer-right"},gt=B({__name:"CourseTeleprompterDisplay",props:{status:{},isPreview:{type:Boolean}},setup(n){const s=n,$=O(),h=I(0),k=I(0),p=I(!1);let S=null,g=null,T=null;const D=[{icon:"ðŸŽ¯",title:"Look Directly at the Camera Lens",description:"Maintain eye contact with the lens for a natural connection"},{icon:"ðŸ—£ï¸",title:"Speak at a Steady, Natural Pace",description:"Take your time and speak clearly"},{icon:"â¸ï¸",title:"Use the Pause Function",description:"Press Space to pause and collect your thoughts"},{icon:"âš¡",title:"Adjust Scroll Speed",description:"Use +/- keys to match your reading pace"}];E(async()=>{S=window.setInterval(()=>{h.value=(h.value+1)%D.length},5e3),window.addEventListener("keydown",b),w.value&&u(),await $.fetchInputs(),T=window.setInterval(()=>{$.fetchInputs()},2e3)}),F(()=>{S&&clearInterval(S),T&&clearInterval(T),g&&cancelAnimationFrame(g),window.removeEventListener("keydown",b)});const w=_(()=>{var d;return((d=s.status)==null?void 0:d.recording_active)||!1}),x=_(()=>{var U;if(!((U=s.status)!=null&&U.recording_duration_ms))return"00:00:00";const d=Math.floor(s.status.recording_duration_ms/1e3),m=Math.floor(d/3600),R=Math.floor(d%3600/60),M=d%60;return`${m.toString().padStart(2,"0")}:${R.toString().padStart(2,"0")}:${M.toString().padStart(2,"0")}`}),y=_(()=>{var U;if(!((U=s.status)!=null&&U.booking))return null;const d=new Date,R=new Date(`${s.status.booking.date} ${s.status.booking.slot_end}`).getTime()-d.getTime();return R<=0?"Time expired":`${Math.floor(R/6e4)} min left`}),c=_(()=>D[h.value]),o=_(()=>{var m;return(((m=s.status)==null?void 0:m.teleprompter_scroll_speed)||50)/100*4.5+.5}),i=_(()=>{var d;return s.isPreview?`This is a preview of the course teleprompter display.

When a script is loaded, it will appear here and scroll automatically during recording.

Use the arrow keys to scroll manually, or press Space to pause.`:((d=s.status)==null?void 0:d.teleprompter_script)||"No script loaded. Please add a script in the booking settings."}),r=_(()=>$.inputs.find(d=>d.hasSignal)||null),v=_(()=>{const d=$.inputs.filter(m=>m.hasSignal);return d.length>1?d[1]:null});function b(d){if(w.value)switch(d.key){case" ":d.preventDefault(),p.value=!p.value;break;case"ArrowUp":d.preventDefault(),k.value=Math.max(0,k.value-50);break;case"ArrowDown":d.preventDefault(),k.value+=50;break}}function u(){function d(){p.value||(k.value+=o.value),g=requestAnimationFrame(d)}d()}return(d,m)=>(a(),l("div",qs,[L(V,{title:"Course Session",subtitle:"Teleprompter mode",accent:"blue","show-footer":w.value,"main-class":"course-teleprompter-display__main"},{"header-right":P(()=>[e("div",Js,[e("span",Qs,t(x.value),1),y.value?(a(),l("span",Xs,t(y.value),1)):f("",!0)])]),footer:P(()=>[e("div",vt,[m[5]||(m[5]=e("span",{class:"course-teleprompter-display__rec-badge"},[e("span",{class:"course-teleprompter-display__rec-dot"}),C(" REC ")],-1)),e("span",mt," Space = "+t(p.value?"Resume":"Pause")+" â€¢ â†‘â†“ = Scroll ",1)]),p.value?(a(),l("div",yt," â¸ Paused ")):f("",!0)]),default:P(()=>[e("div",Zs,[e("section",et,[e("div",{class:"course-teleprompter-display__text",style:z({transform:`translateY(-${k.value}px)`})},[e("div",st,t(i.value),1)],4)]),e("aside",tt,[r.value?(a(),l("div",at,[m[0]||(m[0]=e("div",{class:"course-teleprompter-display__label"},"Presenter",-1)),e("div",it,[e("div",ot,t(r.value.label),1),L(j,{"input-id":r.value.id,"is-preview":n.isPreview},null,8,["input-id","is-preview"])])])):f("",!0),v.value?(a(),l("div",lt,[m[1]||(m[1]=e("div",{class:"course-teleprompter-display__label"},"Second Camera",-1)),e("div",rt,[e("div",nt,t(v.value.label),1),L(j,{"input-id":v.value.id,"is-preview":n.isPreview},null,8,["input-id","is-preview"])])])):f("",!0),e("div",dt,[m[2]||(m[2]=e("div",{class:"course-teleprompter-display__label"},"Tip",-1)),e("div",ct,t(c.value.title),1),e("div",pt,t(c.value.description),1)]),e("div",ut,[m[4]||(m[4]=e("div",{class:"course-teleprompter-display__label"},"Status",-1)),e("div",{class:G(["course-teleprompter-display__status",{"course-teleprompter-display__status--live":w.value}])},[m[3]||(m[3]=e("span",{class:"course-teleprompter-display__status-dot"},null,-1)),C(" "+t(w.value?"Recording":"Ready for recording"),1)],2),e("div",_t," Scroll speed: "+t(s.status.teleprompter_scroll_speed||50)+"% ",1)])])])]),_:1},8,["show-footer"])]))}}),ft=N(gt,[["__scopeId","data-v-5d91aa67"]]),ht={class:"studio-display"},wt={key:0,class:"display-content"},bt={key:1,class:"display-content"},kt={class:"text-center"},$t={class:"text-xl text-preke-text-dim"},St={key:2,class:"display-content"},xt={key:5,class:"text-center"},Tt={class:"text-2xl text-preke-text-dim"},Dt=B({__name:"StudioDisplayView",setup(n){const s=Y(),$=_(()=>s.params.token),h=_(()=>!$.value),k=_(()=>{if(h.value){const y=s.name;if(y==="podcast-display")return"podcast";if(y==="talking-head-display")return"teleprompter";if(y==="course-display")return"course";if(y==="course-teleprompter-display")return"course-teleprompter";if(y==="webinar-display")return"webinar"}return null}),p=I(null),S=I(!0),g=I(null);let T=null;E(async()=>{h.value?(console.log("[StudioDisplay] Direct access mode, route:",s.name,"mode:",k.value),D()):(console.log("[StudioDisplay] Token-based mode, token:",$.value),await w(),T=window.setInterval(w,2e3))}),F(()=>{T&&clearInterval(T)});function D(){const y=k.value||"podcast";console.log("[StudioDisplay] Creating mock status for mode:",y);const c=new Date,o=new Date(c.getTime()+60*60*1e3),i=c.toISOString().split("T")[0],r=c.toTimeString().slice(0,5),v=o.toTimeString().slice(0,5);p.value={booking:{id:0,date:i,slot_start:r,slot_end:v,customer:{name:"Demo Session",email:"demo@preke.no"},client:{name:"Preke Studio",logo_url:null}},project:{id:0,name:"Demo Recording",slug:"demo",graphics:[]},recording_active:!1,recording_duration_ms:0,current_slide_index:0,display_mode:y,is_preview:!0},S.value=!1,console.log("[StudioDisplay] Mock status created:",p.value)}async function w(){if($.value)try{const y=await Q.wordpress.getCustomerStatus($.value);p.value=y,g.value=null}catch(y){S.value&&(g.value=y.message||"Invalid session")}finally{S.value=!1}}const x=_(()=>{var y;return h.value?k.value||"podcast":((y=p.value)==null?void 0:y.display_mode)||"podcast"});return(y,c)=>(a(),l("div",ht,[c[3]||(c[3]=e("div",{class:"display-bg"},[e("div",{class:"bg-orb bg-orb--1"}),e("div",{class:"bg-orb bg-orb--2"})],-1)),S.value?(a(),l("div",wt,[...c[0]||(c[0]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin w-16 h-16 border-4 border-preke-gold border-t-transparent rounded-full mx-auto mb-6"}),e("p",{class:"text-2xl text-preke-text-dim"},"Loading session...")],-1)])])):g.value?(a(),l("div",bt,[e("div",kt,[c[1]||(c[1]=e("svg",{class:"w-24 h-24 text-preke-red mx-auto mb-6",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"})],-1)),c[2]||(c[2]=e("h2",{class:"text-3xl font-bold mb-4"},"Session Not Found",-1)),e("p",$t,t(g.value),1)])])):p.value?(a(),l("div",St,[x.value==="podcast"?(a(),A(xe,{key:0,status:p.value,"is-preview":h.value},null,8,["status","is-preview"])):x.value==="course"?(a(),A(Ys,{key:1,status:p.value,"is-preview":h.value},null,8,["status","is-preview"])):x.value==="course-teleprompter"?(a(),A(ft,{key:2,status:p.value,"is-preview":h.value},null,8,["status","is-preview"])):x.value==="teleprompter"?(a(),A(Ke,{key:3,status:p.value,"is-preview":h.value},null,8,["status","is-preview"])):x.value==="webinar"?(a(),A(ys,{key:4,status:p.value,"is-preview":h.value},null,8,["status","is-preview"])):(a(),l("div",xt,[e("p",Tt,"Unknown display mode: "+t(x.value),1)]))])):f("",!0)]))}}),Mt=N(Dt,[["__scopeId","data-v-4667796f"]]);export{Mt as default};
