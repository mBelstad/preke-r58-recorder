const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-CUcT0yOH.js","./index-Cd68gYzd.css"])))=>i.map(i=>d[i]);
import{J as le,r as g,e as N,I as q,d as U,N as ie,f as H,g as oe,c as n,a as e,H as h,t as d,k as M,n as R,l as z,F as E,m as L,o as a,z as Y,w as F,O as Z,P as ce,Q as re,s as ee,R as te,i as de,q as G,S as ue,C as K,h as se}from"./index-CUcT0yOH.js";import{V as ae,g as pe}from"./vdoninja-D8mLQF_b.js";const ve={cam0:"HDMI 1",cam1:"HDMI 2",cam2:"HDMI 3",cam3:"HDMI 4"},me=le("capabilities",()=>{const S=g(null),p=g(!1),r=g(null),b=N(()=>{var o;return((o=S.value)==null?void 0:o.mixer_available)??!1}),v=N(()=>{var o;return((o=S.value)==null?void 0:o.recorder_available)??!0}),m=N(()=>{var o,l;return((l=(o=S.value)==null?void 0:o.vdoninja)==null?void 0:l.enabled)??!0}),f=N(()=>{if(!S.value||!S.value.storage_total_gb)return 0;const o=S.value.storage_total_gb-S.value.storage_available_gb;return Math.round(o/S.value.storage_total_gb*100)});async function u(){var o,l;p.value=!0,r.value=null;try{const[j,w,t]=await Promise.all([fetch(q("/health")),fetch(q("/api/mode/status")),fetch(q("/api/ingest/status"))]),s=j.ok?await j.json():{},y=w.ok?await w.json():{},T=t.ok?await t.json():{cameras:{}},O=Object.entries(T.cameras||{}).map(([V,P])=>{var I;return{id:V,type:"hdmi",label:ve[V]||V,max_resolution:((I=P.resolution)==null?void 0:I.formatted)||"4K",supports_audio:!0,device_path:P.device||null,status:P.status||"unknown",has_signal:P.has_signal||!1}});S.value={device_id:"r58-device",device_name:"Preke R58",platform:s.platform||"R58",api_version:"2.0",mixer_available:((o=y.available_modes)==null?void 0:o.includes("mixer"))??!0,recorder_available:((l=y.available_modes)==null?void 0:l.includes("recorder"))??!0,graphics_available:!0,fleet_agent_connected:!1,inputs:O,codecs:[{id:"h264",name:"H.264",hardware_accelerated:!0,max_bitrate_kbps:5e4}],preview_modes:[{id:"whep",protocol:"WebRTC",latency_ms:100,url_template:"/{cam_id}/whep"}],vdoninja:{enabled:!0,host:"r58-vdo.itagenten.no",port:443,room:"studio"},mediamtx_base_url:"rtsp://127.0.0.1:8554",max_simultaneous_recordings:4,max_output_resolution:"4K",storage_total_gb:0,storage_available_gb:0,current_mode:y.current_mode||"recorder"},r.value=null}catch(j){r.value=j instanceof Error?j.message:"Unknown error",console.error("Failed to fetch capabilities:",j)}finally{p.value=!1}}return{capabilities:S,loading:p,error:r,mixerEnabled:b,recorderEnabled:v,vdoNinjaEnabled:m,storagePercent:f,fetchCapabilities:u}}),fe={class:"grid gap-6 md:grid-cols-2 lg:grid-cols-3"},be={class:"card"},xe={key:0,class:"text-r58-text-secondary"},ye={key:1,class:"text-r58-accent-danger"},ge={key:2,class:"space-y-3"},_e={class:"flex justify-between"},he={class:"font-medium"},we={class:"flex justify-between"},ke={class:"capitalize"},$e={class:"flex justify-between"},Se={class:"card"},je={class:"space-y-4"},Ce={class:"flex items-center justify-between"},De={class:"flex gap-2"},Re=["disabled"],Ae={key:0,class:"inline-block animate-spin mr-1"},Ne=["disabled"],Pe={key:0,class:"inline-block animate-spin mr-1"},Me={key:0,class:"text-sm text-r58-accent-danger"},Ve={class:"card"},Ie={class:"space-y-3"},Ee={class:"flex justify-between items-center"},Te={class:"flex justify-between items-center"},Oe={class:"card md:col-span-2 lg:col-span-3"},Fe={class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4"},Le={class:"flex items-center justify-between mb-3"},Ue={class:"flex items-center gap-2"},He={class:"font-medium"},Be={class:"space-y-1 text-sm text-r58-text-secondary"},ze={class:"flex justify-between"},qe={class:"text-r58-text-primary"},Ge={class:"flex justify-between"},Ke={class:"text-r58-text-primary"},Je={class:"flex justify-between"},We={class:"text-r58-text-primary font-mono text-xs"},Qe={key:0,class:"col-span-full text-center text-r58-text-secondary py-8"},Xe=U({__name:"DeviceStatus",setup(S){const p=me(),{capabilities:r,loading:b,error:v}=ie(p),m=g(!1),f=g(null);let u=null;async function o(w){if(!m.value){m.value=!0,f.value=null;try{const t=await fetch(q(`/api/mode/${w}`),{method:"POST"});if(!t.ok){const s=await t.json().catch(()=>({}));throw new Error(s.detail||`Failed to switch to ${w} mode`)}await p.fetchCapabilities()}catch(t){f.value=t instanceof Error?t.message:"Failed to switch mode",console.error("Mode switch error:",t)}finally{m.value=!1}}}function l(w,t){if(!t)return"bg-r58-text-secondary";switch(w){case"streaming":case"recording":return"bg-r58-accent-success";case"preview":return"bg-r58-accent-info";case"idle":return"bg-r58-text-secondary";case"error":return"bg-r58-accent-danger";default:return"bg-r58-text-secondary"}}function j(w,t){if(!t)return"No Signal";switch(w){case"streaming":return"Streaming";case"recording":return"Recording";case"preview":return"Preview";case"idle":return"Idle";case"error":return"Error";default:return w}}return H(()=>{p.fetchCapabilities(),u=setInterval(()=>{p.fetchCapabilities()},1e4)}),oe(()=>{u&&clearInterval(u)}),(w,t)=>{var s,y,T,O,V,P,I,c,i,x,$,C,D,A;return a(),n("div",fe,[e("div",be,[t[6]||(t[6]=e("h3",{class:"text-sm font-semibold text-r58-text-secondary uppercase tracking-wide mb-4"},"Device Info",-1)),h(b)&&!h(r)?(a(),n("div",xe," Loading... ")):h(v)&&!h(r)?(a(),n("div",ye,d(h(v)),1)):(a(),n("div",ge,[e("div",_e,[t[2]||(t[2]=e("span",{class:"text-r58-text-secondary"},"Device Name",-1)),e("span",he,d(((s=h(r))==null?void 0:s.device_name)||"R58 Device"),1)]),e("div",we,[t[3]||(t[3]=e("span",{class:"text-r58-text-secondary"},"Platform",-1)),e("span",ke,d(((y=h(r))==null?void 0:y.platform)||"-"),1)]),e("div",$e,[t[4]||(t[4]=e("span",{class:"text-r58-text-secondary"},"API Version",-1)),e("span",null,d(((T=h(r))==null?void 0:T.api_version)||"-"),1)]),t[5]||(t[5]=e("div",{class:"flex justify-between"},[e("span",{class:"text-r58-text-secondary"},"GStreamer"),e("span",{class:"badge badge-success"},"Initialized")],-1))]))]),e("div",Se,[t[10]||(t[10]=e("h3",{class:"text-sm font-semibold text-r58-text-secondary uppercase tracking-wide mb-4"},"Operating Mode",-1)),e("div",je,[e("div",Ce,[t[7]||(t[7]=e("span",{class:"text-r58-text-secondary"},"Current Mode",-1)),e("span",{class:R(["badge",((O=h(r))==null?void 0:O.current_mode)==="mixer"?"badge-info":"badge-success"])},d(((V=h(r))==null?void 0:V.current_mode)==="mixer"?"Mixer":"Recorder"),3)]),e("div",De,[e("button",{class:R(["btn btn-sm flex-1",((P=h(r))==null?void 0:P.current_mode)==="recorder"?"btn-primary":"btn-secondary"]),disabled:m.value||((I=h(r))==null?void 0:I.current_mode)==="recorder",onClick:t[0]||(t[0]=_=>o("recorder"))},[m.value&&((c=h(r))==null?void 0:c.current_mode)!=="recorder"?(a(),n("span",Ae,"⟳")):M("",!0),t[8]||(t[8]=z(" Recorder ",-1))],10,Re),e("button",{class:R(["btn btn-sm flex-1",((i=h(r))==null?void 0:i.current_mode)==="mixer"?"btn-primary":"btn-secondary"]),disabled:m.value||((x=h(r))==null?void 0:x.current_mode)==="mixer",onClick:t[1]||(t[1]=_=>o("mixer"))},[m.value&&(($=h(r))==null?void 0:$.current_mode)!=="mixer"?(a(),n("span",Pe,"⟳")):M("",!0),t[9]||(t[9]=z(" Mixer ",-1))],10,Ne)]),f.value?(a(),n("div",Me,d(f.value),1)):M("",!0)])]),e("div",Ve,[t[15]||(t[15]=e("h3",{class:"text-sm font-semibold text-r58-text-secondary uppercase tracking-wide mb-4"},"Available Features",-1)),e("div",Ie,[e("div",Ee,[t[11]||(t[11]=e("div",null,[e("span",null,"Mixer"),e("span",{class:"text-xs text-r58-text-secondary ml-1"},"(VDO.ninja)")],-1)),e("span",{class:R(["badge",h(p).mixerEnabled?"badge-success":"badge-warning"])},d(h(p).mixerEnabled?"Available":"Disabled"),3)]),e("div",Te,[t[12]||(t[12]=e("span",null,"Recorder",-1)),e("span",{class:R(["badge",h(p).recorderEnabled?"badge-success":"badge-warning"])},d(h(p).recorderEnabled?"Available":"Disabled"),3)]),t[13]||(t[13]=e("div",{class:"flex justify-between items-center"},[e("span",null,"Graphics Overlay"),e("span",{class:"badge badge-success"},"Available")],-1)),t[14]||(t[14]=e("div",{class:"flex justify-between items-center"},[e("span",null,"WebRTC Preview"),e("span",{class:"badge badge-success"},"Available")],-1))])]),e("div",Oe,[t[19]||(t[19]=e("h3",{class:"text-sm font-semibold text-r58-text-secondary uppercase tracking-wide mb-4"},"Hardware Inputs",-1)),e("div",Fe,[(a(!0),n(E,null,L(((C=h(r))==null?void 0:C.inputs)||[],_=>{var B;return a(),n("div",{key:_.id,class:R(["p-4 rounded-lg bg-r58-bg-tertiary border border-r58-border",{"border-r58-accent-success/50":_.has_signal}])},[e("div",Le,[e("div",Ue,[e("span",{class:R(["w-2 h-2 rounded-full animate-pulse",l(_.status,_.has_signal)])},null,2),e("span",He,d(_.label),1)]),e("span",{class:R(["text-xs px-2 py-0.5 rounded-full",{"bg-r58-accent-success/20 text-r58-accent-success":_.has_signal&&(_.status==="streaming"||_.status==="recording"),"bg-r58-accent-info/20 text-r58-accent-info":_.has_signal&&_.status==="preview","bg-r58-bg-tertiary text-r58-text-secondary":!_.has_signal||_.status==="idle"}])},d(j(_.status,_.has_signal)),3)]),e("div",Be,[e("div",ze,[t[16]||(t[16]=e("span",null,"Type",-1)),e("span",qe,d(_.type.toUpperCase()),1)]),e("div",Ge,[t[17]||(t[17]=e("span",null,"Resolution",-1)),e("span",Ke,d(_.max_resolution||"N/A"),1)]),e("div",Je,[t[18]||(t[18]=e("span",null,"Device",-1)),e("span",We,d(((B=_.device_path)==null?void 0:B.split("/").pop())||"N/A"),1)])])],2)}),128)),(A=(D=h(r))==null?void 0:D.inputs)!=null&&A.length?M("",!0):(a(),n("div",Qe," No inputs detected "))])])])}}}),Ye={class:"space-y-4"},Ze={class:"flex items-center gap-4 flex-wrap"},et=["value"],tt={class:"flex items-center gap-2 cursor-pointer"},st=["disabled"],at={key:0},nt={key:1},ot={class:"bg-r58-bg-primary rounded-lg p-4 font-mono text-sm text-r58-text-secondary h-[500px] overflow-auto whitespace-pre-wrap"},rt=U({__name:"LogViewer",props:{service:{}},setup(S){const p=S,r=g(""),b=g(!1),v=g(p.service||"r58-api"),m=g(100),f=g(!1),u=[{id:"r58-api",label:"R58 API"},{id:"r58-pipeline",label:"Pipeline Manager"},{id:"mediamtx",label:"MediaMTX"}];let o=null;async function l(){b.value=!0;try{const s=await(await fetch(`/api/v1/support/logs?service=${v.value}&lines=${m.value}`)).json();r.value=s.logs||""}catch(t){r.value=`Error fetching logs: ${t}`}finally{b.value=!1}}function j(){o&&clearInterval(o),o=window.setInterval(l,5e3)}function w(){o&&(clearInterval(o),o=null)}return Y(f,t=>{t?j():w()}),Y([v,m],()=>{l()}),H(()=>{l()}),(t,s)=>(a(),n("div",Ye,[e("div",Ze,[F(e("select",{"onUpdate:modelValue":s[0]||(s[0]=y=>v.value=y),class:"input"},[(a(),n(E,null,L(u,y=>e("option",{key:y.id,value:y.id},d(y.label),9,et)),64))],512),[[Z,v.value]]),F(e("select",{"onUpdate:modelValue":s[1]||(s[1]=y=>m.value=y),class:"input"},[...s[3]||(s[3]=[e("option",{value:50},"50 lines",-1),e("option",{value:100},"100 lines",-1),e("option",{value:250},"250 lines",-1),e("option",{value:500},"500 lines",-1)])],512),[[Z,m.value]]),e("label",tt,[F(e("input",{type:"checkbox","onUpdate:modelValue":s[2]||(s[2]=y=>f.value=y),class:"w-4 h-4 rounded"},null,512),[[ce,f.value]]),s[4]||(s[4]=e("span",{class:"text-sm"},"Auto-refresh",-1))]),e("button",{onClick:l,disabled:b.value,class:"btn"},[b.value?(a(),n("span",at,"Loading...")):(a(),n("span",nt,"Refresh"))],8,st)]),e("pre",ot,d(r.value||"No logs available"),1)]))}}),lt={class:"space-y-6"},it={class:"flex items-center justify-between"},ct=["disabled"],dt={key:0},ut={key:1},pt={key:0,class:"flex items-center justify-center py-12"},vt={key:1,class:"text-center py-12 text-r58-text-secondary"},mt={key:2,class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},ft=["onClick"],bt={class:"flex items-start justify-between mb-4"},xt={class:"font-semibold"},yt={class:"text-sm text-r58-text-secondary"},gt={class:"space-y-2 text-sm"},_t={class:"flex justify-between"},ht={class:"font-mono"},wt={class:"flex justify-between"},kt=U({__name:"FleetOverview",setup(S){const p=g([]),r=g(!0),b=g(!1);async function v(){r.value=!0;try{const u=await fetch("/api/v1/lan-devices");if(u.ok){const o=await u.json();p.value=o.map(l=>({id:l.id,name:l.name,ip:l.ip,status:l.status,lastSeen:l.last_seen,version:l.api_version||"unknown"}))}}catch(u){console.error("Failed to fetch LAN devices:",u)}finally{r.value=!1}}H(v);async function m(){b.value=!0;try{const u=await fetch("/api/v1/lan-devices/scan",{method:"POST"});if(u.ok){const o=await u.json();for(const l of o)p.value.find(w=>w.id===l.id)||p.value.push({id:l.id,name:l.name,ip:l.ip,status:l.status,lastSeen:l.last_seen,version:l.api_version||"unknown"})}}catch(u){console.error("LAN network scan failed:",u)}finally{b.value=!1}}async function f(u){try{const l=await(await fetch(`/api/v1/lan-devices/${u.id}/connect`,{method:"POST"})).json();l.connected?window.open(`http://${u.ip}:8000`,"_blank"):alert(`Failed to connect: ${l.error||"Unknown error"}`)}catch(o){console.error("Failed to connect to device:",o)}}return(u,o)=>(a(),n("div",lt,[e("div",it,[o[0]||(o[0]=e("h2",{class:"text-lg font-semibold"},"LAN Devices",-1)),e("button",{onClick:m,disabled:b.value,class:"btn"},[b.value?(a(),n("span",dt,"Scanning...")):(a(),n("span",ut,"Scan Network"))],8,ct)]),r.value?(a(),n("div",pt,[...o[1]||(o[1]=[e("div",{class:"animate-spin w-8 h-8 border-2 border-r58-accent-primary border-t-transparent rounded-full"},null,-1)])])):p.value.length===0?(a(),n("div",vt,[...o[2]||(o[2]=[e("p",null,"No devices found",-1),e("p",{class:"text-sm mt-2"},'Click "Scan Network" to discover R58 devices',-1)])])):(a(),n("div",mt,[(a(!0),n(E,null,L(p.value,l=>(a(),n("div",{key:l.id,class:"card hover:border-r58-accent-primary/50 transition-colors cursor-pointer",onClick:j=>f(l)},[e("div",bt,[e("div",null,[e("h3",xt,d(l.name),1),e("p",yt,d(l.id),1)]),e("span",{class:R(["badge",{"badge-success":l.status==="online","badge-danger":l.status==="offline","badge-warning":l.status==="unknown"}])},d(l.status),3)]),e("div",gt,[e("div",_t,[o[3]||(o[3]=e("span",{class:"text-r58-text-secondary"},"IP Address",-1)),e("span",ht,d(l.ip),1)]),e("div",wt,[o[4]||(o[4]=e("span",{class:"text-r58-text-secondary"},"Version",-1)),e("span",null,d(l.version),1)])])],8,ft))),128))]))]))}}),$t={class:"space-y-6"},St={key:0,class:"flex items-center justify-center py-12"},jt={key:1,class:"card bg-r58-accent-danger/10 border border-r58-accent-danger/30"},Ct={class:"text-r58-accent-danger"},Dt={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-4"},Rt={class:"card"},At={key:0,class:"space-y-3"},Nt={class:"relative w-full h-4 bg-r58-bg-tertiary rounded-full overflow-hidden"},Pt={class:"flex justify-between text-sm"},Mt={class:"font-mono"},Vt={key:1,class:"flex items-center justify-center py-4"},It={class:"card"},Et={key:0,class:"space-y-3"},Tt={class:"relative w-full h-4 bg-r58-bg-tertiary rounded-full overflow-hidden"},Ot={class:"flex justify-between text-sm"},Ft={key:1,class:"flex items-center justify-center py-4"},Lt={class:"card"},Ut={class:"flex items-center justify-center py-2"},Ht={key:1,class:"text-r58-text-secondary"},Bt={key:0,class:"text-center text-xs text-r58-text-secondary"},zt={class:"card"},qt={class:"flex items-center justify-center py-2"},Gt={key:0,class:"text-3xl font-bold text-r58-accent-primary"},Kt={key:1,class:"text-r58-text-secondary"},Jt={class:"text-center text-xs text-r58-text-secondary"},Wt={class:"card"},Qt={class:"flex items-center justify-between mb-4"},Xt={class:"flex gap-2"},Yt={class:"grid gap-3 sm:grid-cols-3"},Zt={class:"flex items-center gap-3"},es={class:"font-medium"},ts={class:"text-xs text-r58-text-secondary"},ss={key:0},as={class:"card"},ns={class:"text-sm font-semibold text-r58-text-secondary uppercase tracking-wide mb-4"},os={class:"ml-2 text-r58-accent-primary"},rs={key:0,class:"text-center py-8 text-r58-text-secondary"},ls={key:1,class:"space-y-2"},is={class:"flex items-center gap-4"},cs={class:"font-mono text-sm"},ds={class:"text-xs text-r58-text-secondary"},us={key:0},ps={class:"flex items-center gap-3"},vs=["onClick"],ms=U({__name:"SystemMonitor",setup(S){const p=re(),r=g(!0),b=g(null),v=g(null),m=g(null),f=N(()=>{var x,$,C;const c=((C=($=(x=v.value)==null?void 0:x.info)==null?void 0:$.load_average)==null?void 0:C[0])??0;return Math.min(100,c/8*100)}),u=N(()=>{var i,x;const c=(x=(i=v.value)==null?void 0:i.info)==null?void 0:x.memory_percent;return c!==void 0?c:0}),o=N(()=>{var x,$;const c=(($=(x=v.value)==null?void 0:x.info)==null?void 0:$.temperatures)??[];return c.length===0?null:c.find(C=>{var D;return(D=C.type)==null?void 0:D.toLowerCase().includes("cpu")})??c[0]}),l=N(()=>{var C,D;const c=((D=(C=v.value)==null?void 0:C.info)==null?void 0:D.uptime_seconds)??0,i=Math.floor(c/86400),x=Math.floor(c%86400/3600),$=Math.floor(c%3600/60);return i>0?`${i}d ${x}h`:x>0?`${x}h ${$}m`:`${$}m`}),j=N(()=>{var c;return((c=v.value)==null?void 0:c.services)??[]}),w=N(()=>{var c;return((c=v.value)==null?void 0:c.pipelines)??[]});async function t(){try{const{buildApiUrl:c}=await te(async()=>{const{buildApiUrl:D}=await import("./index-CUcT0yOH.js").then(A=>A.V);return{buildApiUrl:D}},__vite__mapDeps([0,1]),import.meta.url),i=await fetch(c("/health"));if(!i.ok)throw new Error("Failed to fetch status");const x=await i.json(),$=await fetch(c("/api/ingest/status")),C=$.ok?await $.json():{cameras:{}};v.value={info:{hostname:"R58 Device",platform:x.platform||"R58",gstreamer:x.gstreamer,load_average:[0,0,0],memory_percent:0,uptime_seconds:0,temperatures:[]},services:[{name:"r58-recorder",active:x.status==="healthy",status:x.status},{name:"mediamtx",active:!0,status:"running"},{name:"vdo.ninja",active:!0,status:"running",note:"r58-vdo.itagenten.no"}],pipelines:Object.entries(C.cameras||{}).map(([D,A])=>({pipeline_id:D,pipeline_type:"ingest",device:A.device,state:A.status==="streaming"?"running":A.status}))},b.value=null}catch(c){b.value=c.message,console.error("Failed to fetch system status:",c)}finally{r.value=!1}}async function s(c){p.info("Service restart not available in this version")}async function y(){p.info("Device reboot not available in this version")}async function T(c){try{const{buildApiUrl:i}=await te(async()=>{const{buildApiUrl:C}=await import("./index-CUcT0yOH.js").then(D=>D.V);return{buildApiUrl:C}},__vite__mapDeps([0,1]),import.meta.url),x=await fetch(i(`/api/ingest/stop/${c}`),{method:"POST"}),$=await x.json();x.ok?(p.success(`Stopped pipeline: ${c}`),await t()):p.error($.detail||"Stop failed")}catch(i){p.error(`Stop failed: ${i.message}`)}}function O(c){return c.active?"bg-r58-accent-success":"bg-r58-accent-danger"}function V(c){switch(c){case"running":return"text-r58-accent-success";case"starting":return"text-r58-accent-warning";case"stopping":return"text-r58-accent-warning";default:return"text-r58-text-secondary"}}function P(c){return c>90?"bg-r58-accent-danger":c>70?"bg-r58-accent-warning":"bg-r58-accent-success"}function I(c){return c>80?"text-r58-accent-danger":c>65?"text-r58-accent-warning":"text-r58-accent-success"}return H(()=>{t(),m.value=window.setInterval(t,1e4)}),oe(()=>{m.value&&clearInterval(m.value)}),(c,i)=>{var x,$,C,D,A,_,B,J,W,Q,X;return a(),n("div",$t,[r.value?(a(),n("div",St,[...i[1]||(i[1]=[e("div",{class:"animate-spin w-8 h-8 border-2 border-r58-accent-primary border-t-transparent rounded-full"},null,-1)])])):b.value?(a(),n("div",jt,[e("p",Ct,"Error loading system status: "+d(b.value),1),e("button",{onClick:t,class:"btn btn-secondary mt-4"},"Retry")])):(a(),n(E,{key:2},[e("div",Dt,[e("div",Rt,[i[4]||(i[4]=e("h3",{class:"text-sm font-semibold text-r58-text-secondary uppercase tracking-wide mb-4"},"CPU Load",-1)),(C=($=(x=v.value)==null?void 0:x.info)==null?void 0:$.load_average)!=null&&C.some(k=>k>0)?(a(),n("div",At,[e("div",Nt,[e("div",{class:R(["absolute left-0 top-0 h-full rounded-full transition-all duration-500",P(f.value)]),style:ee({width:`${f.value}%`})},null,6)]),e("div",Pt,[i[2]||(i[2]=e("span",{class:"text-r58-text-secondary"},"Load Average",-1)),e("span",Mt,d((_=(A=(D=v.value)==null?void 0:D.info)==null?void 0:A.load_average)==null?void 0:_.map(k=>k.toFixed(2)).join(" / ")),1)])])):(a(),n("div",Vt,[...i[3]||(i[3]=[e("span",{class:"text-r58-text-secondary"},"N/A",-1)])]))]),e("div",It,[i[7]||(i[7]=e("h3",{class:"text-sm font-semibold text-r58-text-secondary uppercase tracking-wide mb-4"},"Memory",-1)),u.value>0?(a(),n("div",Et,[e("div",Tt,[e("div",{class:R(["absolute left-0 top-0 h-full rounded-full transition-all duration-500",P(u.value)]),style:ee({width:`${u.value}%`})},null,6)]),e("div",Ot,[i[5]||(i[5]=e("span",{class:"text-r58-text-secondary"},"Used",-1)),e("span",null,d(u.value.toFixed(1))+"%",1)])])):(a(),n("div",Ft,[...i[6]||(i[6]=[e("span",{class:"text-r58-text-secondary"},"N/A",-1)])]))]),e("div",Lt,[i[8]||(i[8]=e("h3",{class:"text-sm font-semibold text-r58-text-secondary uppercase tracking-wide mb-4"},"Temperature",-1)),e("div",Ut,[o.value?(a(),n("span",{key:0,class:R(["text-3xl font-bold",I(o.value.temp_celsius)])},d(o.value.temp_celsius.toFixed(1))+"°C ",3)):(a(),n("span",Ht,"N/A"))]),(B=o.value)!=null&&B.type?(a(),n("p",Bt,d(o.value.type),1)):M("",!0)]),e("div",zt,[i[9]||(i[9]=e("h3",{class:"text-sm font-semibold text-r58-text-secondary uppercase tracking-wide mb-4"},"Uptime",-1)),e("div",qt,[((W=(J=v.value)==null?void 0:J.info)==null?void 0:W.uptime_seconds)>0?(a(),n("span",Gt,d(l.value),1)):(a(),n("span",Kt,"N/A"))]),e("p",Jt,d(((X=(Q=v.value)==null?void 0:Q.info)==null?void 0:X.hostname)||"R58 Device"),1)])]),e("div",Wt,[e("div",Qt,[i[10]||(i[10]=e("h3",{class:"text-sm font-semibold text-r58-text-secondary uppercase tracking-wide"},"Services",-1)),e("div",Xt,[e("button",{onClick:i[0]||(i[0]=k=>s()),class:"btn btn-sm btn-secondary opacity-50 cursor-not-allowed",disabled:"",title:"Requires SSH access to device"}," Restart All "),e("button",{onClick:y,class:"btn btn-sm btn-danger opacity-50 cursor-not-allowed",disabled:"",title:"Requires SSH access to device"}," Reboot Device ")])]),e("div",Yt,[(a(!0),n(E,null,L(j.value,k=>(a(),n("div",{key:k.name,class:"flex items-center justify-between p-3 rounded-lg bg-r58-bg-tertiary"},[e("div",Zt,[e("span",{class:R(["w-2.5 h-2.5 rounded-full",O(k)])},null,2),e("div",null,[e("p",es,d(k.name),1),e("p",ts,[z(d(k.status)+" ",1),k.memory_mb?(a(),n("span",ss," · "+d(k.memory_mb.toFixed(0))+" MB",1)):M("",!0)])])]),i[11]||(i[11]=e("button",{class:"text-r58-text-secondary opacity-50 cursor-not-allowed",disabled:"",title:"Requires SSH access"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})])],-1))]))),128))])]),e("div",as,[e("h3",ns,[i[12]||(i[12]=z(" Active Pipelines ",-1)),e("span",os,"("+d(w.value.length)+")",1)]),w.value.length===0?(a(),n("div",rs," No active pipelines ")):(a(),n("div",ls,[(a(!0),n(E,null,L(w.value,k=>(a(),n("div",{key:k.pipeline_id,class:"flex items-center justify-between p-3 rounded-lg bg-r58-bg-tertiary"},[e("div",is,[e("div",null,[e("p",cs,d(k.pipeline_id),1),e("p",ds,[z(" Type: "+d(k.pipeline_type)+" ",1),k.device?(a(),n("span",us," · "+d(k.device),1)):M("",!0)])])]),e("div",ps,[e("span",{class:R(["text-sm font-medium capitalize",V(k.state)])},d(k.state),3),k.state==="running"?(a(),n("button",{key:0,onClick:Ts=>T(k.pipeline_id),class:"btn btn-sm btn-danger",title:"Stop pipeline"}," Stop ",8,vs)):M("",!0)])]))),128))]))])],64))])}}}),fs={class:"space-y-6"},bs={class:"card"},xs={class:"space-y-4"},ys={class:"card"},gs={class:"space-y-4"},_s=["value"],hs={class:"card"},ws={class:"space-y-4"},ks=["value"],$s={class:"flex items-center justify-between"},Ss={key:0},js={class:"card bg-r58-bg-tertiary/50"},Cs={class:"space-y-2 text-sm"},Ds={class:"flex justify-between"},ne="preke-settings",Rs=U({__name:"SettingsPanel",setup(S){const p=re(),r=g("Preke Device"),b=g(ae),v=g(pe()),m=g("/recordings"),f=g(!1),u=g(30),o=N(()=>de());function l(){try{const t=localStorage.getItem(ne);if(t){const s=JSON.parse(t);r.value=s.deviceName||r.value,b.value=s.vdoRoom||b.value,f.value=s.autoCleanup||!1,u.value=s.cleanupDays||30}}catch{}}function j(){try{const t={deviceName:r.value,vdoRoom:b.value,autoCleanup:f.value,cleanupDays:u.value};localStorage.setItem(ne,JSON.stringify(t)),p.success("Settings saved")}catch(t){p.error("Failed to save settings"),console.error("Failed to save settings:",t)}}function w(){r.value="Preke Device",b.value=ae,f.value=!1,u.value=30,j(),p.info("Settings reset to defaults")}return H(()=>{l()}),(t,s)=>(a(),n("div",fs,[e("div",bs,[s[6]||(s[6]=e("h3",{class:"text-sm font-semibold text-r58-text-secondary uppercase tracking-wide mb-4"},"Device",-1)),e("div",xs,[e("div",null,[s[4]||(s[4]=e("label",{class:"block text-sm font-medium mb-2"},"Device Name",-1)),F(e("input",{"onUpdate:modelValue":s[0]||(s[0]=y=>r.value=y),type:"text",class:"input w-full",placeholder:"My Preke Device"},null,512),[[G,r.value]]),s[5]||(s[5]=e("p",{class:"text-xs text-r58-text-secondary mt-1"},"Display name for this device in the app",-1))])])]),e("div",ys,[s[11]||(s[11]=e("h3",{class:"text-sm font-semibold text-r58-text-secondary uppercase tracking-wide mb-4"},"VDO.ninja / Mixer",-1)),e("div",gs,[e("div",null,[s[7]||(s[7]=e("label",{class:"block text-sm font-medium mb-2"},"Room Name",-1)),F(e("input",{"onUpdate:modelValue":s[1]||(s[1]=y=>b.value=y),type:"text",class:"input w-full",placeholder:"r58studio"},null,512),[[G,b.value]]),s[8]||(s[8]=e("p",{class:"text-xs text-r58-text-secondary mt-1"},"VDO.ninja room for video mixing",-1))]),e("div",null,[s[9]||(s[9]=e("label",{class:"block text-sm font-medium mb-2"},"VDO Host",-1)),e("input",{value:v.value,type:"text",class:"input w-full bg-r58-bg-tertiary",readonly:"",disabled:""},null,8,_s),s[10]||(s[10]=e("p",{class:"text-xs text-r58-text-secondary mt-1"},"VDO.ninja server (read-only)",-1))])])]),e("div",hs,[s[16]||(s[16]=e("h3",{class:"text-sm font-semibold text-r58-text-secondary uppercase tracking-wide mb-4"},"Storage",-1)),e("div",ws,[e("div",null,[s[12]||(s[12]=e("label",{class:"block text-sm font-medium mb-2"},"Recording Path",-1)),e("input",{value:m.value,type:"text",class:"input w-full bg-r58-bg-tertiary",readonly:"",disabled:""},null,8,ks),s[13]||(s[13]=e("p",{class:"text-xs text-r58-text-secondary mt-1"},"Location where recordings are saved on device",-1))]),e("div",$s,[s[14]||(s[14]=e("div",null,[e("label",{class:"block text-sm font-medium"},"Auto-cleanup old recordings"),e("p",{class:"text-xs text-r58-text-secondary"},"Automatically delete recordings older than specified days")],-1)),e("button",{onClick:s[2]||(s[2]=y=>f.value=!f.value),class:R(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors",f.value?"bg-r58-accent-primary":"bg-r58-bg-tertiary"])},[e("span",{class:R(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",f.value?"translate-x-6":"translate-x-1"])},null,2)],2)]),f.value?(a(),n("div",Ss,[s[15]||(s[15]=e("label",{class:"block text-sm font-medium mb-2"},"Keep recordings for (days)",-1)),F(e("input",{"onUpdate:modelValue":s[3]||(s[3]=y=>u.value=y),type:"number",min:"1",max:"365",class:"input w-24"},null,512),[[G,u.value,void 0,{number:!0}]])])):M("",!0)])]),e("div",{class:"flex items-center justify-between"},[e("button",{onClick:w,class:"btn btn-secondary"}," Reset to Defaults "),e("button",{onClick:j,class:"btn btn-primary"}," Save Settings ")]),e("div",js,[s[19]||(s[19]=e("h3",{class:"text-sm font-semibold text-r58-text-secondary uppercase tracking-wide mb-4"},"About",-1)),e("div",Cs,[s[18]||(s[18]=e("div",{class:"flex justify-between"},[e("span",{class:"text-r58-text-secondary"},"App Version"),e("span",null,"2.0.0")],-1)),e("div",Ds,[s[17]||(s[17]=e("span",{class:"text-r58-text-secondary"},"Platform",-1)),e("span",null,d(o.value?"Desktop (Electron)":"Web Browser"),1)])])])]))}}),As={class:"h-full flex flex-col"},Ns={class:"px-6 py-4 border-b border-r58-bg-tertiary bg-r58-bg-secondary"},Ps={class:"flex gap-2"},Ms=["onClick"],Vs={class:"flex-1 p-6 overflow-y-auto"},Is={key:2,class:"card"},Es={key:3,class:"card"},Ls=U({__name:"AdminView",setup(S){const p=ue(),r=g("system"),b=[{id:"system",label:"System"},{id:"status",label:"Device Status"},{id:"logs",label:"Logs"},{id:"fleet",label:"Fleet"},{id:"settings",label:"Settings"}];return H(()=>{const v=p.query.tab;v&&b.some(m=>m.id===v)&&(r.value=v)}),(v,m)=>(a(),n("div",As,[e("header",Ns,[m[0]||(m[0]=e("h1",{class:"text-xl font-semibold mb-4"},"Admin",-1)),e("div",Ps,[(a(),n(E,null,L(b,f=>e("button",{key:f.id,onClick:u=>r.value=f.id,class:R(["px-4 py-2 rounded-t-lg transition-colors",[r.value===f.id?"bg-r58-bg-primary text-r58-text-primary":"text-r58-text-secondary hover:text-r58-text-primary"]])},d(f.label),11,Ms)),64))])]),e("div",Vs,[r.value==="system"?(a(),K(ms,{key:0})):r.value==="status"?(a(),K(Xe,{key:1})):r.value==="logs"?(a(),n("div",Is,[m[1]||(m[1]=e("h2",{class:"text-lg font-semibold mb-4"},"System Logs",-1)),se(rt)])):r.value==="fleet"?(a(),n("div",Es,[se(kt)])):r.value==="settings"?(a(),K(Rs,{key:4})):M("",!0)])]))}});export{Ls as default};
