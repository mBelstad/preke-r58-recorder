const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DUBhsRZp.js","assets/index-n7u0C3Yf.css"])))=>i.map(i=>d[i]);
import{N as i}from"./index-DUBhsRZp.js";let c=null;async function u(){if(c)return c;try{const{getDeviceUrl:t}=await i(async()=>{const{getDeviceUrl:e}=await import("./index-DUBhsRZp.js").then(r=>r.a4);return{getDeviceUrl:e}},__vite__mapDeps([0,1])),o=t();if(o){const e=new AbortController,r=setTimeout(()=>e.abort(),3e3),s=await fetch(`${o}/api/config`,{signal:e.signal,mode:"cors",cache:"no-cache"});if(clearTimeout(r),s.ok){const n=await s.json();if(n.vdo_host||n.vdoninja_host)return c=n.vdo_host||n.vdoninja_host,c}}}catch{console.log("[VDO.ninja] Device does not provide VDO.ninja host configuration")}const a="r58-vdo.itagenten.no";return c=a,console.log(`[VDO.ninja] Using default host: ${a}`),a}function l(){return"https"}const d="studio",h="preke-r58-2024";function m(){var t,o;const a=`
/* R58 VDO.ninja Theme - Colors Only */
:root {
  --r58-bg: #0f172a;
  --r58-bg2: #1e293b;
  --r58-bg3: #334155;
  --r58-text: #f8fafc;
  --r58-muted: #94a3b8;
  --r58-blue: #3b82f6;
  --r58-green: #22c55e;
  --r58-gold: #f59e0b;
  --r58-border: #475569;
}
body { background: var(--r58-bg); color: var(--r58-text); }
#mainmenu, .controlButtons, #guestFeatures { background: var(--r58-bg2); }
button, .button { background: var(--r58-bg3); color: var(--r58-text); border-color: var(--r58-border); }
button:hover { background: var(--r58-blue); }
input, select, textarea { background: var(--r58-bg3); color: var(--r58-text); border-color: var(--r58-border); }
a { color: var(--r58-blue); }
.vidcon { background: var(--r58-bg2); border-color: var(--r58-border); border-radius: 8px; }
video { border-radius: 6px; }
`;if(typeof window<"u"&&((o=(t=window.location)==null?void 0:t.origin)!=null&&o.startsWith("file://")))return"";try{return btoa(unescape(encodeURIComponent(a)))}catch{return""}}async function P(a){const t=await u();if(!t)return null;const o=l(),e=new URL(`${o}://${t}/`);e.searchParams.set("scene",""),e.searchParams.set("room",d),e.searchParams.set("cover",""),e.searchParams.set("quality","0"),e.searchParams.set("width","1280"),e.searchParams.set("height","720"),e.searchParams.set("cleanoutput",""),e.searchParams.set("hideheader",""),e.searchParams.set("nologo",""),e.searchParams.set("whipout",a),e.searchParams.set("autostart",""),e.searchParams.set("videodevice","0"),e.searchParams.set("audiodevice","0");const r=m();return r&&e.searchParams.set("b64css",r),e.toString()}async function g(){var a;try{const{getDeviceUrl:t}=await i(async()=>{const{getDeviceUrl:e}=await import("./index-DUBhsRZp.js").then(r=>r.a4);return{getDeviceUrl:e}},__vite__mapDeps([0,1])),o=t();if(o){const e=new AbortController,r=setTimeout(()=>e.abort(),3e3),s=await fetch(`${o}/api/config`,{signal:e.signal,mode:"cors",cache:"no-cache"});if(clearTimeout(r),s.ok){const n=await s.json();if((a=n.vdo_ninja)!=null&&a.api_key)return n.vdo_ninja.api_key}}}catch{console.log("[VDO.ninja] Could not fetch API key from config")}return"preke-r58-2024-secure-key"}async function v(a={}){const t=await u();if(!t)return null;const o=l(),e=new URL(`${o}://${t}/mixer.html`),r=a.room||d;e.searchParams.set("room",r),e.searchParams.set("password",h);const s=await g();s&&e.searchParams.set("api",s),a.mediamtxHost&&e.searchParams.set("mediamtx",a.mediamtxHost),e.searchParams.set("totalroombitrate","6000"),e.searchParams.set("maxvideobitrate","2000");const n=m();return n&&e.searchParams.set("b64css",n),e.toString()}async function w(){try{const{getDeviceUrl:a,getFrpUrl:t}=await i(async()=>{const{getDeviceUrl:e,getFrpUrl:r}=await import("./index-DUBhsRZp.js").then(s=>s.a4);return{getDeviceUrl:e,getFrpUrl:r}},__vite__mapDeps([0,1])),o=await t();if(o)try{const e=new URL(o);return e.hostname.includes("itagenten.no")?"app.itagenten.no":e.hostname.replace("api","mediamtx")}catch{console.warn("[VDO.ninja] Failed to construct MediaMTX host from FRP URL")}}catch{}return null}async function f(a,t={}){const o=await u();if(!o)return null;const e=l(),r=new URL(`${e}://${o}/`);a===0?r.searchParams.set("scene",""):r.searchParams.set("scene",a.toString()),r.searchParams.set("room",t.room||d),r.searchParams.set("password",h),r.searchParams.set("cover",""),r.searchParams.set("cleanoutput",""),r.searchParams.set("hideheader",""),r.searchParams.set("nologo",""),r.searchParams.set("quality",(t.quality??2).toString()),t.muted&&r.searchParams.set("muted","");const s=m();return s&&r.searchParams.set("b64css",s),r.toString()}async function p(a=1,t){return f(a,{muted:!1,quality:2,room:t})}async function O(a=1){const t=await p(a);if(!t)return console.warn("[VDO.ninja] Cannot open popup - VDO.ninja not configured"),null;const e=window.open(t,"R58_Program_Output","width=1280,height=720,menubar=no,toolbar=no,location=no,status=no");return e||console.warn("[VDO.ninja] Popup blocked - please allow popups for this site"),e}export{d as V,f as a,P as b,w as c,v as d,l as e,h as f,u as g,O as o};
