import{d as I,r as i,o as F,p as N,I as L,l as z,c as a,e,f as w,g as A,w as E,h as R,t as n,F as H,z as q,A as M,q as b,B as h,R as T,n as P,k as r,_ as $}from"./index-Bbhuntdo.js";const K={class:"calendar-kiosk"},W={class:"calendar-header"},Y={class:"flex items-center gap-4"},j={class:"text-xl text-preke-text-dim mt-1"},O={key:0,class:"calendar-content"},G={key:1,class:"calendar-content"},J={class:"text-center"},Q={class:"text-xl text-preke-text-dim"},X={key:2,class:"calendar-content"},Z={class:"slots-container"},ee=["onClick"],te={class:"slot-time"},oe={key:0,class:"slot-status"},le={key:1,class:"slot-status"},se={class:"text-2xl font-bold mb-1"},ae={class:"status-badge status-badge--booked"},re={key:2,class:"slot-status"},ne={class:"modal-content"},de={key:0,class:"text-center py-12"},ie={key:1},ue={class:"text-lg text-preke-text-dim mb-6"},ce={key:0,class:"p-3 bg-preke-red/10 border border-preke-red/30 rounded-lg text-preke-red text-sm"},pe={class:"flex gap-3 pt-4"},me=["disabled"],be=I({__name:"CalendarView",setup(ve){const u=i(null),C=i(!0),d=i(null),g=i(!1),c=i(null),l=i({customer_name:"",customer_email:"",customer_phone:"",duration:30,recording_type:"podcast"}),v=i(!1),k=i(!1);let x=null;F(async()=>{await f(),x=window.setInterval(f,6e4)}),N(()=>{x&&clearInterval(x)});async function f(){try{const s=await L.wordpress.getCalendarToday();u.value=s,d.value=null}catch(s){d.value=s.message||"Failed to load calendar"}finally{C.value=!1}}const V=z(()=>u.value?new Date(u.value.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"");function D(s){s.available&&(c.value=s,g.value=!0,k.value=!1,l.value={customer_name:"",customer_email:"",customer_phone:"",duration:30,recording_type:"podcast"})}function y(){g.value=!1,c.value=null}async function U(){if(c.value){v.value=!0,d.value=null;try{const s=c.value.start_time,[t,_]=s.split(":").map(Number),p=new Date;p.setHours(t,_,0,0);const m=new Date(p.getTime()+l.value.duration*6e4),o=`${m.getHours().toString().padStart(2,"0")}:${m.getMinutes().toString().padStart(2,"0")}`;await L.wordpress.createWalkInBooking({slot_start:s,slot_end:o,customer_name:l.value.customer_name,customer_email:l.value.customer_email,customer_phone:l.value.customer_phone||void 0,recording_type:l.value.recording_type}),k.value=!0,setTimeout(async()=>{await f(),y()},2e3)}catch(s){d.value=s.message||"Failed to create booking"}finally{v.value=!1}}}return(s,t)=>{var p,m;const _=R("router-link");return r(),a("div",K,[t[22]||(t[22]=e("div",{class:"calendar-bg"},[e("div",{class:"bg-orb bg-orb--1"}),e("div",{class:"bg-orb bg-orb--2"})],-1)),e("header",W,[e("div",Y,[A(_,{to:"/",class:"back-btn"},{default:E(()=>[...t[5]||(t[5]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),_:1}),e("div",null,[t[6]||(t[6]=e("h1",{class:"text-4xl font-bold"},"PREKE STUDIO",-1)),e("p",j,n(V.value),1)])])]),C.value?(r(),a("div",O,[...t[7]||(t[7]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin w-16 h-16 border-4 border-preke-gold border-t-transparent rounded-full mx-auto mb-6"}),e("p",{class:"text-2xl text-preke-text-dim"},"Loading schedule...")],-1)])])):d.value&&!u.value?(r(),a("div",G,[e("div",J,[t[8]||(t[8]=e("svg",{class:"w-24 h-24 text-preke-red mx-auto mb-6",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"})],-1)),t[9]||(t[9]=e("h2",{class:"text-3xl font-bold mb-4"},"Failed to Load Schedule",-1)),e("p",Q,n(d.value),1)])])):u.value?(r(),a("div",X,[e("div",Z,[(r(!0),a(H,null,q(u.value.slots,o=>{var B,S;return r(),a("div",{key:o.start_time,class:P(["slot-card",{"slot-card--available":o.available,"slot-card--booked":o.booking,"slot-card--lunch":o.is_lunch}]),onClick:ge=>D(o)},[e("div",te,n(o.start_time)+" - "+n(o.end_time),1),o.is_lunch?(r(),a("div",oe,[...t[10]||(t[10]=[e("span",{class:"status-badge status-badge--lunch"},"LUNCH BREAK",-1)])])):o.booking?(r(),a("div",le,[e("div",se,n(((B=o.booking.client)==null?void 0:B.name)||((S=o.booking.customer)==null?void 0:S.name)),1),e("span",ae,n(o.booking.service_name||"Recording"),1)])):(r(),a("div",re,[...t[11]||(t[11]=[e("span",{class:"status-badge status-badge--available"},"AVAILABLE",-1),e("button",{class:"book-btn"},"Book Now",-1)])]))],10,ee)}),128))]),t[12]||(t[12]=e("div",{class:"calendar-footer"}," Tap an available slot to book ",-1))])):w("",!0),g.value?(r(),a("div",{key:3,class:"modal-overlay",onClick:M(y,["self"])},[e("div",ne,[k.value?(r(),a("div",de,[...t[13]||(t[13]=[e("svg",{class:"w-24 h-24 text-preke-green mx-auto mb-6",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"})],-1),e("h2",{class:"text-3xl font-bold mb-2"},"Booking Confirmed!",-1),e("p",{class:"text-xl text-preke-text-dim"},"Your session has been booked",-1)])])):(r(),a("div",ie,[t[21]||(t[21]=e("h2",{class:"text-3xl font-bold mb-2"},"Book Studio Time",-1)),e("p",ue,n((p=c.value)==null?void 0:p.start_time)+" - "+n((m=c.value)==null?void 0:m.end_time),1),e("form",{onSubmit:M(U,["prevent"]),class:"space-y-4"},[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-preke-text-dim mb-2"},"Name *",-1)),b(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>l.value.customer_name=o),type:"text",required:"",class:"w-full px-4 py-3 bg-preke-bg-elevated border border-preke-border rounded-lg text-lg text-preke-text-primary focus:outline-none focus:ring-2 focus:ring-preke-gold",placeholder:"Your name"},null,512),[[h,l.value.customer_name]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-preke-text-dim mb-2"},"Email *",-1)),b(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>l.value.customer_email=o),type:"email",required:"",class:"w-full px-4 py-3 bg-preke-bg-elevated border border-preke-border rounded-lg text-lg text-preke-text-primary focus:outline-none focus:ring-2 focus:ring-preke-gold",placeholder:"your@email.com"},null,512),[[h,l.value.customer_email]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-preke-text-dim mb-2"},"Phone (optional)",-1)),b(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>l.value.customer_phone=o),type:"tel",class:"w-full px-4 py-3 bg-preke-bg-elevated border border-preke-border rounded-lg text-lg text-preke-text-primary focus:outline-none focus:ring-2 focus:ring-preke-gold",placeholder:"+47 123 45 678"},null,512),[[h,l.value.customer_phone]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-preke-text-dim mb-2"},"Duration",-1)),b(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>l.value.duration=o),class:"w-full px-4 py-3 bg-preke-bg-elevated border border-preke-border rounded-lg text-lg text-preke-text-primary focus:outline-none focus:ring-2 focus:ring-preke-gold"},[...t[17]||(t[17]=[e("option",{value:30},"30 minutes",-1),e("option",{value:60},"1 hour",-1),e("option",{value:120},"2 hours",-1)])],512),[[T,l.value.duration,void 0,{number:!0}]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-preke-text-dim mb-2"},"Recording Type",-1)),b(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>l.value.recording_type=o),class:"w-full px-4 py-3 bg-preke-bg-elevated border border-preke-border rounded-lg text-lg text-preke-text-primary focus:outline-none focus:ring-2 focus:ring-preke-gold"},[...t[19]||(t[19]=[e("option",{value:"podcast"},"Podcast",-1),e("option",{value:"recording"},"Talking Head",-1),e("option",{value:"course"},"Course",-1),e("option",{value:"webinar"},"Webinar",-1)])],512),[[T,l.value.recording_type]])]),d.value?(r(),a("div",ce,n(d.value),1)):w("",!0),e("div",pe,[e("button",{type:"button",onClick:y,class:"flex-1 px-6 py-3 bg-preke-bg-elevated border border-preke-border rounded-lg text-lg font-medium hover:bg-preke-bg-base transition-colors"}," Cancel "),e("button",{type:"submit",disabled:v.value,class:"flex-1 px-6 py-3 bg-preke-gold text-preke-bg-base rounded-lg text-lg font-bold hover:bg-preke-gold-hover disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},n(v.value?"Booking...":"Confirm Booking"),9,me)])],32)]))])])):w("",!0)])}}}),xe=$(be,[["__scopeId","data-v-0e7d9e83"]]);export{xe as default};
