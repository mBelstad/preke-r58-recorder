import{d as w,r as i,c as s,e,f as p,w as f,A as y,Z as h,R as _,x as j,t as x,a as C,a3 as V,b as N,i as n}from"./index-DUBhsRZp.js";const D={class:"min-h-screen bg-preke-bg-base flex items-center justify-center p-4"},M={key:0,class:"card max-w-md w-full"},B={class:"space-y-4"},O=["disabled"],S={class:"flex items-center gap-2"},U=["disabled"],A={key:0,class:"flex items-center justify-center gap-2"},E={key:1},R={key:0,class:"text-red-400 text-sm text-center"},T={key:1,class:"w-full h-full flex flex-col"},F={class:"bg-preke-bg-elevated border-b border-preke-bg-surface p-4 flex items-center justify-between"},L={class:"flex items-center gap-3"},Y={class:"font-medium"},G={class:"flex items-center gap-2"},I={key:0,class:"flex-1 bg-black"},J=["src"],K={key:1,class:"flex-1 flex items-center justify-center"},P={class:"text-center"},q=w({__name:"GuestView",setup(H){const o=i(""),r=i(!1),c=i(!1),l=i(null),u=i(null),g=i(null),d=i(!0);async function v(){if(o.value.trim()){r.value=!0,u.value=null;try{const a=await V(N("/api/v1/vdoninja/url"),{profile:"guestInvite",guest_name:o.value.trim()});a.url?(l.value=a.url,c.value=!0,d.value||window.open(a.url,"_blank")):u.value="Failed to get VDO.ninja URL"}catch(a){console.error("Failed to join as guest:",a),u.value=a instanceof Error?a.message:"Failed to connect"}finally{r.value=!1}}}function k(){c.value=!1,l.value=null,o.value=""}function b(){l.value&&window.open(l.value,"_blank")}return(a,t)=>(n(),s("div",D,[c.value?(n(),s("div",T,[e("div",F,[e("div",L,[t[6]||(t[6]=e("div",{class:"w-3 h-3 rounded-full bg-green-500 animate-pulse"},null,-1)),e("span",Y,"Connected as "+x(o.value),1)]),e("div",G,[d.value&&l.value?(n(),s("button",{key:0,onClick:b,class:"btn btn-sm btn-secondary",title:"Open in new tab"},[...t[7]||(t[7]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1),e("span",{class:"ml-1"},"New Tab",-1)])])):p("",!0),e("button",{onClick:k,class:"btn btn-sm btn-danger"}," Disconnect ")])]),d.value&&l.value?(n(),s("div",I,[e("iframe",{ref_key:"iframeRef",ref:g,src:l.value,class:"w-full h-full border-0",allow:"camera; microphone; display-capture; autoplay; clipboard-write",allowfullscreen:""},null,8,J)])):(n(),s("div",K,[e("div",P,[t[8]||(t[8]=C('<div class="w-20 h-20 rounded-full bg-preke-green/20 flex items-center justify-center mx-auto mb-6"><svg class="w-10 h-10 text-preke-green" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div><h2 class="text-2xl font-semibold mb-2">You&#39;re Connected!</h2><p class="text-preke-text-dim mb-6"> VDO.ninja opened in a new tab. You can close this page. </p>',3)),l.value?(n(),s("button",{key:0,onClick:b,class:"btn btn-primary"}," Open VDO.ninja Again ")):p("",!0)])]))])):(n(),s("div",M,[t[5]||(t[5]=e("div",{class:"text-center mb-8"},[e("h1",{class:"text-2xl font-bold mb-2"},"Join Preke Studio"),e("p",{class:"text-preke-text-dim"},"Enter your name to join as a remote guest")],-1)),e("div",B,[e("div",null,[t[2]||(t[2]=e("label",{class:"block text-sm font-medium mb-2",for:"guest-name"},"Your Name",-1)),f(e("input",{id:"guest-name","onUpdate:modelValue":t[0]||(t[0]=m=>o.value=m),type:"text",placeholder:"Enter your name...",class:"input w-full",disabled:r.value,onKeyup:h(v,["enter"])},null,40,O),[[y,o.value]])]),e("div",S,[f(e("input",{id:"embed-mode","onUpdate:modelValue":t[1]||(t[1]=m=>d.value=m),type:"checkbox",class:"w-4 h-4 rounded border-gray-600 bg-gray-700 text-preke-gold focus:ring-preke-gold"},null,512),[[_,d.value]]),t[3]||(t[3]=e("label",{for:"embed-mode",class:"text-sm text-preke-text-dim"}," Stay on this page (embed video) ",-1))]),e("button",{onClick:v,disabled:!o.value.trim()||r.value,class:"btn btn-primary w-full btn-lg"},[r.value?(n(),s("span",A,[...t[4]||(t[4]=[e("span",{class:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"},null,-1),j(" Connecting... ",-1)])])):(n(),s("span",E,"Join Studio"))],8,U),u.value?(n(),s("p",R,x(u.value),1)):p("",!0)])]))]))}});export{q as default};
