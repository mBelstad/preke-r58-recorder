import{d as C,l as y,a2 as R,r as i,o as T,b as P,c as l,e,f as Q,s as S,i as U,t as n,y as b,k as d,_ as V}from"./index-CJdVQHah.js";const B={class:"qr-view"},L={class:"qr-view__container"},M={class:"qr-view__header"},$={class:"qr-view__title"},N={key:0,class:"qr-view__loading"},D={key:1,class:"qr-view__error"},j={class:"text-xl text-preke-text-dim"},z={key:2,class:"qr-view__content"},F={class:"qr-view__qr-section"},A={class:"qr-view__qr-container"},E=["src"],I={class:"qr-view__instructions"},O={class:"qr-view__links"},H={class:"qr-view__link-card"},J={class:"qr-view__link-url"},W={class:"qr-view__link-card"},G={class:"qr-view__link-url"},K=C({__name:"QRView",setup(X){const _=R(),f=U(),g=y(()=>{const s=_.query.mode;return s==="talking-head"?"teleprompter":s||"podcast"}),p=y(()=>_.query.mode||"podcast"),w=i(null),c=i(!0),r=i(null),u=i(""),o=i(""),a=i(""),m={podcast:"Podcast","talking-head":"Talking Head",course:"Course",webinar:"Webinar"};T(async()=>{await k(),o.value&&q()});async function k(){c.value=!0,r.value=null;try{const s=await fetch(await P("/api/v1/wordpress/qr-session"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({display_mode:g.value})});if(!s.ok)throw new Error("Failed to create QR session");const t=await s.json();w.value=t.token;const v=window.location.origin;o.value=`${v}/#/customer/${t.token}`,a.value=`${v}/#/studio-display/${t.token}`,q()}catch(s){r.value=s.message||"Failed to create session",console.error("QR session creation error:",s)}finally{c.value=!1}}function q(){o.value&&(u.value=`https://api.qrserver.com/v1/create-qr-code/?size=400x400&data=${encodeURIComponent(o.value)}`)}function h(){o.value&&navigator.clipboard.writeText(o.value)}function x(){a.value&&navigator.clipboard.writeText(a.value)}return(s,t)=>(d(),l("div",B,[e("div",L,[e("div",M,[e("button",{onClick:t[0]||(t[0]=v=>S(f).push("/")),class:"qr-view__back-btn"},[...t[1]||(t[1]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),e("span",null,"Back",-1)])]),e("h1",$,n(m[p.value]||"QR Code")+" Mode",1)]),c.value?(d(),l("div",N,[...t[2]||(t[2]=[e("div",{class:"animate-spin w-16 h-16 border-4 border-preke-gold border-t-transparent rounded-full mx-auto mb-6"},null,-1),e("p",{class:"text-xl text-preke-text-dim"},"Creating session...",-1)])])):r.value?(d(),l("div",D,[t[3]||(t[3]=e("svg",{class:"w-24 h-24 text-preke-red mx-auto mb-6",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"})],-1)),t[4]||(t[4]=e("h2",{class:"text-3xl font-bold mb-4"},"Failed to Create Session",-1)),e("p",j,n(r.value),1),e("button",{onClick:k,class:"mt-6 px-6 py-3 bg-preke-gold text-preke-bg-base rounded-lg font-semibold hover:bg-opacity-90 transition"}," Try Again ")])):w.value&&u.value?(d(),l("div",z,[e("div",F,[t[7]||(t[7]=e("h2",{class:"qr-view__section-title"},"Scan with Phone",-1)),t[8]||(t[8]=e("p",{class:"qr-view__section-subtitle"},"Scan this QR code to get controls on your phone",-1)),e("div",A,[e("img",{src:u.value,alt:"QR Code",class:"qr-view__qr-image"},null,8,E)]),e("p",I,[t[5]||(t[5]=b(" The TV will display ",-1)),e("strong",null,n(m[p.value]),1),t[6]||(t[6]=b(" mode automatically ",-1))])]),e("div",O,[e("div",H,[t[9]||(t[9]=e("h3",{class:"qr-view__link-title"},"Customer Portal (Phone)",-1)),e("p",J,n(o.value),1),e("button",{onClick:h,class:"qr-view__copy-btn"}," Copy Link ")]),e("div",W,[t[10]||(t[10]=e("h3",{class:"qr-view__link-title"},"Studio Display (TV)",-1)),e("p",G,n(a.value),1),e("button",{onClick:x,class:"qr-view__copy-btn"}," Copy Link ")])])])):Q("",!0)])]))}}),Z=V(K,[["__scopeId","data-v-94cbe62f"]]);export{Z as default};
