import{r as v,j as z,H as C,d as L,o as J,E as Q,I as fe,p as H,c as i,q as p,t as f,e,f as d,n as w,w as F,A as B,x as X,S as we,i as o,_ as j,F as D,a as Y,l as xe,m as ke,B as R,y as he}from"./index-fZS3l2fQ.js";function K(){const s=v([]),T=v(!1),b=v(null),c=v(null);async function P(){T.value=!0,b.value=null;try{const t=await C.cameras.list();s.value=await Promise.all(t.map(async n=>{try{const l=await C.cameras.getStatus(n);return{name:l.name,type:l.type,connected:l.connected,settings:l.settings}}catch{return{name:n,type:"blackmagic",connected:!1}}}))}catch(t){b.value=t.message||"Failed to load cameras",console.error("[CameraControls] Failed to load cameras:",t)}finally{T.value=!1}}const N=z(()=>t=>s.value.find(n=>n.name===t));function V(t,n){const l=N.value(t);if(!l)return!1;const g=["focus","iris","whiteBalance","gain","iso","shutter","colorCorrection"],E=["focus","exposure","whiteBalance","ptz"];return l.type==="blackmagic"?g.includes(n):l.type==="obsbot_tail2"?E.includes(n):!1}async function I(t,n,l){try{await C.cameras.setFocus(t,n,l),await x(t)}catch(g){throw new Error(g.message||"Failed to set focus")}}async function y(t,n,l){try{await C.cameras.setWhiteBalance(t,n,l),await x(t)}catch(g){throw new Error(g.message||"Failed to set white balance")}}async function M(t,n,l){try{await C.cameras.setExposure(t,n,l),await x(t)}catch(g){throw new Error(g.message||"Failed to set exposure")}}async function Z(t,n){try{await C.cameras.setISO(t,n),await x(t)}catch(l){throw new Error(l.message||"Failed to set ISO")}}async function k(t,n){try{await C.cameras.setShutter(t,n),await x(t)}catch(l){throw new Error(l.message||"Failed to set shutter")}}async function S(t,n,l){try{await C.cameras.setIris(t,n,l),await x(t)}catch(g){throw new Error(g.message||"Failed to set iris")}}async function _(t,n){try{await C.cameras.setGain(t,n),await x(t)}catch(l){throw new Error(l.message||"Failed to set gain")}}async function h(t,n,l,g){try{await C.cameras.setPTZ(t,n,l,g)}catch(E){throw new Error(E.message||"Failed to move PTZ")}}async function $(t,n){try{await C.cameras.recallPTZPreset(t,n)}catch(l){throw new Error(l.message||"Failed to recall preset")}}async function O(t,n){try{await C.cameras.setColorCorrection(t,n),await x(t)}catch(l){throw new Error(l.message||"Failed to set color correction")}}async function x(t){try{const n=await C.cameras.getStatus(t),l=s.value.findIndex(g=>g.name===t);l>=0&&(s.value[l]={name:n.name,type:n.type,connected:n.connected,settings:n.settings})}catch(n){console.error(`[CameraControls] Failed to refresh status for ${t}:`,n)}}return{cameras:s,loading:T,error:b,selectedCamera:c,getCamera:N,supportsFeature:V,loadCameras:P,setFocus:I,setWhiteBalance:y,setExposure:M,setISO:Z,setShutter:k,setIris:S,setGain:_,setPTZ:h,recallPTZPreset:$,setColorCorrection:O,refreshCameraStatus:x}}const Ce={class:"flex items-center justify-between w-full"},Se={class:"text-lg font-semibold text-preke-text"},_e={key:0,class:"text-sm text-preke-text-muted mt-1"},$e={key:0,class:"py-8 text-center text-preke-text-muted"},Fe={key:1,class:"py-8 text-center text-red-400"},Be={key:2,class:"py-8 text-center text-preke-text-muted"},Ne={key:3,class:"camera-controls"},Te={class:"tabs"},Ie={key:0,class:"tab-content"},Me={key:0,class:"control-group"},Ve={class:"control-row"},Ee={key:0,class:"control-slider"},Pe={class:"slider-value"},ze=["disabled"],Ze={key:1,class:"control-group"},Oe={class:"control-row"},Ae={key:0,class:"control-input"},Ue=["disabled"],Ge={key:2,class:"control-group"},Re={class:"control-row"},We={key:0,class:"control-slider"},De={class:"slider-value"},Le=["disabled"],je={key:1,class:"tab-content"},qe={key:0,class:"control-group"},He={class:"control-input"},Ke=["disabled"],Je={key:1,class:"control-group"},Qe={class:"control-input"},Xe=["disabled"],Ye={key:2,class:"control-group"},ea={class:"control-row"},aa={key:0,class:"control-input"},ta=["disabled"],sa={key:3,class:"control-group"},na={class:"control-input"},la=["disabled"],oa={key:2,class:"tab-content"},ia={class:"control-group"},ra={class:"ptz-controls"},ua={class:"ptz-axis"},ca={class:"slider-value"},da={class:"ptz-axis"},ma={class:"slider-value"},va={class:"ptz-axis"},ba={class:"slider-value"},ya={key:3,class:"tab-content"},ga=L({__name:"CameraControlModal",props:{cameraName:{}},emits:["close"],setup(s,{expose:T,emit:b}){const c=s,P=b,N=v(null),{loading:V,error:I,supportsFeature:y,loadCameras:M,getCamera:Z}=K(),k=v("basic"),S=z(()=>c.cameraName?Z.value(c.cameraName):null),_=v("auto"),h=v(.5),$=v("auto"),O=v(5600),x=v("auto"),t=v(.5),n=v(400),l=v(1/60),g=v("auto"),E=v(2.8),W=v(0),A=v(0),U=v(0),G=v(0),u=v(!1);J(async()=>{await M(),c.cameraName&&S.value&&await q()}),Q(()=>c.cameraName,async m=>{m&&S.value&&await q()});async function q(){!c.cameraName||S.value}function ee(){var m;(m=N.value)==null||m.open()}function ae(){var m;(m=N.value)==null||m.close(),P("close")}const{setFocus:te,setWhiteBalance:se,setExposure:ne,setISO:le,setShutter:oe,setIris:ie,setGain:re,setPTZ:ue}=K();async function ce(){if(c.cameraName){u.value=!0;try{await te(c.cameraName,_.value,_.value==="manual"?h.value:void 0)}catch(m){alert(`Failed to set focus: ${m.message}`)}finally{u.value=!1}}}async function de(){if(c.cameraName){u.value=!0;try{await se(c.cameraName,$.value,$.value==="manual"?O.value:void 0)}catch(m){alert(`Failed to set white balance: ${m.message}`)}finally{u.value=!1}}}async function me(){if(c.cameraName){u.value=!0;try{await ne(c.cameraName,x.value,x.value==="manual"?t.value:void 0)}catch(m){alert(`Failed to set exposure: ${m.message}`)}finally{u.value=!1}}}async function ve(){if(c.cameraName){u.value=!0;try{await le(c.cameraName,n.value)}catch(m){alert(`Failed to set ISO: ${m.message}`)}finally{u.value=!1}}}async function be(){if(c.cameraName){u.value=!0;try{await oe(c.cameraName,l.value)}catch(m){alert(`Failed to set shutter: ${m.message}`)}finally{u.value=!1}}}async function ye(){if(c.cameraName){u.value=!0;try{await ie(c.cameraName,g.value,g.value==="manual"?E.value:void 0)}catch(m){alert(`Failed to set iris: ${m.message}`)}finally{u.value=!1}}}async function ge(){if(c.cameraName){u.value=!0;try{await re(c.cameraName,W.value)}catch(m){alert(`Failed to set gain: ${m.message}`)}finally{u.value=!1}}}async function pe(){if(c.cameraName)try{await ue(c.cameraName,A.value,U.value,G.value)}catch(m){alert(`Failed to move PTZ: ${m.message}`)}}return T({open:ee,close:ae}),(m,a)=>(o(),fe(we,{ref_key:"modalRef",ref:N,title:"Camera Controls",size:"xl",onClose:a[22]||(a[22]=r=>P("close"))},{header:H(()=>[e("div",Ce,[e("div",null,[e("h2",Se,f(s.cameraName||"Camera Controls"),1),S.value?(o(),i("p",_e,[X(f(S.value.type==="blackmagic"?"Blackmagic Design":"OBSbot Tail 2")+" ",1),e("span",{class:w([S.value.connected?"text-green-500":"text-red-500","ml-2"])},f(S.value.connected?"● Connected":"○ Disconnected"),3)])):d("",!0)])])]),default:H(()=>[p(V)?(o(),i("div",$e," Loading camera settings... ")):p(I)?(o(),i("div",Fe,f(p(I)),1)):S.value?(o(),i("div",Ne,[e("div",Te,[p(y)(s.cameraName,"focus")||p(y)(s.cameraName,"whiteBalance")||p(y)(s.cameraName,"exposure")?(o(),i("button",{key:0,class:w(["tab",{"tab--active":k.value==="basic"}]),onClick:a[0]||(a[0]=r=>k.value="basic")}," Basic ",2)):d("",!0),p(y)(s.cameraName,"iso")||p(y)(s.cameraName,"shutter")||p(y)(s.cameraName,"iris")||p(y)(s.cameraName,"gain")?(o(),i("button",{key:1,class:w(["tab",{"tab--active":k.value==="advanced"}]),onClick:a[1]||(a[1]=r=>k.value="advanced")}," Advanced ",2)):d("",!0),p(y)(s.cameraName,"ptz")?(o(),i("button",{key:2,class:w(["tab",{"tab--active":k.value==="ptz"}]),onClick:a[2]||(a[2]=r=>k.value="ptz")}," PTZ ",2)):d("",!0),p(y)(s.cameraName,"colorCorrection")?(o(),i("button",{key:3,class:w(["tab",{"tab--active":k.value==="color"}]),onClick:a[3]||(a[3]=r=>k.value="color")}," Color ",2)):d("",!0)]),k.value==="basic"?(o(),i("div",Ie,[p(y)(s.cameraName,"focus")?(o(),i("div",Me,[a[23]||(a[23]=e("label",{class:"control-label"},"Focus",-1)),e("div",Ve,[e("button",{class:w(["mode-btn",{"mode-btn--active":_.value==="auto"}]),onClick:a[4]||(a[4]=r=>_.value="auto")}," Auto ",2),e("button",{class:w(["mode-btn",{"mode-btn--active":_.value==="manual"}]),onClick:a[5]||(a[5]=r=>_.value="manual")}," Manual ",2)]),_.value==="manual"?(o(),i("div",Ee,[F(e("input",{"onUpdate:modelValue":a[6]||(a[6]=r=>h.value=r),type:"range",min:"0",max:"1",step:"0.01",class:"slider"},null,512),[[B,h.value,void 0,{number:!0}]]),e("span",Pe,f(Math.round(h.value*100))+"%",1)])):d("",!0),e("button",{onClick:ce,disabled:u.value,class:"save-btn"},f(u.value?"Saving...":"Save Focus"),9,ze)])):d("",!0),p(y)(s.cameraName,"whiteBalance")?(o(),i("div",Ze,[a[25]||(a[25]=e("label",{class:"control-label"},"White Balance",-1)),e("div",Oe,[e("button",{class:w(["mode-btn",{"mode-btn--active":$.value==="auto"}]),onClick:a[7]||(a[7]=r=>$.value="auto")}," Auto ",2),e("button",{class:w(["mode-btn",{"mode-btn--active":$.value==="manual"}]),onClick:a[8]||(a[8]=r=>$.value="manual")}," Manual ",2)]),$.value==="manual"?(o(),i("div",Ae,[F(e("input",{"onUpdate:modelValue":a[9]||(a[9]=r=>O.value=r),type:"number",min:"2000",max:"10000",step:"100",class:"input"},null,512),[[B,O.value,void 0,{number:!0}]]),a[24]||(a[24]=e("span",{class:"input-unit"},"K",-1))])):d("",!0),e("button",{onClick:de,disabled:u.value,class:"save-btn"},f(u.value?"Saving...":"Save White Balance"),9,Ue)])):d("",!0),p(y)(s.cameraName,"exposure")?(o(),i("div",Ge,[a[26]||(a[26]=e("label",{class:"control-label"},"Exposure",-1)),e("div",Re,[e("button",{class:w(["mode-btn",{"mode-btn--active":x.value==="auto"}]),onClick:a[10]||(a[10]=r=>x.value="auto")}," Auto ",2),e("button",{class:w(["mode-btn",{"mode-btn--active":x.value==="manual"}]),onClick:a[11]||(a[11]=r=>x.value="manual")}," Manual ",2)]),x.value==="manual"?(o(),i("div",We,[F(e("input",{"onUpdate:modelValue":a[12]||(a[12]=r=>t.value=r),type:"range",min:"0",max:"1",step:"0.01",class:"slider"},null,512),[[B,t.value,void 0,{number:!0}]]),e("span",De,f(Math.round(t.value*100))+"%",1)])):d("",!0),e("button",{onClick:me,disabled:u.value,class:"save-btn"},f(u.value?"Saving...":"Save Exposure"),9,Le)])):d("",!0)])):d("",!0),k.value==="advanced"?(o(),i("div",je,[p(y)(s.cameraName,"iso")?(o(),i("div",qe,[a[27]||(a[27]=e("label",{class:"control-label"},"ISO",-1)),e("div",He,[F(e("input",{"onUpdate:modelValue":a[13]||(a[13]=r=>n.value=r),type:"number",min:"100",max:"25600",step:"100",class:"input"},null,512),[[B,n.value,void 0,{number:!0}]])]),e("button",{onClick:ve,disabled:u.value,class:"save-btn"},f(u.value?"Saving...":"Save ISO"),9,Ke)])):d("",!0),p(y)(s.cameraName,"shutter")?(o(),i("div",Je,[a[29]||(a[29]=e("label",{class:"control-label"},"Shutter Speed",-1)),e("div",Qe,[F(e("input",{"onUpdate:modelValue":a[14]||(a[14]=r=>l.value=r),type:"number",min:"0.0001",max:"1",step:"0.0001",class:"input"},null,512),[[B,l.value,void 0,{number:!0}]]),a[28]||(a[28]=e("span",{class:"input-unit"},"s",-1))]),e("button",{onClick:be,disabled:u.value,class:"save-btn"},f(u.value?"Saving...":"Save Shutter"),9,Xe)])):d("",!0),p(y)(s.cameraName,"iris")?(o(),i("div",Ye,[a[31]||(a[31]=e("label",{class:"control-label"},"Iris",-1)),e("div",ea,[e("button",{class:w(["mode-btn",{"mode-btn--active":g.value==="auto"}]),onClick:a[15]||(a[15]=r=>g.value="auto")}," Auto ",2),e("button",{class:w(["mode-btn",{"mode-btn--active":g.value==="manual"}]),onClick:a[16]||(a[16]=r=>g.value="manual")}," Manual ",2)]),g.value==="manual"?(o(),i("div",aa,[F(e("input",{"onUpdate:modelValue":a[17]||(a[17]=r=>E.value=r),type:"number",min:"1.4",max:"22",step:"0.1",class:"input"},null,512),[[B,E.value,void 0,{number:!0}]]),a[30]||(a[30]=e("span",{class:"input-unit"},"f/",-1))])):d("",!0),e("button",{onClick:ye,disabled:u.value,class:"save-btn"},f(u.value?"Saving...":"Save Iris"),9,ta)])):d("",!0),p(y)(s.cameraName,"gain")?(o(),i("div",sa,[a[33]||(a[33]=e("label",{class:"control-label"},"Gain",-1)),e("div",na,[F(e("input",{"onUpdate:modelValue":a[18]||(a[18]=r=>W.value=r),type:"number",min:"-12",max:"36",step:"0.1",class:"input"},null,512),[[B,W.value,void 0,{number:!0}]]),a[32]||(a[32]=e("span",{class:"input-unit"},"dB",-1))]),e("button",{onClick:ge,disabled:u.value,class:"save-btn"},f(u.value?"Saving...":"Save Gain"),9,la)])):d("",!0)])):d("",!0),k.value==="ptz"?(o(),i("div",oa,[e("div",ia,[a[37]||(a[37]=e("label",{class:"control-label"},"Pan/Tilt/Zoom",-1)),e("div",ra,[e("div",ua,[a[34]||(a[34]=e("label",null,"Pan",-1)),F(e("input",{"onUpdate:modelValue":a[19]||(a[19]=r=>A.value=r),type:"range",min:"-1",max:"1",step:"0.1",class:"slider"},null,512),[[B,A.value,void 0,{number:!0}]]),e("span",ca,f(A.value.toFixed(1)),1)]),e("div",da,[a[35]||(a[35]=e("label",null,"Tilt",-1)),F(e("input",{"onUpdate:modelValue":a[20]||(a[20]=r=>U.value=r),type:"range",min:"-1",max:"1",step:"0.1",class:"slider"},null,512),[[B,U.value,void 0,{number:!0}]]),e("span",ma,f(U.value.toFixed(1)),1)]),e("div",va,[a[36]||(a[36]=e("label",null,"Zoom",-1)),F(e("input",{"onUpdate:modelValue":a[21]||(a[21]=r=>G.value=r),type:"range",min:"-1",max:"1",step:"0.1",class:"slider"},null,512),[[B,G.value,void 0,{number:!0}]]),e("span",ba,f(G.value.toFixed(1)),1)])]),e("button",{onClick:pe,class:"save-btn"}," Move PTZ ")])])):d("",!0),k.value==="color"?(o(),i("div",ya,[...a[38]||(a[38]=[e("div",{class:"control-group"},[e("p",{class:"text-preke-text-muted text-sm"}," Color correction controls coming soon ")],-1)])])):d("",!0)])):(o(),i("div",Be," Camera not found "))]),_:1},512))}}),Ia=j(ga,[["__scopeId","data-v-5d82bd61"]]),pa={class:"animated-bg"},fa={key:0,class:"animated-bg__hex-grid"},wa={key:3,class:"animated-bg__circuits"},xa=L({__name:"AnimatedBackground",props:{accent:{},showBeams:{type:Boolean},showOrbs:{type:Boolean},showGrid:{type:Boolean},showCircuits:{type:Boolean}},setup(s){return(T,b)=>(o(),i("div",pa,[e("div",{class:w(["animated-bg__gradient",`animated-bg__gradient--${s.accent||"gold"}`])},null,2),s.showGrid!==!1?(o(),i("div",fa)):d("",!0),s.showOrbs!==!1?(o(),i(D,{key:1},[e("div",{class:w(["animated-bg__orb animated-bg__orb--1",`animated-bg__orb--${s.accent||"gold"}`])},null,2),e("div",{class:w(["animated-bg__orb animated-bg__orb--2",`animated-bg__orb--${s.accent||"gold"}`])},null,2),b[0]||(b[0]=e("div",{class:"animated-bg__orb animated-bg__orb--3"},null,-1))],64)):d("",!0),s.showBeams!==!1?(o(),i(D,{key:2},[b[1]||(b[1]=e("div",{class:"animated-bg__scan animated-bg__scan--h"},null,-1)),e("div",{class:w(["animated-bg__scan animated-bg__scan--v",`animated-bg__scan--${s.accent||"gold"}`])},null,2)],64)):d("",!0),s.showCircuits?(o(),i("div",wa,[...b[2]||(b[2]=[Y('<div class="circuit-line circuit-line--1" data-v-00c0a499></div><div class="circuit-line circuit-line--2" data-v-00c0a499></div><div class="circuit-line circuit-line--3" data-v-00c0a499></div><div class="circuit-node circuit-node--1" data-v-00c0a499></div><div class="circuit-node circuit-node--2" data-v-00c0a499></div>',5)])])):d("",!0),e("div",{class:w(["animated-bg__pulse",`animated-bg__pulse--${s.accent||"gold"}`])},null,2)]))}}),ka=j(xa,[["__scopeId","data-v-00c0a499"]]),ha={class:"loading-screen"},Ca={class:"loading-content"},Sa={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.8"},_a={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.8"},$a={class:"loading-text"},Fa={class:"loading-tagline"},Ba={class:"loading-dots"},Na=L({__name:"ModeLoadingScreen",props:{mode:{},minTime:{default:1500},maxTime:{default:8e3},contentReady:{type:Boolean,default:!1},showCancel:{type:Boolean,default:!1}},emits:["ready","cancel"],setup(s,{emit:T}){const b=s,c=T;function P(){c("cancel")}const N=v(!1);let V=null,I=null;function y(){N.value&&b.contentReady&&c("ready")}Q(()=>b.contentReady,_=>{_&&y()});const M=z(()=>b.mode==="recorder"?"#d45a5a":"#7c3aed"),Z=z(()=>b.mode==="recorder"?"Recorder":"Mixer"),k=z(()=>b.mode==="recorder"?"Multi-cam ISO Recording":"Live Switching & Streaming"),S=z(()=>b.mode==="recorder"?"red":"purple");return J(()=>{V=setTimeout(()=>{N.value=!0,y()},b.minTime),I=setTimeout(()=>{c("ready")},b.maxTime)}),xe(()=>{V&&clearTimeout(V),I&&clearTimeout(I)}),(_,h)=>(o(),i("div",ha,[ke(ka,{accent:S.value,"show-beams":!0,"show-pattern":!0},null,8,["accent"]),e("div",Ca,[e("div",{class:"loading-icon",style:R({color:M.value})},[s.mode==="recorder"?(o(),i("svg",Sa,[...h[0]||(h[0]=[e("rect",{x:"2",y:"5",width:"14",height:"12",rx:"2"},null,-1),e("path",{d:"M16 9l4-2v8l-4-2"},null,-1),e("circle",{cx:"6",cy:"8",r:"2",fill:"currentColor",stroke:"none"},null,-1)])])):(o(),i("svg",_a,[...h[1]||(h[1]=[Y('<rect x="2" y="2" width="9" height="6" rx="1" data-v-e506a0ca></rect><rect x="13" y="2" width="9" height="6" rx="1" data-v-e506a0ca></rect><rect x="2" y="10" width="9" height="6" rx="1" data-v-e506a0ca></rect><rect x="13" y="10" width="9" height="6" rx="1" data-v-e506a0ca></rect><circle cx="12" cy="20" r="2" fill="currentColor" data-v-e506a0ca></circle><path d="M9 19.5a4 4 0 0 1 6 0" stroke-linecap="round" data-v-e506a0ca></path>',6)])])),e("div",{class:"loading-icon__glow",style:R({background:M.value})},null,4)],4),e("div",$a,[e("h2",{class:"loading-title",style:R({color:M.value})},f(Z.value),5),e("p",Fa,f(k.value),1)]),e("div",Ba,[(o(),i(D,null,he(3,$=>e("div",{key:$,class:"loading-dot",style:R({backgroundColor:M.value,animationDelay:`${($-1)*.15}s`})},null,4)),64))]),s.showCancel?(o(),i("button",{key:0,onClick:P,class:"loading-cancel"},[...h[2]||(h[2]=[e("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"1.8"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),X(" Go back ",-1)])])):d("",!0)])]))}}),Ma=j(Na,[["__scopeId","data-v-e506a0ca"]]);export{Ia as C,Ma as M,K as u};
