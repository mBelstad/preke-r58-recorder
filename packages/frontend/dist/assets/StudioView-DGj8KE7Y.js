import{d as w,u as x,r as u,o as C,b as p,c as l,a as f,e as a,f as b,n as _,t as g,g as k,h as S,i as r,_ as M}from"./index-D0ydP3Sm.js";const B={class:"studio"},V={class:"studio__content"},A=["disabled"],E={class:"studio__icon studio__icon--recorder"},z={key:0,class:"animate-spin",fill:"none",viewBox:"0 0 24 24"},$={key:1,viewBox:"0 0 24 24",fill:"currentColor"},F=["disabled"],N={class:"studio__icon studio__icon--mixer"},O={key:0,class:"animate-spin",fill:"none",viewBox:"0 0 24 24"},H={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.8"},I={key:0,class:"studio__error"},P=w({__name:"StudioView",setup(R){const m=k(),y=x(),i=u(null),s=u(!1),v=u(null);let d=null;C(async()=>{try{(await fetch(p("/api/mode/idle"),{method:"POST"})).ok&&(console.log("[Studio] Switched to idle mode"),await y.fetchCapabilities())}catch(o){console.warn("[Studio] Failed to switch to idle mode:",o)}});async function h(o){if(s.value)return;d&&d.abort(),d=new AbortController;const e=d,c=e.signal;i.value=o,s.value=!0,v.value=null;try{const t=await fetch(p(`/api/mode/${o}`),{method:"POST",signal:c});if(c.aborted)return;if(!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.detail||`Failed to switch to ${o} mode`)}if(c.aborted)return;m.push(`/${o}`)}catch(t){if(t instanceof Error&&t.name==="AbortError"){console.log("[Studio] Mode switch cancelled by user");return}const n=t instanceof Error?t.message:"Failed to switch mode";v.value=n,S.error(n),console.error("Mode switch error:",t)}finally{d===e&&(s.value=!1,d=null)}}return(o,e)=>(r(),l("div",B,[e[9]||(e[9]=f('<div class="studio__geo" data-v-00579c3f><div class="geo-layer geo-layer--1" data-v-00579c3f><div class="geo-shape geo-shape--1" data-v-00579c3f></div><div class="geo-shape geo-shape--2" data-v-00579c3f></div><div class="geo-shape geo-shape--3" data-v-00579c3f></div><div class="geo-shape geo-shape--4" data-v-00579c3f></div><div class="geo-shape geo-shape--5" data-v-00579c3f></div></div><div class="geo-layer geo-layer--2" data-v-00579c3f><div class="geo-shape geo-shape--6" data-v-00579c3f></div><div class="geo-shape geo-shape--7" data-v-00579c3f></div><div class="geo-shape geo-shape--8" data-v-00579c3f></div><div class="geo-shape geo-shape--9" data-v-00579c3f></div><div class="geo-shape geo-shape--10" data-v-00579c3f></div></div><div class="geo-layer geo-layer--3" data-v-00579c3f><div class="geo-shape geo-shape--11" data-v-00579c3f></div><div class="geo-shape geo-shape--12" data-v-00579c3f></div><div class="geo-shape geo-shape--13" data-v-00579c3f></div><div class="geo-shape geo-shape--14" data-v-00579c3f></div><div class="geo-shape geo-shape--15" data-v-00579c3f></div></div><div class="geo-layer geo-layer--4" data-v-00579c3f><div class="geo-shape geo-shape--16" data-v-00579c3f></div><div class="geo-shape geo-shape--17" data-v-00579c3f></div><div class="geo-shape geo-shape--18" data-v-00579c3f></div><div class="geo-shape geo-shape--19" data-v-00579c3f></div><div class="geo-shape geo-shape--20" data-v-00579c3f></div></div><div class="geo-glimmer geo-glimmer--1" data-v-00579c3f></div><div class="geo-glimmer geo-glimmer--2" data-v-00579c3f></div><div class="geo-glimmer geo-glimmer--3" data-v-00579c3f></div></div>',1)),a("div",V,[a("button",{onClick:e[0]||(e[0]=c=>h("recorder")),disabled:s.value,class:_(["studio__card studio__card--recorder",{"studio__card--selected":i.value==="recorder"}])},[a("div",E,[s.value&&i.value==="recorder"?(r(),l("svg",z,[...e[2]||(e[2]=[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(r(),l("svg",$,[...e[3]||(e[3]=[a("circle",{cx:"12",cy:"12",r:"8"},null,-1)])]))]),e[4]||(e[4]=a("h3",null,"Recorder",-1)),a("p",null,g(s.value&&i.value==="recorder"?"Starting...":"Multi-cam ISO"),1)],10,A),e[8]||(e[8]=a("div",{class:"studio__center"},[a("span",{class:"studio__badge"},"Choose")],-1)),a("button",{onClick:e[1]||(e[1]=c=>h("mixer")),disabled:s.value,class:_(["studio__card studio__card--mixer",{"studio__card--selected":i.value==="mixer"}])},[a("div",N,[s.value&&i.value==="mixer"?(r(),l("svg",O,[...e[5]||(e[5]=[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(r(),l("svg",H,[...e[6]||(e[6]=[f('<rect x="2" y="2" width="9" height="6" rx="1" data-v-00579c3f></rect><rect x="13" y="2" width="9" height="6" rx="1" data-v-00579c3f></rect><rect x="2" y="10" width="9" height="6" rx="1" data-v-00579c3f></rect><rect x="13" y="10" width="9" height="6" rx="1" data-v-00579c3f></rect><circle cx="12" cy="20" r="2" fill="currentColor" data-v-00579c3f></circle><path d="M9 19.5a4 4 0 0 1 6 0" stroke-linecap="round" data-v-00579c3f></path>',6)])]))]),e[7]||(e[7]=a("h3",null,"Mixer",-1)),a("p",null,g(s.value&&i.value==="mixer"?"Starting...":"Live Switching"),1)],10,F)]),v.value?(r(),l("div",I,g(v.value),1)):b("",!0)]))}}),j=M(P,[["__scopeId","data-v-00579c3f"]]);export{j as default};
