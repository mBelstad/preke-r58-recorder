const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DxgRH3SN.js","assets/index-Domh98PJ.css"])))=>i.map(i=>d[i]);
import{d as Z,u as me,a4 as xe,r as _,o as X,b as O,p as ne,c as a,e,s as m,t as c,f as j,F as N,z as B,n as C,y as U,a as ge,k as s,_ as ue,H as ie,q as K,P as le,Q as fe,O as pe,l as G,C as re,a5 as z,m as be,B as se,a6 as ke,g as Y,w as ae,h as _e,K as oe}from"./index-DxgRH3SN.js";import{V as de,g as he}from"./vdoninja-DurVSD6Z.js";const we={class:"grid gap-6 md:grid-cols-2 lg:grid-cols-3"},ye={class:"card"},$e={key:0,class:"text-preke-red"},De={key:1,class:"space-y-3"},Se={class:"flex justify-between items-center"},je={key:0,class:"skeleton w-24 h-5"},Ce={key:1,class:"font-medium"},Ae={class:"flex justify-between items-center"},Pe={key:0,class:"skeleton w-16 h-5"},Re={key:1,class:"capitalize"},Ve={class:"flex justify-between items-center"},Te={key:0,class:"skeleton w-12 h-5"},Me={key:1},Oe={class:"flex justify-between items-center"},Ie={key:0,class:"skeleton w-20 h-5"},Fe={key:1,class:"badge badge-success"},Ne={key:0,class:"flex flex-col gap-2 pt-2 border-t border-preke-border"},Ee={class:"flex flex-col gap-1 text-xs"},Ue=["href"],Be=["href"],We={class:"card"},Le={class:"space-y-3"},He=["href","title"],ze={key:0,class:"text-xs text-preke-text-dim"},Ge={key:0,class:"text-preke-text-dim text-sm"},Ke={class:"card"},Xe={class:"space-y-3"},qe=["disabled"],Je={key:0,class:"inline-block animate-spin mr-1"},Qe={class:"card"},Ye={class:"space-y-4"},Ze={class:"flex items-center justify-between"},et={key:0,class:"skeleton w-20 h-5 rounded-full"},tt={class:"flex gap-2"},st=["disabled"],at={key:0,class:"inline-block animate-spin mr-1"},nt=["disabled"],ot={key:0,class:"inline-block animate-spin mr-1"},it={key:0,class:"text-sm text-preke-red"},lt={class:"card"},rt={class:"space-y-3"},dt={class:"flex justify-between items-center"},ct={key:0,class:"skeleton w-20 h-5 rounded-full"},ut={class:"flex justify-between items-center"},pt={key:0,class:"skeleton w-20 h-5 rounded-full"},vt={class:"flex justify-between items-center"},mt={key:0,class:"skeleton w-20 h-5 rounded-full"},xt={key:1,class:"badge badge-success"},gt={class:"flex justify-between items-center"},ft={key:0,class:"skeleton w-20 h-5 rounded-full"},bt={key:1,class:"badge badge-success"},kt={class:"card md:col-span-2 lg:col-span-3"},_t={class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4"},ht={class:"flex items-center justify-between mb-3"},wt={class:"flex items-center gap-2"},yt={class:"font-medium"},$t={class:"space-y-1 text-sm text-preke-text-dim"},Dt={class:"flex justify-between"},St={class:"text-preke-text"},jt={class:"flex justify-between"},Ct={class:"text-preke-text"},At={class:"flex justify-between"},Pt={class:"text-preke-text font-mono text-xs"},Rt={key:0,class:"col-span-full text-center text-preke-text-dim py-8"},Vt=Z({__name:"DeviceStatus",setup(q){const r=me(),{capabilities:d,loading:k,error:h}=xe(r),x=_(""),g=_(""),y=_([]);X(async()=>{try{x.value=await O("/reveal"),g.value=await O("/reveal/graphics");const b=window.location.origin;y.value=[{label:"Stream Test",url:`${b}/#/stream-test`,description:"MediaMTX stream monitor and URL helpers"},{label:"WordPress Health",url:await O("/api/v1/wordpress/health"),description:"Read-only checks for WordPress integration"},{label:"RTMP Test",url:await O("/static/rtmp_test.html"),description:"RTMP relay test and status checks"},{label:"WHEP to Room Bridge",url:await O("/static/whep-to-room-bridge.html"),description:"Pull WHEP into a VDO.ninja room"},{label:"Camera Bridge",url:await O("/static/camera-bridge.html"),description:"Bridge HDMI cameras into VDO.ninja"},{label:"VDO Guest Bridge",url:await O("/static/vdoninja-guest-bridge.html"),description:"Guest bridge utilities for VDO.ninja"},{label:"MediaMTX Mixer",url:await O("/static/mediamtx_mixer.html"),description:"MediaMTX mixer test page"},{label:"Test Cameras",url:await O("/static/test_cameras.html"),description:"Camera preview test page"},{label:"VDO Manager",url:await O("/static/vdoninja-manager.html"),description:"VDO.ninja manager utilities"}]}catch(b){console.error("Failed to build reveal.js URLs:",b)}});const p=_(!1),u=_(null),A=_(!1),P=_(!1);let R=null;async function $(b){if(!p.value){p.value=!0,u.value=null;try{const n=await fetch(await O(`/api/mode/${b}`),{method:"POST"});if(!n.ok){const M=await n.json().catch(()=>({}));throw new Error(M.detail||`Failed to switch to ${b} mode`)}await r.fetchCapabilities()}catch(n){u.value=n instanceof Error?n.message:"Failed to switch mode",console.error("Mode switch error:",n)}finally{p.value=!1}}}function V(b,n){if(!n)return"bg-preke-text-dim";switch(b){case"streaming":case"recording":return"bg-preke-green";case"preview":return"bg-preke-blue";case"idle":return"bg-preke-text-dim";case"error":return"bg-preke-red";default:return"bg-preke-text-dim"}}function W(b,n){if(!n)return"No Signal";switch(b){case"streaming":return"Streaming";case"recording":return"Recording";case"preview":return"Preview";case"idle":return"Idle";case"error":return"Error";default:return b}}async function ee(){if(!A.value){A.value=!0;try{if("serviceWorker"in navigator){const b=await navigator.serviceWorker.getRegistrations();for(const n of b)n.active&&n.active.postMessage({type:"SKIP_WAITING"}),await n.unregister(),console.log("[PWA] Unregistered service worker:",n.scope);console.log("[PWA] Unregistered service workers:",b.length)}if("caches"in window){const b=await caches.keys();for(const n of b)await caches.delete(n),console.log("[PWA] Deleted cache:",n);console.log("[PWA] Cleared all caches:",b)}try{const b=[];for(let n=0;n<localStorage.length;n++){const M=localStorage.key(n);M&&(M.startsWith("workbox-")||M.startsWith("sw-")||M.startsWith("vite-pwa-")||M.includes("cache"))&&b.push(M)}b.forEach(n=>localStorage.removeItem(n)),console.log("[PWA] Cleared localStorage keys:",b)}catch(b){console.warn("[PWA] Failed to clear localStorage:",b)}try{sessionStorage.clear(),console.log("[PWA] Cleared sessionStorage")}catch(b){console.warn("[PWA] Failed to clear sessionStorage:",b)}setTimeout(()=>{window.location.href=window.location.href.split("?")[0]+"?nocache="+Date.now()},1e3),P.value=!1}catch(b){console.error("[PWA] Failed to clear cache:",b),A.value=!1,alert(`Failed to clear PWA cache. Please try manually:

1. Open DevTools (F12)
2. Application tab
3. Clear Storage > Clear site data
4. Hard refresh (Ctrl+Shift+R or Cmd+Shift+R)`)}}}async function L(){if(!(P.value||A.value)){P.value=!0;try{const b=await fetch(await O("/api/admin/clear-cache"),{method:"POST"});if(!b.ok){const n=await b.json().catch(()=>({}));throw new Error(n.detail||"Failed to clear server cache")}await ee()}catch(b){console.error("[Cache] Failed to clear all caches:",b),P.value=!1,alert("Failed to clear server cache. Please try again.")}}}return X(()=>{r.fetchCapabilities(),R=setInterval(()=>{r.fetchCapabilities()},1e4)}),ne(()=>{R&&clearInterval(R)}),(b,n)=>{var M,J,H,Q,i,o,v,l,t,f,T,D,I,E,F,te;return s(),a("div",we,[e("div",ye,[n[7]||(n[7]=e("h3",{class:"text-sm font-semibold text-preke-text-dim uppercase tracking-wide mb-4"},"Device Info",-1)),m(h)&&!m(d)?(s(),a("div",$e,c(m(h)),1)):(s(),a("div",De,[e("div",Se,[n[2]||(n[2]=e("span",{class:"text-preke-text-dim"},"Device Name",-1)),m(k)&&!m(d)?(s(),a("div",je)):(s(),a("span",Ce,c(((M=m(d))==null?void 0:M.device_name)||"R58 Device"),1))]),e("div",Ae,[n[3]||(n[3]=e("span",{class:"text-preke-text-dim"},"Platform",-1)),m(k)&&!m(d)?(s(),a("div",Pe)):(s(),a("span",Re,c(((J=m(d))==null?void 0:J.platform)||"-"),1))]),e("div",Ve,[n[4]||(n[4]=e("span",{class:"text-preke-text-dim"},"API Version",-1)),m(k)&&!m(d)?(s(),a("div",Te)):(s(),a("span",Me,c(((H=m(d))==null?void 0:H.api_version)||"-"),1))]),e("div",Oe,[n[5]||(n[5]=e("span",{class:"text-preke-text-dim"},"GStreamer",-1)),m(k)&&!m(d)?(s(),a("div",Ie)):(s(),a("span",Fe,"Initialized"))]),(i=(Q=m(d))==null?void 0:Q.reveal_js)!=null&&i.available?(s(),a("div",Ne,[n[6]||(n[6]=e("div",{class:"flex justify-between items-center"},[e("span",{class:"text-preke-text-dim text-xs"},"Reveal.js"),e("span",{class:"badge badge-success text-xs"},"Available")],-1)),e("div",Ee,[x.value?(s(),a("a",{key:0,href:x.value,target:"_blank",class:"text-preke-blue hover:text-preke-gold transition-colors truncate",title:"Open Reveal.js Demo"}," Demo Presentation ",8,Ue)):j("",!0),g.value?(s(),a("a",{key:1,href:g.value,target:"_blank",class:"text-preke-blue hover:text-preke-gold transition-colors truncate",title:"Open Reveal.js Graphics"}," Graphics Presentation ",8,Be)):j("",!0)])])):j("",!0)]))]),e("div",We,[n[8]||(n[8]=e("h3",{class:"text-sm font-semibold text-preke-text-dim uppercase tracking-wide mb-4"},"Test Tools",-1)),e("div",Le,[(s(!0),a(N,null,B(y.value,w=>(s(),a("div",{key:w.label,class:"flex flex-col gap-1"},[e("a",{href:w.url,target:"_blank",class:"text-preke-blue hover:text-preke-gold transition-colors truncate",title:w.label},c(w.label),9,He),w.description?(s(),a("span",ze,c(w.description),1)):j("",!0)]))),128)),y.value.length===0?(s(),a("div",Ge," Test tools not available. ")):j("",!0)])]),e("div",Ke,[n[11]||(n[11]=e("h3",{class:"text-sm font-semibold text-preke-text-dim uppercase tracking-wide mb-4"},"PWA Cache",-1)),e("div",Xe,[n[9]||(n[9]=e("p",{class:"text-xs text-preke-text-dim"}," Clear service worker cache and reload to see latest changes in web app. ",-1)),e("button",{onClick:L,disabled:P.value||A.value,class:C(["btn btn-sm w-full",P.value||A.value?"btn-secondary":"btn-warning"])},[P.value||A.value?(s(),a("span",Je,"⟳")):j("",!0),U(" "+c(P.value||A.value?"Clearing...":"Clear All Caches & Reload"),1)],10,qe),n[10]||(n[10]=e("p",{class:"text-xs text-preke-text-dim"}," This will clear server caches, unregister service workers, clear browser caches, and reload the page. ",-1))])]),e("div",Qe,[n[15]||(n[15]=e("h3",{class:"text-sm font-semibold text-preke-text-dim uppercase tracking-wide mb-4"},"Operating Mode",-1)),e("div",Ye,[e("div",Ze,[n[12]||(n[12]=e("span",{class:"text-preke-text-dim"},"Current Mode",-1)),m(k)&&!m(d)?(s(),a("div",et)):(s(),a("span",{key:1,class:C(["badge",((o=m(d))==null?void 0:o.current_mode)==="mixer"?"badge-info":"badge-success"])},c(((v=m(d))==null?void 0:v.current_mode)==="mixer"?"Mixer":"Recorder"),3))]),e("div",tt,[e("button",{class:C(["btn btn-sm flex-1",((l=m(d))==null?void 0:l.current_mode)==="recorder"?"btn-primary":"btn-secondary"]),disabled:p.value||((t=m(d))==null?void 0:t.current_mode)==="recorder"||m(k)&&!m(d),onClick:n[0]||(n[0]=w=>$("recorder"))},[p.value&&((f=m(d))==null?void 0:f.current_mode)!=="recorder"?(s(),a("span",at,"⟳")):j("",!0),n[13]||(n[13]=U(" Recorder ",-1))],10,st),e("button",{class:C(["btn btn-sm flex-1",((T=m(d))==null?void 0:T.current_mode)==="mixer"?"btn-primary":"btn-secondary"]),disabled:p.value||((D=m(d))==null?void 0:D.current_mode)==="mixer"||m(k)&&!m(d),onClick:n[1]||(n[1]=w=>$("mixer"))},[p.value&&((I=m(d))==null?void 0:I.current_mode)!=="mixer"?(s(),a("span",ot,"⟳")):j("",!0),n[14]||(n[14]=U(" Mixer ",-1))],10,nt)]),u.value?(s(),a("div",it,c(u.value),1)):j("",!0)])]),e("div",lt,[n[20]||(n[20]=e("h3",{class:"text-sm font-semibold text-preke-text-dim uppercase tracking-wide mb-4"},"Available Features",-1)),e("div",rt,[e("div",dt,[n[16]||(n[16]=e("div",null,[e("span",null,"Mixer"),e("span",{class:"text-xs text-preke-text-dim ml-1"},"(VDO.ninja)")],-1)),m(k)&&!m(d)?(s(),a("div",ct)):(s(),a("span",{key:1,class:C(["badge",m(r).mixerEnabled?"badge-success":"badge-warning"])},c(m(r).mixerEnabled?"Available":"Disabled"),3))]),e("div",ut,[n[17]||(n[17]=e("span",null,"Recorder",-1)),m(k)&&!m(d)?(s(),a("div",pt)):(s(),a("span",{key:1,class:C(["badge",m(r).recorderEnabled?"badge-success":"badge-warning"])},c(m(r).recorderEnabled?"Available":"Disabled"),3))]),e("div",vt,[n[18]||(n[18]=e("span",null,"Graphics Overlay",-1)),m(k)&&!m(d)?(s(),a("div",mt)):(s(),a("span",xt,"Available"))]),e("div",gt,[n[19]||(n[19]=e("span",null,"WebRTC Preview",-1)),m(k)&&!m(d)?(s(),a("div",ft)):(s(),a("span",bt,"Available"))])])]),e("div",kt,[n[25]||(n[25]=e("h3",{class:"text-sm font-semibold text-preke-text-dim uppercase tracking-wide mb-4"},"Hardware Inputs",-1)),e("div",_t,[m(k)&&!m(d)?(s(),a(N,{key:0},B(4,w=>e("div",{key:w,class:"p-4 rounded-lg bg-preke-bg-surface border border-preke-border"},[...n[21]||(n[21]=[ge('<div class="flex items-center justify-between mb-3" data-v-134c986d><div class="flex items-center gap-2" data-v-134c986d><div class="skeleton w-2 h-2 rounded-full" data-v-134c986d></div><div class="skeleton w-16 h-5" data-v-134c986d></div></div><div class="skeleton w-16 h-4 rounded-full" data-v-134c986d></div></div><div class="space-y-2" data-v-134c986d><div class="flex justify-between" data-v-134c986d><div class="skeleton w-8 h-4" data-v-134c986d></div><div class="skeleton w-12 h-4" data-v-134c986d></div></div><div class="flex justify-between" data-v-134c986d><div class="skeleton w-16 h-4" data-v-134c986d></div><div class="skeleton w-20 h-4" data-v-134c986d></div></div><div class="flex justify-between" data-v-134c986d><div class="skeleton w-10 h-4" data-v-134c986d></div><div class="skeleton w-14 h-4" data-v-134c986d></div></div></div>',2)])])),64)):(s(),a(N,{key:1},[(s(!0),a(N,null,B(((E=m(d))==null?void 0:E.inputs)||[],w=>{var S;return s(),a("div",{key:w.id,class:C(["p-4 rounded-lg bg-preke-bg-surface border border-preke-border",{"border-preke-green/50":w.has_signal}])},[e("div",ht,[e("div",wt,[e("span",{class:C(["w-2 h-2 rounded-full animate-pulse",V(w.status,w.has_signal)])},null,2),e("span",yt,c(w.label),1)]),e("span",{class:C(["text-xs px-2 py-0.5 rounded-full",{"bg-preke-green/20 text-preke-green":w.has_signal&&(w.status==="streaming"||w.status==="recording"),"bg-preke-blue/20 text-preke-blue":w.has_signal&&w.status==="preview","bg-preke-bg-surface text-preke-text-dim":!w.has_signal||w.status==="idle"}])},c(W(w.status,w.has_signal)),3)]),e("div",$t,[e("div",Dt,[n[22]||(n[22]=e("span",null,"Type",-1)),e("span",St,c(w.type.toUpperCase()),1)]),e("div",jt,[n[23]||(n[23]=e("span",null,"Resolution",-1)),e("span",Ct,c(w.max_resolution||"N/A"),1)]),e("div",At,[n[24]||(n[24]=e("span",null,"Device",-1)),e("span",Pt,c(((S=w.device_path)==null?void 0:S.split("/").pop())||"N/A"),1)])])],2)}),128)),(te=(F=m(d))==null?void 0:F.inputs)!=null&&te.length?j("",!0):(s(),a("div",Rt," No inputs detected "))],64))])])])}}}),Tt=ue(Vt,[["__scopeId","data-v-134c986d"]]),Mt={class:"space-y-4"},Ot={class:"flex items-center gap-4 flex-wrap"},It=["value"],Ft={class:"flex items-center gap-2 cursor-pointer"},Nt=["disabled"],Et={key:0},Ut={key:1},Bt={class:"bg-preke-bg-base rounded-lg p-4 font-mono text-sm text-preke-text-dim h-[500px] overflow-auto whitespace-pre-wrap"},Wt=Z({__name:"LogViewer",props:{service:{}},setup(q){const r=q,d=_(""),k=_(!1),h=_(r.service||"preke-recorder"),x=_(100),g=_(!1),y=[{id:"preke-recorder",label:"Preke Recorder"},{id:"mediamtx",label:"MediaMTX"}];let p=null;async function u(){k.value=!0;try{const $=await(await fetch(await O(`/api/system/logs?service=${h.value}&lines=${x.value}`))).json();d.value=$.logs||"No logs available"}catch(R){d.value=`Error fetching logs: ${R}`}finally{k.value=!1}}function A(){p&&clearInterval(p),p=window.setInterval(u,5e3)}function P(){p&&(clearInterval(p),p=null)}return ie(g,R=>{R?A():P()}),ie([h,x],()=>{u()}),X(()=>{u()}),ne(()=>{P()}),(R,$)=>(s(),a("div",Mt,[e("div",Ot,[K(e("select",{"onUpdate:modelValue":$[0]||($[0]=V=>h.value=V),class:"input"},[(s(),a(N,null,B(y,V=>e("option",{key:V.id,value:V.id},c(V.label),9,It)),64))],512),[[le,h.value]]),K(e("select",{"onUpdate:modelValue":$[1]||($[1]=V=>x.value=V),class:"input"},[...$[3]||($[3]=[e("option",{value:50},"50 lines",-1),e("option",{value:100},"100 lines",-1),e("option",{value:250},"250 lines",-1),e("option",{value:500},"500 lines",-1)])],512),[[le,x.value]]),e("label",Ft,[K(e("input",{type:"checkbox","onUpdate:modelValue":$[2]||($[2]=V=>g.value=V),class:"w-4 h-4 rounded"},null,512),[[fe,g.value]]),$[4]||($[4]=e("span",{class:"text-sm"},"Auto-refresh",-1))]),e("button",{onClick:u,disabled:k.value,class:"btn"},[k.value?(s(),a("span",Et,"Loading...")):(s(),a("span",Ut,"Refresh"))],8,Nt)]),e("pre",Bt,c(d.value||"No logs available"),1)]))}}),Lt={class:"space-y-6"},Ht={class:"flex items-center justify-between"},zt=["disabled"],Gt={key:0},Kt={key:1},Xt={key:0,class:"flex items-center justify-center py-12"},qt={key:1,class:"text-center py-12 text-preke-text-dim"},Jt={key:2,class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},Qt=["onClick"],Yt={class:"flex items-start justify-between mb-4"},Zt={class:"font-semibold"},es={class:"text-sm text-preke-text-dim"},ts={class:"space-y-2 text-sm"},ss={class:"flex justify-between"},as={class:"font-mono"},ns={class:"flex justify-between"},os=Z({__name:"FleetOverview",setup(q){const r=_([]),d=_(!0),k=_(!1);async function h(){d.value=!0;try{const y=await fetch("/api/v1/lan-devices");if(y.ok){const p=await y.json();r.value=p.map(u=>({id:u.id,name:u.name,ip:u.ip,status:u.status,lastSeen:u.last_seen,version:u.api_version||"unknown"}))}}catch(y){console.error("Failed to fetch LAN devices:",y)}finally{d.value=!1}}X(h);async function x(){k.value=!0;try{const y=await fetch("/api/v1/lan-devices/scan",{method:"POST"});if(y.ok){const p=await y.json();for(const u of p)r.value.find(P=>P.id===u.id)||r.value.push({id:u.id,name:u.name,ip:u.ip,status:u.status,lastSeen:u.last_seen,version:u.api_version||"unknown"})}}catch(y){console.error("LAN network scan failed:",y)}finally{k.value=!1}}async function g(y){try{const u=await(await fetch(`/api/v1/lan-devices/${y.id}/connect`,{method:"POST"})).json();u.connected?window.open(`http://${y.ip}:8000`,"_blank"):alert(`Failed to connect: ${u.error||"Unknown error"}`)}catch(p){console.error("Failed to connect to device:",p)}}return(y,p)=>(s(),a("div",Lt,[e("div",Ht,[p[0]||(p[0]=e("h2",{class:"text-lg font-semibold"},"LAN Devices",-1)),e("button",{onClick:x,disabled:k.value,class:"btn"},[k.value?(s(),a("span",Gt,"Scanning...")):(s(),a("span",Kt,"Scan Network"))],8,zt)]),d.value?(s(),a("div",Xt,[...p[1]||(p[1]=[e("div",{class:"animate-spin w-8 h-8 border-2 border-preke-gold border-t-transparent rounded-full"},null,-1)])])):r.value.length===0?(s(),a("div",qt,[...p[2]||(p[2]=[e("p",null,"No devices found",-1),e("p",{class:"text-sm mt-2"},'Click "Scan Network" to discover R58 devices',-1)])])):(s(),a("div",Jt,[(s(!0),a(N,null,B(r.value,u=>(s(),a("div",{key:u.id,class:"card hover:border-preke-gold/50 transition-colors cursor-pointer",onClick:A=>g(u)},[e("div",Yt,[e("div",null,[e("h3",Zt,c(u.name),1),e("p",es,c(u.id),1)]),e("span",{class:C(["badge",{"badge-success":u.status==="online","badge-danger":u.status==="offline","badge-warning":u.status==="unknown"}])},c(u.status),3)]),e("div",ts,[e("div",ss,[p[3]||(p[3]=e("span",{class:"text-preke-text-dim"},"IP Address",-1)),e("span",as,c(u.ip),1)]),e("div",ns,[p[4]||(p[4]=e("span",{class:"text-preke-text-dim"},"Version",-1)),e("span",null,c(u.version),1)])])],8,Qt))),128))]))]))}}),is={class:"space-y-6"},ls={key:0,class:"flex items-center justify-center py-12"},rs={key:1,class:"glass-card p-4 bg-preke-red/10 border border-preke-red/30 rounded-xl"},ds={class:"text-preke-red"},cs={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-4"},us={class:"glass-card p-4 rounded-xl"},ps={key:0,class:"space-y-3"},vs={class:"relative w-full h-3 bg-preke-bg rounded-full overflow-hidden"},ms={class:"flex justify-between text-sm"},xs={class:"font-mono text-preke-text"},gs={key:1,class:"flex items-center justify-center py-4"},fs={class:"glass-card p-4 rounded-xl"},bs={key:0,class:"space-y-3"},ks={class:"relative w-full h-3 bg-preke-bg rounded-full overflow-hidden"},_s={class:"flex justify-between text-sm"},hs={class:"text-preke-text"},ws={key:1,class:"flex items-center justify-center py-4"},ys={class:"glass-card p-4 rounded-xl"},$s={class:"flex items-center justify-center py-2"},Ds={key:1,class:"text-preke-text-muted"},Ss={key:0,class:"text-center text-xs text-preke-text-muted"},js={class:"glass-card p-4 rounded-xl"},Cs={class:"flex items-center justify-center py-2"},As={key:0,class:"text-3xl font-bold text-preke-gold"},Ps={key:1,class:"text-preke-text-muted"},Rs={class:"text-center text-xs text-preke-text-muted"},Vs={class:"glass-card p-4 rounded-xl"},Ts={class:"flex items-center justify-between mb-4"},Ms={class:"flex items-center gap-3"},Os={class:"flex gap-2"},Is=["disabled"],Fs={key:0,class:"animate-spin inline-block w-3 h-3 border border-current border-t-transparent rounded-full mr-1"},Ns=["disabled"],Es={key:0,class:"animate-spin inline-block w-3 h-3 border border-current border-t-transparent rounded-full mr-1"},Us=["disabled"],Bs={class:"p-3 rounded-lg bg-preke-surface border border-preke-surface-border"},Ws={class:"flex items-center justify-between"},Ls={class:"flex items-center gap-3"},Hs={class:"text-xs text-preke-text-muted"},zs={class:"text-right"},Gs={key:0,class:"text-sm text-preke-text"},Ks={class:"glass-card p-4 rounded-xl"},Xs={class:"flex items-center justify-between mb-4"},qs={class:"flex gap-2"},Js={class:"grid gap-3 sm:grid-cols-3"},Qs={class:"flex items-center gap-3"},Ys={class:"font-medium text-preke-text"},Zs={class:"text-xs text-preke-text-muted"},ea={key:0},ta=["onClick"],sa={key:1,class:"text-xs text-preke-text-muted"},aa={class:"glass-card p-4 rounded-xl"},na={class:"text-xs font-semibold text-preke-text-muted uppercase tracking-wide mb-4"},oa={class:"ml-2 text-preke-gold"},ia={key:0,class:"text-center py-8 text-preke-text-muted"},la={key:1,class:"space-y-2"},ra={class:"flex items-center gap-4"},da={class:"font-mono text-sm text-preke-text"},ca={class:"text-xs text-preke-text-muted"},ua={key:0},pa={class:"flex items-center gap-3"},va=["onClick"],ma=Z({__name:"SystemMonitor",setup(q){const r=pe(),d=_(!0),k=_(null),h=_(null),x=_(null),g=_({active:!1,state:"unknown",subState:"unknown",chromiumTabs:0,loading:!1}),y=G(()=>{var v,l,t;const i=((t=(l=(v=h.value)==null?void 0:v.info)==null?void 0:l.load_average)==null?void 0:t[0])??0;return Math.min(100,i/8*100)}),p=G(()=>{var o,v;const i=(v=(o=h.value)==null?void 0:o.info)==null?void 0:v.memory_percent;return i!==void 0?i:0}),u=G(()=>{var v,l;const i=((l=(v=h.value)==null?void 0:v.info)==null?void 0:l.temperatures)??[];return i.length===0?null:i.find(t=>{var f;return(f=t.type)==null?void 0:f.toLowerCase().includes("cpu")})??i[0]}),A=G(()=>{var t,f;const i=((f=(t=h.value)==null?void 0:t.info)==null?void 0:f.uptime_seconds)??0,o=Math.floor(i/86400),v=Math.floor(i%86400/3600),l=Math.floor(i%3600/60);return o>0?`${o}d ${v}h`:v>0?`${v}h ${l}m`:`${l}m`}),P=G(()=>{var i;return((i=h.value)==null?void 0:i.services)??[]}),R=G(()=>{var i;return((i=h.value)==null?void 0:i.pipelines)??[]});async function $(){try{const{buildApiUrl:i}=await z(async()=>{const{buildApiUrl:E}=await import("./index-DxgRH3SN.js").then(F=>F.ad);return{buildApiUrl:E}},__vite__mapDeps([0,1])),[o,v,l,t]=await Promise.all([fetch(await i("/health")),fetch(await i("/api/ingest/status")),fetch(await i("/api/system/info")),fetch(await i("/api/services/vdoninja-bridge/status"))]),f=o.ok?await o.json():{status:"unknown"},T=v.ok?await v.json():{cameras:{}},D=l.ok?await l.json():null,I=t.ok?await t.json():null;I&&(g.value={active:I.active,state:I.state,subState:I.subState,chromiumTabs:I.chromiumTabs,loading:!1}),h.value={info:{hostname:(D==null?void 0:D.hostname)||"R58 Device",platform:f.platform||"R58",gstreamer:f.gstreamer,load_average:(D==null?void 0:D.load_average)||[0,0,0],memory_percent:(D==null?void 0:D.memory_percent)||0,memory_total_mb:(D==null?void 0:D.memory_total_mb)||0,memory_used_mb:(D==null?void 0:D.memory_used_mb)||0,uptime_seconds:(D==null?void 0:D.uptime_seconds)||0,temperatures:(D==null?void 0:D.temperatures)||[]},services:[{name:"r58-recorder",active:f.status==="healthy",status:f.status},{name:"mediamtx",active:!0,status:"running"},{name:"vdo.ninja",active:!0,status:"running",note:"app.itagenten.no/vdo"}],pipelines:Object.entries(T.cameras||{}).map(([E,F])=>({pipeline_id:E,pipeline_type:"ingest",device:F.device,state:F.status==="streaming"?"running":F.status}))},k.value=null}catch(i){k.value=i.message,console.error("Failed to fetch system status:",i)}finally{d.value=!1}}async function V(){g.value.loading=!0;try{const{buildApiUrl:i}=await z(async()=>{const{buildApiUrl:l}=await import("./index-DxgRH3SN.js").then(t=>t.ad);return{buildApiUrl:l}},__vite__mapDeps([0,1])),v=await(await fetch(await i("/api/services/vdoninja-bridge/start"),{method:"POST"})).json();v.success?(r.success(v.message||"VDO.ninja bridge started"),setTimeout($,3e3)):r.error(v.message||"Failed to start bridge")}catch(i){r.error(`Start failed: ${i.message}`)}finally{g.value.loading=!1}}async function W(){g.value.loading=!0;try{const{buildApiUrl:i}=await z(async()=>{const{buildApiUrl:l}=await import("./index-DxgRH3SN.js").then(t=>t.ad);return{buildApiUrl:l}},__vite__mapDeps([0,1])),v=await(await fetch(await i("/api/services/vdoninja-bridge/stop"),{method:"POST"})).json();v.success?(r.success(v.message||"VDO.ninja bridge stopped"),setTimeout($,2e3)):r.error(v.message||"Failed to stop bridge")}catch(i){r.error(`Stop failed: ${i.message}`)}finally{g.value.loading=!1}}async function ee(){g.value.loading=!0;try{const{buildApiUrl:i}=await z(async()=>{const{buildApiUrl:l}=await import("./index-DxgRH3SN.js").then(t=>t.ad);return{buildApiUrl:l}},__vite__mapDeps([0,1])),v=await(await fetch(await i("/api/services/vdoninja-bridge/restart"),{method:"POST"})).json();v.success?(r.success(v.message||"VDO.ninja bridge restarted"),setTimeout($,3e3)):r.error(v.message||"Failed to restart bridge")}catch(i){r.error(`Restart failed: ${i.message}`)}finally{g.value.loading=!1}}async function L(i){try{const{buildApiUrl:o}=await z(async()=>{const{buildApiUrl:t}=await import("./index-DxgRH3SN.js").then(f=>f.ad);return{buildApiUrl:t}},__vite__mapDeps([0,1])),l=await(await fetch(await o(`/api/system/restart-service/${i}`),{method:"POST"})).json();l.success?(r.success(l.message||`Service ${i} restarted`),setTimeout($,2e3)):r.error(l.message||`Failed to restart ${i}`)}catch(o){r.error(`Restart failed: ${o.message}`)}}async function b(){if(confirm("Are you sure you want to reboot the device? This will interrupt all recordings and streams."))try{const{buildApiUrl:i}=await z(async()=>{const{buildApiUrl:l}=await import("./index-DxgRH3SN.js").then(t=>t.ad);return{buildApiUrl:l}},__vite__mapDeps([0,1])),v=await(await fetch(await i("/api/system/reboot"),{method:"POST"})).json();v.success?r.success("Device is rebooting..."):r.error(v.message||"Failed to reboot device")}catch(i){r.error(`Reboot failed: ${i.message}`)}}async function n(i){try{const{buildApiUrl:o}=await z(async()=>{const{buildApiUrl:t}=await import("./index-DxgRH3SN.js").then(f=>f.ad);return{buildApiUrl:t}},__vite__mapDeps([0,1])),v=await fetch(await o(`/api/ingest/stop/${i}`),{method:"POST"}),l=await v.json();v.ok?(r.success(`Stopped pipeline: ${i}`),await $()):r.error(l.detail||"Stop failed")}catch(o){r.error(`Stop failed: ${o.message}`)}}function M(i){return i.active?"bg-preke-green":"bg-preke-red"}function J(i){switch(i){case"running":return"text-preke-green";case"starting":return"text-preke-gold";case"stopping":return"text-preke-gold";default:return"text-preke-text-muted"}}function H(i){return i>90?"bg-preke-red":i>70?"bg-preke-gold":"bg-preke-green"}function Q(i){return i>80?"text-preke-red":i>65?"text-preke-gold":"text-preke-green"}return X(()=>{$(),x.value=window.setInterval($,1e4)}),ne(()=>{x.value&&clearInterval(x.value)}),(i,o)=>{var v,l,t,f,T,D,I,E,F,te,w;return s(),a("div",is,[d.value?(s(),a("div",ls,[...o[1]||(o[1]=[e("div",{class:"animate-spin w-8 h-8 border-2 border-preke-gold border-t-transparent rounded-full"},null,-1)])])):k.value?(s(),a("div",rs,[e("p",ds,"Error loading system status: "+c(k.value),1),e("button",{onClick:$,class:"btn-v2 btn-v2--secondary mt-4"},"Retry")])):(s(),a(N,{key:2},[e("div",cs,[e("div",us,[o[4]||(o[4]=e("h3",{class:"text-xs font-semibold text-preke-text-muted uppercase tracking-wide mb-4"},"CPU Load",-1)),(t=(l=(v=h.value)==null?void 0:v.info)==null?void 0:l.load_average)!=null&&t.some(S=>S>0)?(s(),a("div",ps,[e("div",vs,[e("div",{class:C(["absolute left-0 top-0 h-full rounded-full transition-all duration-500",H(y.value)]),style:re({width:`${y.value}%`})},null,6)]),e("div",ms,[o[2]||(o[2]=e("span",{class:"text-preke-text-muted"},"Load Average",-1)),e("span",xs,c((D=(T=(f=h.value)==null?void 0:f.info)==null?void 0:T.load_average)==null?void 0:D.map(S=>S.toFixed(2)).join(" / ")),1)])])):(s(),a("div",gs,[...o[3]||(o[3]=[e("span",{class:"text-preke-text-muted"},"N/A",-1)])]))]),e("div",fs,[o[7]||(o[7]=e("h3",{class:"text-xs font-semibold text-preke-text-muted uppercase tracking-wide mb-4"},"Memory",-1)),p.value>0?(s(),a("div",bs,[e("div",ks,[e("div",{class:C(["absolute left-0 top-0 h-full rounded-full transition-all duration-500",H(p.value)]),style:re({width:`${p.value}%`})},null,6)]),e("div",_s,[o[5]||(o[5]=e("span",{class:"text-preke-text-muted"},"Used",-1)),e("span",hs,c(p.value.toFixed(1))+"%",1)])])):(s(),a("div",ws,[...o[6]||(o[6]=[e("span",{class:"text-preke-text-muted"},"N/A",-1)])]))]),e("div",ys,[o[8]||(o[8]=e("h3",{class:"text-xs font-semibold text-preke-text-muted uppercase tracking-wide mb-4"},"Temperature",-1)),e("div",$s,[u.value?(s(),a("span",{key:0,class:C(["text-3xl font-bold",Q(u.value.temp_celsius)])},c(u.value.temp_celsius.toFixed(1))+"°C ",3)):(s(),a("span",Ds,"N/A"))]),(I=u.value)!=null&&I.type?(s(),a("p",Ss,c(u.value.type),1)):j("",!0)]),e("div",js,[o[9]||(o[9]=e("h3",{class:"text-xs font-semibold text-preke-text-muted uppercase tracking-wide mb-4"},"Uptime",-1)),e("div",Cs,[((F=(E=h.value)==null?void 0:E.info)==null?void 0:F.uptime_seconds)>0?(s(),a("span",As,c(A.value),1)):(s(),a("span",Ps,"N/A"))]),e("p",Rs,c(((w=(te=h.value)==null?void 0:te.info)==null?void 0:w.hostname)||"R58 Device"),1)])]),e("div",Vs,[e("div",Ts,[e("div",Ms,[o[10]||(o[10]=e("h3",{class:"text-xs font-semibold text-preke-text-muted uppercase tracking-wide"},"VDO.ninja Bridge",-1)),e("span",{class:C(["px-2 py-0.5 rounded-full text-xs font-medium",g.value.active?"bg-preke-green/20 text-preke-green":"bg-preke-text-muted/20 text-preke-text-muted"])},c(g.value.active?"Running":"Stopped"),3)]),e("div",Os,[g.value.active?(s(),a("button",{key:1,onClick:W,disabled:g.value.loading,class:"btn-v2 btn-v2--danger text-sm",title:"Stop the VDO.ninja bridge"},[g.value.loading?(s(),a("span",Es)):j("",!0),o[12]||(o[12]=U(" Stop Bridge ",-1))],8,Ns)):(s(),a("button",{key:0,onClick:V,disabled:g.value.loading,class:"btn-v2 btn-v2--primary text-sm",title:"Start the VDO.ninja bridge"},[g.value.loading?(s(),a("span",Fs)):j("",!0),o[11]||(o[11]=U(" Start Bridge ",-1))],8,Is)),e("button",{onClick:ee,disabled:g.value.loading,class:"btn-v2 btn-v2--secondary text-sm",title:"Restart the VDO.ninja bridge"},[...o[13]||(o[13]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])],8,Us)])]),e("div",Bs,[e("div",Ws,[e("div",Ls,[e("span",{class:C(["w-2.5 h-2.5 rounded-full",g.value.active?"bg-preke-green":"bg-preke-text-muted"])},null,2),e("div",null,[o[14]||(o[14]=e("p",{class:"font-medium text-preke-text"},"vdoninja-bridge",-1)),e("p",Hs,c(g.value.state)+c(g.value.subState!==g.value.state?` (${g.value.subState})`:""),1)])]),e("div",zs,[g.value.active&&g.value.chromiumTabs>0?(s(),a("p",Gs,c(g.value.chromiumTabs)+" camera"+c(g.value.chromiumTabs!==1?"s":"")+" streaming ",1)):j("",!0),o[15]||(o[15]=e("p",{class:"text-xs text-preke-text-muted"}," Pushes HDMI cameras to VDO.ninja room ",-1))])])])]),e("div",Ks,[e("div",Xs,[o[16]||(o[16]=e("h3",{class:"text-xs font-semibold text-preke-text-muted uppercase tracking-wide"},"Services",-1)),e("div",qs,[e("button",{onClick:o[0]||(o[0]=S=>L("preke-recorder")),class:"btn-v2 btn-v2--secondary text-sm",title:"Restart the main service"}," Restart Service "),e("button",{onClick:b,class:"btn-v2 btn-v2--danger text-sm",title:"Reboot the device"}," Reboot Device ")])]),e("div",Js,[(s(!0),a(N,null,B(P.value,S=>(s(),a("div",{key:S.name,class:"flex items-center justify-between p-3 rounded-lg bg-preke-surface border border-preke-surface-border"},[e("div",Qs,[e("span",{class:C(["w-2.5 h-2.5 rounded-full",M(S)])},null,2),e("div",null,[e("p",Ys,c(S.name),1),e("p",Zs,[U(c(S.status)+" ",1),S.memory_mb?(s(),a("span",ea," · "+c(S.memory_mb.toFixed(0))+" MB",1)):j("",!0)])])]),S.name!=="vdo.ninja"?(s(),a("button",{key:0,onClick:ve=>L(S.name),class:"text-preke-text-muted hover:text-preke-gold transition-colors",title:"Restart service"},[...o[17]||(o[17]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])],8,ta)):(s(),a("span",sa,"External"))]))),128))])]),e("div",aa,[e("h3",na,[o[18]||(o[18]=U(" Active Pipelines ",-1)),e("span",oa,"("+c(R.value.length)+")",1)]),R.value.length===0?(s(),a("div",ia," No active pipelines ")):(s(),a("div",la,[(s(!0),a(N,null,B(R.value,S=>(s(),a("div",{key:S.pipeline_id,class:"flex items-center justify-between p-3 rounded-lg bg-preke-surface border border-preke-surface-border"},[e("div",ra,[e("div",null,[e("p",da,c(S.pipeline_id),1),e("p",ca,[U(" Type: "+c(S.pipeline_type)+" ",1),S.device?(s(),a("span",ua," · "+c(S.device),1)):j("",!0)])])]),e("div",pa,[e("span",{class:C(["text-sm font-medium capitalize",J(S.state)])},c(S.state),3),S.state==="running"?(s(),a("button",{key:0,onClick:ve=>n(S.pipeline_id),class:"btn-v2 btn-v2--danger text-sm",title:"Stop pipeline"}," Stop ",8,va)):j("",!0)])]))),128))]))])],64))])}}}),xa={class:"space-y-6"},ga={class:"glass-card p-4 rounded-xl"},fa={class:"space-y-4"},ba={key:0,class:"glass-card p-4 rounded-xl"},ka={class:"space-y-2"},_a={class:"flex-1 min-w-0"},ha={class:"flex items-center gap-2"},wa={class:"text-sm font-medium text-preke-text"},ya={key:0,class:"text-xs px-2 py-0.5 rounded bg-preke-gold/20 text-preke-gold"},$a={class:"text-xs text-preke-text-muted truncate mt-1"},Da=["onClick"],Sa={class:"glass-card p-4 rounded-xl"},ja={class:"space-y-4"},Ca=["value"],Aa={key:1,class:"glass-card p-4 rounded-xl"},Pa={class:"space-y-4"},Ra={class:"flex items-center justify-between p-3 rounded-lg bg-preke-surface/50 border border-preke-surface-border"},Va={class:"flex items-center gap-3"},Ta={class:"text-sm font-medium text-preke-text"},Ma={key:0,class:"text-xs text-preke-gold"},Oa=["disabled"],Ia={class:"flex items-center justify-between"},Fa={key:0},Na={class:"text-xs text-preke-text-muted mt-1"},Ea={class:"glass-card p-4 rounded-xl"},Ua={class:"space-y-4"},Ba=["value"],Wa={class:"flex items-center justify-between"},La={key:0},Ha={class:"glass-card p-4 rounded-xl bg-preke-surface/30"},za={class:"space-y-2 text-sm"},Ga={class:"flex justify-between"},Ka={class:"text-preke-text"},ce="preke-settings",Xa=Z({__name:"SettingsPanel",setup(q){const r=pe(),d=_([]),k=_(null),h=_("Preke Device"),x=_(de),g=_(he()),y=_("/opt/r58/recordings"),p=_(!1),u=_(30),A=_(!1),P=_(!1),R=_(null),$=_(!1),V=_("Preke"),W=G(()=>be());function ee(){try{const l=localStorage.getItem(ce);if(l){const t=JSON.parse(l);h.value=t.deviceName||h.value,x.value=t.vdoRoom||x.value,p.value=t.autoCleanup||!1,u.value=t.cleanupDays||30}}catch{}}function L(){try{const l={deviceName:h.value,vdoRoom:x.value,autoCleanup:p.value,cleanupDays:u.value};localStorage.setItem(ce,JSON.stringify(l)),r.success("Settings saved")}catch(l){r.error("Failed to save settings"),console.error("Failed to save settings:",l)}}function b(){h.value="Preke Device",x.value=de,p.value=!1,u.value=30,L(),r.info("Settings reset to defaults")}async function n(){if(window.electronAPI)try{d.value=await window.electronAPI.getDevices();const l=await window.electronAPI.getActiveDevice();k.value=(l==null?void 0:l.id)||null}catch(l){console.error("Failed to load devices:",l)}}async function M(l){if(!(!window.electronAPI||!confirm("Remove this device?")))try{await window.electronAPI.removeDevice(l),await n(),r.success("Device removed")}catch(t){console.error("Failed to remove device:",t),r.error("Failed to remove device")}}async function J(){var l;if((l=window.electronAPI)!=null&&l.davinciCheckResolve){$.value=!0;try{const t=await window.electronAPI.davinciCheckResolve();P.value=t.connected,t.connected?r.success("DaVinci Resolve is connected!"):r.warning("DaVinci Resolve is not running or not accessible")}catch(t){console.error("Failed to check DaVinci:",t),r.error("Failed to check DaVinci Resolve")}finally{$.value=!1}}}async function H(){if(window.electronAPI)try{if(A.value)await window.electronAPI.davinciStop(),A.value=!1,r.info("DaVinci integration stopped");else{if(!(await window.electronAPI.davinciCheckResolve()).connected){r.error("Please start DaVinci Resolve Studio first");return}await window.electronAPI.davinciConfig({projectNamePrefix:V.value}),await window.electronAPI.davinciStart(),A.value=!0,P.value=!0,r.success("DaVinci integration started! Recording sessions will auto-create projects.")}}catch(l){console.error("Failed to toggle DaVinci:",l),r.error("Failed to toggle DaVinci integration")}}async function Q(){var l;if((l=window.electronAPI)!=null&&l.davinciStatus)try{const t=await window.electronAPI.davinciStatus();A.value=t.enabled,P.value=t.resolveConnected,R.value=t.currentSession}catch(t){console.error("Failed to load DaVinci status:",t)}}let i=null,o=null,v=null;return X(()=>{var l,t,f;ee(),n(),Q(),(l=window.electronAPI)!=null&&l.onDavinciSessionStart&&(i=window.electronAPI.onDavinciSessionStart(T=>{R.value=T.sessionId,r.success(`Recording started: ${T.sessionId}`)})),(t=window.electronAPI)!=null&&t.onDavinciSessionStop&&(o=window.electronAPI.onDavinciSessionStop(T=>{R.value=null,r.info(`Recording stopped, ${T.filePaths.length} files imported`)})),(f=window.electronAPI)!=null&&f.onDavinciConnectionChanged&&(v=window.electronAPI.onDavinciConnectionChanged(T=>{P.value=T.connected,!T.connected&&A.value&&r.warning("DaVinci Resolve disconnected")}))}),ne(()=>{i==null||i(),o==null||o(),v==null||v()}),(l,t)=>(s(),a("div",xa,[e("div",ga,[t[7]||(t[7]=e("h3",{class:"text-xs font-semibold text-preke-text-muted uppercase tracking-wide mb-4"},"Device",-1)),e("div",fa,[e("div",null,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-preke-text mb-2"},"Device Name",-1)),K(e("input",{"onUpdate:modelValue":t[0]||(t[0]=f=>h.value=f),type:"text",class:"input w-full",placeholder:"My Preke Device"},null,512),[[se,h.value]]),t[6]||(t[6]=e("p",{class:"text-xs text-preke-text-muted mt-1"},"Display name for this device in the app",-1))])])]),W.value&&d.value.length>0?(s(),a("div",ba,[t[9]||(t[9]=e("h3",{class:"text-xs font-semibold text-preke-text-muted uppercase tracking-wide mb-4"},"Saved Devices",-1)),e("div",ka,[(s(!0),a(N,null,B(d.value,f=>(s(),a("div",{key:f.id,class:C(["flex items-center justify-between p-3 rounded-lg border border-preke-surface-border",{"bg-preke-gold/10 border-preke-gold/30":f.id===k.value}])},[e("div",_a,[e("div",ha,[e("span",wa,c(f.name),1),f.id===k.value?(s(),a("span",ya," Active ")):j("",!0)]),e("p",$a,c(f.url),1)]),e("button",{onClick:T=>M(f.id),class:"ml-3 p-2 rounded-lg text-preke-text-muted hover:text-red-400 hover:bg-red-500/10 transition-colors",title:"Remove device"},[...t[8]||(t[8]=[e("svg",{viewBox:"0 0 20 20",fill:"currentColor",class:"w-4 h-4"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)])],8,Da)],2))),128))])])):j("",!0),e("div",Sa,[t[14]||(t[14]=e("h3",{class:"text-xs font-semibold text-preke-text-muted uppercase tracking-wide mb-4"},"VDO.ninja / Mixer",-1)),e("div",ja,[e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-preke-text mb-2"},"Room Name",-1)),K(e("input",{"onUpdate:modelValue":t[1]||(t[1]=f=>x.value=f),type:"text",class:"input w-full",placeholder:"r58studio"},null,512),[[se,x.value]]),t[11]||(t[11]=e("p",{class:"text-xs text-preke-text-muted mt-1"},"VDO.ninja room for video mixing",-1))]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-preke-text mb-2"},"VDO Host",-1)),e("input",{value:g.value,type:"text",class:"input w-full bg-preke-surface opacity-60",readonly:"",disabled:""},null,8,Ca),t[13]||(t[13]=e("p",{class:"text-xs text-preke-text-muted mt-1"},"VDO.ninja server (read-only)",-1))])])]),W.value?(s(),a("div",Aa,[t[18]||(t[18]=e("h3",{class:"text-xs font-semibold text-preke-text-muted uppercase tracking-wide mb-4"}," DaVinci Resolve Integration ",-1)),e("div",Pa,[e("div",Ra,[e("div",Va,[e("div",{class:C(["w-3 h-3 rounded-full",P.value?"bg-green-500":"bg-zinc-500"])},null,2),e("div",null,[e("p",Ta,c(P.value?"DaVinci Resolve Connected":"DaVinci Resolve Not Connected"),1),R.value?(s(),a("p",Ma," Recording: "+c(R.value),1)):j("",!0)])]),e("button",{onClick:J,disabled:$.value,class:"px-3 py-1.5 text-xs rounded-lg bg-preke-surface hover:bg-preke-surface-elevated border border-preke-surface-border text-preke-text transition-colors disabled:opacity-50"},c($.value?"Checking...":"Check Connection"),9,Oa)]),e("div",Ia,[t[15]||(t[15]=e("div",null,[e("label",{class:"block text-sm font-medium text-preke-text"},"Auto-sync with DaVinci Resolve"),e("p",{class:"text-xs text-preke-text-muted"}," Automatically create projects and import media when recording ")],-1)),e("button",{onClick:H,class:C(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors",A.value?"bg-preke-gold":"bg-preke-surface-elevated"])},[e("span",{class:C(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",A.value?"translate-x-6":"translate-x-1"])},null,2)],2)]),A.value?(s(),a("div",Fa,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-preke-text mb-2"},"Project Name Prefix",-1)),K(e("input",{"onUpdate:modelValue":t[2]||(t[2]=f=>V.value=f),type:"text",class:"input w-full",placeholder:"Preke"},null,512),[[se,V.value]]),e("p",Na," Projects will be named: "+c(V.value)+"_session-id ",1)])):j("",!0),t[17]||(t[17]=e("div",{class:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/20"},[e("p",{class:"text-xs text-blue-300"},[e("strong",null,"How it works:"),U(" When you start a recording on the R58, a new DaVinci project is automatically created. When recording stops, the files are imported into the project's media pool. ")])],-1))])])):j("",!0),e("div",Ea,[t[23]||(t[23]=e("h3",{class:"text-xs font-semibold text-preke-text-muted uppercase tracking-wide mb-4"},"Storage",-1)),e("div",Ua,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-preke-text mb-2"},"Recording Path",-1)),e("input",{value:y.value,type:"text",class:"input w-full bg-preke-surface opacity-60",readonly:"",disabled:""},null,8,Ba),t[20]||(t[20]=e("p",{class:"text-xs text-preke-text-muted mt-1"}," Configured in config.yml on R58 device. Default: /opt/r58/recordings/ ",-1))]),e("div",Wa,[t[21]||(t[21]=e("div",null,[e("label",{class:"block text-sm font-medium text-preke-text"},"Auto-cleanup old recordings"),e("p",{class:"text-xs text-preke-text-muted"},"Automatically delete recordings older than specified days")],-1)),e("button",{onClick:t[3]||(t[3]=f=>p.value=!p.value),class:C(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors",p.value?"bg-preke-gold":"bg-preke-surface-elevated"])},[e("span",{class:C(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",p.value?"translate-x-6":"translate-x-1"])},null,2)],2)]),p.value?(s(),a("div",La,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-preke-text mb-2"},"Keep recordings for (days)",-1)),K(e("input",{"onUpdate:modelValue":t[4]||(t[4]=f=>u.value=f),type:"number",min:"1",max:"365",class:"input w-24"},null,512),[[se,u.value,void 0,{number:!0}]])])):j("",!0),e("div",{class:"pt-4 border-t border-preke-surface-border"},[e("button",{onClick:b,class:"btn-v2 btn-v2--secondary w-full"}," Reset to Defaults ")])])]),e("div",{class:"flex items-center justify-end"},[e("button",{onClick:L,class:"btn-v2 btn-v2--primary"}," Save Settings ")]),e("div",Ha,[t[26]||(t[26]=e("h3",{class:"text-xs font-semibold text-preke-text-muted uppercase tracking-wide mb-4"},"About",-1)),e("div",za,[t[25]||(t[25]=e("div",{class:"flex justify-between"},[e("span",{class:"text-preke-text-muted"},"App Version"),e("span",{class:"text-preke-text"},"2.0.0")],-1)),e("div",Ga,[t[24]||(t[24]=e("span",{class:"text-preke-text-muted"},"Platform",-1)),e("span",Ka,c(W.value?"Desktop (Electron)":"Web Browser"),1)])])])]))}}),qa={class:"h-full flex flex-col bg-preke-bg"},Ja={class:"px-6 py-4 border-b border-preke-surface-border bg-preke-surface/50 backdrop-blur-sm"},Qa={class:"flex items-center gap-4 mb-4"},Ya={class:"flex gap-1"},Za=["onClick"],en={class:"flex-1 p-6 overflow-y-auto"},tn={key:2,class:"glass-card p-6 rounded-xl"},sn={key:3,class:"glass-card p-6 rounded-xl"},an={key:5,class:"design-panel"},nn={class:"design-links"},on={class:"design-links__group"},ln=Z({__name:"AdminView",setup(q){const r=ke(),d=_("system"),k=[{id:"system",label:"System"},{id:"status",label:"Device Status"},{id:"logs",label:"Logs"},{id:"fleet",label:"Fleet"},{id:"settings",label:"Settings"},{id:"design",label:"Design"}];return X(()=>{const h=r.query.tab;h&&k.some(x=>x.id===h)&&(d.value=h)}),(h,x)=>{const g=_e("router-link");return s(),a("div",qa,[e("header",Ja,[e("div",Qa,[Y(g,{to:"/",class:"btn-v2 btn-v2--ghost"},{default:ae(()=>[...x[0]||(x[0]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),_:1}),x[1]||(x[1]=e("h1",{class:"text-xl font-semibold text-preke-text"},"Admin",-1))]),e("div",Ya,[(s(),a(N,null,B(k,y=>e("button",{key:y.id,onClick:p=>d.value=y.id,class:C(["px-4 py-2 rounded-lg transition-all duration-200 font-medium text-sm",[d.value===y.id?"bg-preke-gold/20 text-preke-gold border border-preke-gold/30":"text-preke-text-muted hover:text-preke-text hover:bg-preke-surface"]])},c(y.label),11,Za)),64))])]),e("div",en,[d.value==="system"?(s(),oe(ma,{key:0})):d.value==="status"?(s(),oe(Tt,{key:1})):d.value==="logs"?(s(),a("div",tn,[x[2]||(x[2]=e("h2",{class:"text-lg font-semibold text-preke-text mb-4"},"System Logs",-1)),Y(Wt)])):d.value==="fleet"?(s(),a("div",sn,[Y(os)])):d.value==="settings"?(s(),oe(Xa,{key:4})):d.value==="design"?(s(),a("div",an,[x[7]||(x[7]=e("h2",{class:"text-lg font-semibold text-preke-text mb-4"},"Design Resources",-1)),x[8]||(x[8]=e("p",{class:"text-preke-text-muted mb-6"},"Access design documentation, proposals, experiments, and style guides.",-1)),e("div",nn,[Y(g,{to:"/design-archive",class:"design-link design-link--primary"},{default:ae(()=>[...x[3]||(x[3]=[e("div",{class:"design-link__icon design-link__icon--gold"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[e("path",{d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})])],-1),e("div",{class:"design-link__content"},[e("h3",null,"Design Archive"),e("p",null,"Browse all designs with thumbnails, search, and filters")],-1),e("svg",{class:"design-link__arrow",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M9 5l7 7-7 7"})],-1)])]),_:1}),e("div",on,[x[6]||(x[6]=e("h4",{class:"design-links__group-title"},"Documentation",-1)),Y(g,{to:"/styleguide-v2",class:"design-link"},{default:ae(()=>[...x[4]||(x[4]=[e("div",{class:"design-link__icon design-link__icon--gold"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[e("path",{d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1),e("div",{class:"design-link__content"},[e("h3",null,"Style Guide V2"),e("p",null,"Current design system")],-1),e("svg",{class:"design-link__arrow",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M9 5l7 7-7 7"})],-1)])]),_:1}),Y(g,{to:"/styleguide",class:"design-link"},{default:ae(()=>[...x[5]||(x[5]=[e("div",{class:"design-link__icon design-link__icon--gold"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[e("path",{d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})])],-1),e("div",{class:"design-link__content"},[e("h3",null,"Style Guide V1"),e("p",null,"Legacy reference")],-1),e("svg",{class:"design-link__arrow",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M9 5l7 7-7 7"})],-1)])]),_:1})])])])):j("",!0)])])}}}),cn=ue(ln,[["__scopeId","data-v-d9763ab0"]]);export{cn as default};
