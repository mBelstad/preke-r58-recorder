const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C0NGvpRf.js","assets/index-BtTpbU_U.css"])))=>i.map(i=>d[i]);
import{J as oe,r as b,e as A,d as T,N as le,f as F,c as o,a as e,t as d,H as S,n as D,s as I,F as R,m as E,o as a,z as K,w as V,O as Y,P as ie,Q as ee,g as re,k as N,l as M,R as Q,i as ce,q as O,S as de,C as U,h as W}from"./index-C0NGvpRf.js";import{V as X,g as ue}from"./vdoninja-D8mLQF_b.js";const pe=oe("capabilities",()=>{const h=b(null),u=b(!1),c=b(null),v=A(()=>{var n;return((n=h.value)==null?void 0:n.mixer_available)??!1}),s=A(()=>{var n;return((n=h.value)==null?void 0:n.recorder_available)??!0}),f=A(()=>{var n;return((n=h.value)==null?void 0:n.vdoninja.enabled)??!1}),m=A(()=>{if(!h.value)return 0;const n=h.value.storage_total_gb-h.value.storage_available_gb;return Math.round(n/h.value.storage_total_gb*100)});async function p(){u.value=!0,c.value=null;try{const n=await fetch("/api/v1/capabilities");if(!n.ok)throw new Error("Failed to fetch capabilities");h.value=await n.json()}catch(n){c.value=n instanceof Error?n.message:"Unknown error",console.error("Failed to fetch capabilities:",n)}finally{u.value=!1}}return{capabilities:h,loading:u,error:c,mixerEnabled:v,recorderEnabled:s,vdoNinjaEnabled:f,storagePercent:m,fetchCapabilities:p}}),ve={class:"grid gap-6 md:grid-cols-2 lg:grid-cols-3"},me={class:"card"},fe={class:"space-y-3"},xe={class:"flex justify-between"},be={class:"font-mono text-sm"},ye={class:"flex justify-between"},ge={class:"capitalize"},_e={class:"flex justify-between"},he={class:"card"},we={class:"space-y-3"},ke={class:"flex justify-between items-center"},$e={class:"flex justify-between items-center"},Se={class:"card"},je={class:"space-y-4"},De={class:"flex justify-between text-sm mb-2"},Ce={class:"w-full h-3 bg-r58-bg-tertiary rounded-full overflow-hidden"},Ae={class:"flex justify-between text-sm"},Pe={class:"flex justify-between text-sm"},Re={class:"card md:col-span-2 lg:col-span-3"},Ne={class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4"},Ve={class:"flex items-center gap-2 mb-2"},Ee={class:"font-medium"},Te={class:"space-y-1 text-sm text-r58-text-secondary"},Fe=T({__name:"DeviceStatus",setup(h){const u=pe(),{capabilities:c}=le(u);return F(()=>{u.fetchCapabilities()}),(v,s)=>{var f,m,p,n,i,C,j,y;return a(),o("div",ve,[e("div",me,[s[3]||(s[3]=e("h3",{class:"text-sm font-semibold text-r58-text-secondary uppercase tracking-wide mb-4"},"Device Info",-1)),e("div",fe,[e("div",xe,[s[0]||(s[0]=e("span",{class:"text-r58-text-secondary"},"Device ID",-1)),e("span",be,d(((f=S(c))==null?void 0:f.device_id)||"Loading..."),1)]),e("div",ye,[s[1]||(s[1]=e("span",{class:"text-r58-text-secondary"},"Platform",-1)),e("span",ge,d(((m=S(c))==null?void 0:m.platform)||"-"),1)]),e("div",_e,[s[2]||(s[2]=e("span",{class:"text-r58-text-secondary"},"API Version",-1)),e("span",null,d(((p=S(c))==null?void 0:p.api_version)||"-"),1)])])]),e("div",he,[s[6]||(s[6]=e("h3",{class:"text-sm font-semibold text-r58-text-secondary uppercase tracking-wide mb-4"},"Features",-1)),e("div",we,[e("div",ke,[s[4]||(s[4]=e("div",null,[e("span",null,"Mixer"),e("span",{class:"text-xs text-r58-text-secondary ml-1"},"(VDO.ninja)")],-1)),e("span",{class:D(["badge",S(u).mixerEnabled?"badge-success":"badge-warning"])},d(S(u).mixerEnabled?"Enabled":"Disabled"),3)]),e("div",$e,[s[5]||(s[5]=e("span",null,"Recorder",-1)),e("span",{class:D(["badge",S(u).recorderEnabled?"badge-success":"badge-warning"])},d(S(u).recorderEnabled?"Enabled":"Disabled"),3)])])]),e("div",Se,[s[10]||(s[10]=e("h3",{class:"text-sm font-semibold text-r58-text-secondary uppercase tracking-wide mb-4"},"Storage",-1)),e("div",je,[e("div",null,[e("div",De,[s[7]||(s[7]=e("span",{class:"text-r58-text-secondary"},"Used",-1)),e("span",null,d(S(u).storagePercent)+"%",1)]),e("div",Ce,[e("div",{class:D(["h-full rounded-full transition-all",[S(u).storagePercent>90?"bg-r58-accent-danger":S(u).storagePercent>70?"bg-r58-accent-warning":"bg-r58-accent-success"]]),style:I({width:`${S(u).storagePercent}%`})},null,6)])]),e("div",Ae,[s[8]||(s[8]=e("span",{class:"text-r58-text-secondary"},"Available",-1)),e("span",null,d(((i=(n=S(c))==null?void 0:n.storage_available_gb)==null?void 0:i.toFixed(1))||"0")+" GB",1)]),e("div",Pe,[s[9]||(s[9]=e("span",{class:"text-r58-text-secondary"},"Total",-1)),e("span",null,d(((j=(C=S(c))==null?void 0:C.storage_total_gb)==null?void 0:j.toFixed(1))||"0")+" GB",1)])])]),e("div",Re,[s[12]||(s[12]=e("h3",{class:"text-sm font-semibold text-r58-text-secondary uppercase tracking-wide mb-4"},"Hardware Inputs",-1)),e("div",Ne,[(a(!0),o(R,null,E(((y=S(c))==null?void 0:y.inputs)||[],t=>(a(),o("div",{key:t.id,class:"p-4 rounded-lg bg-r58-bg-tertiary"},[e("div",Ve,[s[11]||(s[11]=e("span",{class:"w-2 h-2 rounded-full bg-r58-accent-success"},null,-1)),e("span",Ee,d(t.label),1)]),e("div",Te,[e("p",null,"Type: "+d(t.type.toUpperCase()),1),e("p",null,"Max: "+d(t.max_resolution),1),e("p",null,"Audio: "+d(t.supports_audio?"Yes":"No"),1)])]))),128))])])])}}}),Me={class:"space-y-4"},Oe={class:"flex items-center gap-4 flex-wrap"},Ue=["value"],Ie={class:"flex items-center gap-2 cursor-pointer"},Le=["disabled"],Be={key:0},He={key:1},qe={class:"bg-r58-bg-primary rounded-lg p-4 font-mono text-sm text-r58-text-secondary h-[500px] overflow-auto whitespace-pre-wrap"},ze=T({__name:"LogViewer",props:{service:{}},setup(h){const u=h,c=b(""),v=b(!1),s=b(u.service||"r58-api"),f=b(100),m=b(!1),p=[{id:"r58-api",label:"R58 API"},{id:"r58-pipeline",label:"Pipeline Manager"},{id:"mediamtx",label:"MediaMTX"}];let n=null;async function i(){v.value=!0;try{const t=await(await fetch(`/api/v1/support/logs?service=${s.value}&lines=${f.value}`)).json();c.value=t.logs||""}catch(y){c.value=`Error fetching logs: ${y}`}finally{v.value=!1}}function C(){n&&clearInterval(n),n=window.setInterval(i,5e3)}function j(){n&&(clearInterval(n),n=null)}return K(m,y=>{y?C():j()}),K([s,f],()=>{i()}),F(()=>{i()}),(y,t)=>(a(),o("div",Me,[e("div",Oe,[V(e("select",{"onUpdate:modelValue":t[0]||(t[0]=_=>s.value=_),class:"input"},[(a(),o(R,null,E(p,_=>e("option",{key:_.id,value:_.id},d(_.label),9,Ue)),64))],512),[[Y,s.value]]),V(e("select",{"onUpdate:modelValue":t[1]||(t[1]=_=>f.value=_),class:"input"},[...t[3]||(t[3]=[e("option",{value:50},"50 lines",-1),e("option",{value:100},"100 lines",-1),e("option",{value:250},"250 lines",-1),e("option",{value:500},"500 lines",-1)])],512),[[Y,f.value]]),e("label",Ie,[V(e("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=_=>m.value=_),class:"w-4 h-4 rounded"},null,512),[[ie,m.value]]),t[4]||(t[4]=e("span",{class:"text-sm"},"Auto-refresh",-1))]),e("button",{onClick:i,disabled:v.value,class:"btn"},[v.value?(a(),o("span",Be,"Loading...")):(a(),o("span",He,"Refresh"))],8,Le)]),e("pre",qe,d(c.value||"No logs available"),1)]))}}),Ge={class:"space-y-6"},Je={class:"flex items-center justify-between"},Ke=["disabled"],Ye={key:0},Qe={key:1},We={key:0,class:"flex items-center justify-center py-12"},Xe={key:1,class:"text-center py-12 text-r58-text-secondary"},Ze={key:2,class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},et=["onClick"],tt={class:"flex items-start justify-between mb-4"},st={class:"font-semibold"},nt={class:"text-sm text-r58-text-secondary"},at={class:"space-y-2 text-sm"},ot={class:"flex justify-between"},lt={class:"font-mono"},it={class:"flex justify-between"},rt=T({__name:"FleetOverview",setup(h){const u=b([]),c=b(!0),v=b(!1);async function s(){c.value=!0;try{const p=await fetch("/api/v1/lan-devices");if(p.ok){const n=await p.json();u.value=n.map(i=>({id:i.id,name:i.name,ip:i.ip,status:i.status,lastSeen:i.last_seen,version:i.api_version||"unknown"}))}}catch(p){console.error("Failed to fetch LAN devices:",p)}finally{c.value=!1}}F(s);async function f(){v.value=!0;try{const p=await fetch("/api/v1/lan-devices/scan",{method:"POST"});if(p.ok){const n=await p.json();for(const i of n)u.value.find(j=>j.id===i.id)||u.value.push({id:i.id,name:i.name,ip:i.ip,status:i.status,lastSeen:i.last_seen,version:i.api_version||"unknown"})}}catch(p){console.error("LAN network scan failed:",p)}finally{v.value=!1}}async function m(p){try{const i=await(await fetch(`/api/v1/lan-devices/${p.id}/connect`,{method:"POST"})).json();i.connected?window.open(`http://${p.ip}:8000`,"_blank"):alert(`Failed to connect: ${i.error||"Unknown error"}`)}catch(n){console.error("Failed to connect to device:",n)}}return(p,n)=>(a(),o("div",Ge,[e("div",Je,[n[0]||(n[0]=e("h2",{class:"text-lg font-semibold"},"LAN Devices",-1)),e("button",{onClick:f,disabled:v.value,class:"btn"},[v.value?(a(),o("span",Ye,"Scanning...")):(a(),o("span",Qe,"Scan Network"))],8,Ke)]),c.value?(a(),o("div",We,[...n[1]||(n[1]=[e("div",{class:"animate-spin w-8 h-8 border-2 border-r58-accent-primary border-t-transparent rounded-full"},null,-1)])])):u.value.length===0?(a(),o("div",Xe,[...n[2]||(n[2]=[e("p",null,"No devices found",-1),e("p",{class:"text-sm mt-2"},'Click "Scan Network" to discover R58 devices',-1)])])):(a(),o("div",Ze,[(a(!0),o(R,null,E(u.value,i=>(a(),o("div",{key:i.id,class:"card hover:border-r58-accent-primary/50 transition-colors cursor-pointer",onClick:C=>m(i)},[e("div",tt,[e("div",null,[e("h3",st,d(i.name),1),e("p",nt,d(i.id),1)]),e("span",{class:D(["badge",{"badge-success":i.status==="online","badge-danger":i.status==="offline","badge-warning":i.status==="unknown"}])},d(i.status),3)]),e("div",at,[e("div",ot,[n[3]||(n[3]=e("span",{class:"text-r58-text-secondary"},"IP Address",-1)),e("span",lt,d(i.ip),1)]),e("div",it,[n[4]||(n[4]=e("span",{class:"text-r58-text-secondary"},"Version",-1)),e("span",null,d(i.version),1)])])],8,et))),128))]))]))}}),ct={class:"space-y-6"},dt={key:0,class:"flex items-center justify-center py-12"},ut={key:1,class:"card bg-r58-accent-danger/10 border border-r58-accent-danger/30"},pt={class:"text-r58-accent-danger"},vt={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-4"},mt={class:"card"},ft={key:0,class:"space-y-3"},xt={class:"relative w-full h-4 bg-r58-bg-tertiary rounded-full overflow-hidden"},bt={class:"flex justify-between text-sm"},yt={class:"font-mono"},gt={key:1,class:"flex items-center justify-center py-4"},_t={class:"card"},ht={key:0,class:"space-y-3"},wt={class:"relative w-full h-4 bg-r58-bg-tertiary rounded-full overflow-hidden"},kt={class:"flex justify-between text-sm"},$t={key:1,class:"flex items-center justify-center py-4"},St={class:"card"},jt={class:"flex items-center justify-center py-2"},Dt={key:1,class:"text-r58-text-secondary"},Ct={key:0,class:"text-center text-xs text-r58-text-secondary"},At={class:"card"},Pt={class:"flex items-center justify-center py-2"},Rt={key:0,class:"text-3xl font-bold text-r58-accent-primary"},Nt={key:1,class:"text-r58-text-secondary"},Vt={class:"text-center text-xs text-r58-text-secondary"},Et={class:"card"},Tt={class:"flex items-center justify-between mb-4"},Ft={class:"flex gap-2"},Mt={class:"grid gap-3 sm:grid-cols-3"},Ot={class:"flex items-center gap-3"},Ut={class:"font-medium"},It={class:"text-xs text-r58-text-secondary"},Lt={key:0},Bt={class:"card"},Ht={class:"text-sm font-semibold text-r58-text-secondary uppercase tracking-wide mb-4"},qt={class:"ml-2 text-r58-accent-primary"},zt={key:0,class:"text-center py-8 text-r58-text-secondary"},Gt={key:1,class:"space-y-2"},Jt={class:"flex items-center gap-4"},Kt={class:"font-mono text-sm"},Yt={class:"text-xs text-r58-text-secondary"},Qt={key:0},Wt={class:"flex items-center gap-3"},Xt=["onClick"],Zt=T({__name:"SystemMonitor",setup(h){const u=ee(),c=b(!0),v=b(null),s=b(null),f=b(null),m=A(()=>{var x,w,k;const r=((k=(w=(x=s.value)==null?void 0:x.info)==null?void 0:w.load_average)==null?void 0:k[0])??0;return Math.min(100,r/8*100)}),p=A(()=>{var l,x;const r=(x=(l=s.value)==null?void 0:l.info)==null?void 0:x.memory_percent;return r!==void 0?r:0}),n=A(()=>{var x,w;const r=((w=(x=s.value)==null?void 0:x.info)==null?void 0:w.temperatures)??[];return r.length===0?null:r.find(k=>{var $;return($=k.type)==null?void 0:$.toLowerCase().includes("cpu")})??r[0]}),i=A(()=>{var k,$;const r=(($=(k=s.value)==null?void 0:k.info)==null?void 0:$.uptime_seconds)??0,l=Math.floor(r/86400),x=Math.floor(r%86400/3600),w=Math.floor(r%3600/60);return l>0?`${l}d ${x}h`:x>0?`${x}h ${w}m`:`${w}m`}),C=A(()=>{var r;return((r=s.value)==null?void 0:r.services)??[]}),j=A(()=>{var r;return((r=s.value)==null?void 0:r.pipelines)??[]});async function y(){try{const{buildApiUrl:r}=await Q(async()=>{const{buildApiUrl:$}=await import("./index-C0NGvpRf.js").then(P=>P.V);return{buildApiUrl:$}},__vite__mapDeps([0,1])),l=await fetch(r("/health"));if(!l.ok)throw new Error("Failed to fetch status");const x=await l.json(),w=await fetch(r("/api/ingest/status")),k=w.ok?await w.json():{cameras:{}};s.value={info:{hostname:"R58 Device",platform:x.platform||"R58",gstreamer:x.gstreamer,load_average:[0,0,0],memory_percent:0,uptime_seconds:0,temperatures:[]},services:[{name:"r58-recorder",active:x.status==="healthy",status:x.status},{name:"mediamtx",active:!0,status:"running"},{name:"vdo-mixer",active:!0,status:"embedded",note:"Browser-based"}],pipelines:Object.entries(k.cameras||{}).map(([$,P])=>({pipeline_id:$,pipeline_type:"ingest",device:P.device,state:P.status==="streaming"?"running":P.status}))},v.value=null}catch(r){v.value=r.message,console.error("Failed to fetch system status:",r)}finally{c.value=!1}}async function t(r){u.info("Service restart not available in this version")}async function _(){u.info("Device reboot not available in this version")}async function te(r){try{const{buildApiUrl:l}=await Q(async()=>{const{buildApiUrl:k}=await import("./index-C0NGvpRf.js").then($=>$.V);return{buildApiUrl:k}},__vite__mapDeps([0,1])),x=await fetch(l(`/api/ingest/stop/${r}`),{method:"POST"}),w=await x.json();x.ok?(u.success(`Stopped pipeline: ${r}`),await y()):u.error(w.detail||"Stop failed")}catch(l){u.error(`Stop failed: ${l.message}`)}}function se(r){return r.active?"bg-r58-accent-success":"bg-r58-accent-danger"}function ne(r){switch(r){case"running":return"text-r58-accent-success";case"starting":return"text-r58-accent-warning";case"stopping":return"text-r58-accent-warning";default:return"text-r58-text-secondary"}}function L(r){return r>90?"bg-r58-accent-danger":r>70?"bg-r58-accent-warning":"bg-r58-accent-success"}function ae(r){return r>80?"text-r58-accent-danger":r>65?"text-r58-accent-warning":"text-r58-accent-success"}return F(()=>{y(),f.value=window.setInterval(y,1e4)}),re(()=>{f.value&&clearInterval(f.value)}),(r,l)=>{var x,w,k,$,P,B,H,q,z,G,J;return a(),o("div",ct,[c.value?(a(),o("div",dt,[...l[1]||(l[1]=[e("div",{class:"animate-spin w-8 h-8 border-2 border-r58-accent-primary border-t-transparent rounded-full"},null,-1)])])):v.value?(a(),o("div",ut,[e("p",pt,"Error loading system status: "+d(v.value),1),e("button",{onClick:y,class:"btn btn-secondary mt-4"},"Retry")])):(a(),o(R,{key:2},[e("div",vt,[e("div",mt,[l[4]||(l[4]=e("h3",{class:"text-sm font-semibold text-r58-text-secondary uppercase tracking-wide mb-4"},"CPU Load",-1)),(k=(w=(x=s.value)==null?void 0:x.info)==null?void 0:w.load_average)!=null&&k.some(g=>g>0)?(a(),o("div",ft,[e("div",xt,[e("div",{class:D(["absolute left-0 top-0 h-full rounded-full transition-all duration-500",L(m.value)]),style:I({width:`${m.value}%`})},null,6)]),e("div",bt,[l[2]||(l[2]=e("span",{class:"text-r58-text-secondary"},"Load Average",-1)),e("span",yt,d((B=(P=($=s.value)==null?void 0:$.info)==null?void 0:P.load_average)==null?void 0:B.map(g=>g.toFixed(2)).join(" / ")),1)])])):(a(),o("div",gt,[...l[3]||(l[3]=[e("span",{class:"text-r58-text-secondary"},"N/A",-1)])]))]),e("div",_t,[l[7]||(l[7]=e("h3",{class:"text-sm font-semibold text-r58-text-secondary uppercase tracking-wide mb-4"},"Memory",-1)),p.value>0?(a(),o("div",ht,[e("div",wt,[e("div",{class:D(["absolute left-0 top-0 h-full rounded-full transition-all duration-500",L(p.value)]),style:I({width:`${p.value}%`})},null,6)]),e("div",kt,[l[5]||(l[5]=e("span",{class:"text-r58-text-secondary"},"Used",-1)),e("span",null,d(p.value.toFixed(1))+"%",1)])])):(a(),o("div",$t,[...l[6]||(l[6]=[e("span",{class:"text-r58-text-secondary"},"N/A",-1)])]))]),e("div",St,[l[8]||(l[8]=e("h3",{class:"text-sm font-semibold text-r58-text-secondary uppercase tracking-wide mb-4"},"Temperature",-1)),e("div",jt,[n.value?(a(),o("span",{key:0,class:D(["text-3xl font-bold",ae(n.value.temp_celsius)])},d(n.value.temp_celsius.toFixed(1))+"°C ",3)):(a(),o("span",Dt,"N/A"))]),(H=n.value)!=null&&H.type?(a(),o("p",Ct,d(n.value.type),1)):N("",!0)]),e("div",At,[l[9]||(l[9]=e("h3",{class:"text-sm font-semibold text-r58-text-secondary uppercase tracking-wide mb-4"},"Uptime",-1)),e("div",Pt,[((z=(q=s.value)==null?void 0:q.info)==null?void 0:z.uptime_seconds)>0?(a(),o("span",Rt,d(i.value),1)):(a(),o("span",Nt,"N/A"))]),e("p",Vt,d(((J=(G=s.value)==null?void 0:G.info)==null?void 0:J.hostname)||"R58 Device"),1)])]),e("div",Et,[e("div",Tt,[l[10]||(l[10]=e("h3",{class:"text-sm font-semibold text-r58-text-secondary uppercase tracking-wide"},"Services",-1)),e("div",Ft,[e("button",{onClick:l[0]||(l[0]=g=>t()),class:"btn btn-sm btn-secondary opacity-50 cursor-not-allowed",disabled:"",title:"Requires SSH access to device"}," Restart All "),e("button",{onClick:_,class:"btn btn-sm btn-danger opacity-50 cursor-not-allowed",disabled:"",title:"Requires SSH access to device"}," Reboot Device ")])]),e("div",Mt,[(a(!0),o(R,null,E(C.value,g=>(a(),o("div",{key:g.name,class:"flex items-center justify-between p-3 rounded-lg bg-r58-bg-tertiary"},[e("div",Ot,[e("span",{class:D(["w-2.5 h-2.5 rounded-full",se(g)])},null,2),e("div",null,[e("p",Ut,d(g.name),1),e("p",It,[M(d(g.status)+" ",1),g.memory_mb?(a(),o("span",Lt," · "+d(g.memory_mb.toFixed(0))+" MB",1)):N("",!0)])])]),l[11]||(l[11]=e("button",{class:"text-r58-text-secondary opacity-50 cursor-not-allowed",disabled:"",title:"Requires SSH access"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})])],-1))]))),128))])]),e("div",Bt,[e("h3",Ht,[l[12]||(l[12]=M(" Active Pipelines ",-1)),e("span",qt,"("+d(j.value.length)+")",1)]),j.value.length===0?(a(),o("div",zt," No active pipelines ")):(a(),o("div",Gt,[(a(!0),o(R,null,E(j.value,g=>(a(),o("div",{key:g.pipeline_id,class:"flex items-center justify-between p-3 rounded-lg bg-r58-bg-tertiary"},[e("div",Jt,[e("div",null,[e("p",Kt,d(g.pipeline_id),1),e("p",Yt,[M(" Type: "+d(g.pipeline_type)+" ",1),g.device?(a(),o("span",Qt," · "+d(g.device),1)):N("",!0)])])]),e("div",Wt,[e("span",{class:D(["text-sm font-medium capitalize",ne(g.state)])},d(g.state),3),g.state==="running"?(a(),o("button",{key:0,onClick:ws=>te(g.pipeline_id),class:"btn btn-sm btn-danger",title:"Stop pipeline"}," Stop ",8,Xt)):N("",!0)])]))),128))]))])],64))])}}}),es={class:"space-y-6"},ts={class:"card"},ss={class:"space-y-4"},ns={class:"card"},as={class:"space-y-4"},os=["value"],ls={class:"card"},is={class:"space-y-4"},rs=["value"],cs={class:"flex items-center justify-between"},ds={key:0},us={class:"card bg-r58-bg-tertiary/50"},ps={class:"space-y-2 text-sm"},vs={class:"flex justify-between"},Z="preke-settings",ms=T({__name:"SettingsPanel",setup(h){const u=ee(),c=b("Preke Device"),v=b(X),s=b(ue()),f=b("/recordings"),m=b(!1),p=b(30),n=A(()=>ce());function i(){try{const y=localStorage.getItem(Z);if(y){const t=JSON.parse(y);c.value=t.deviceName||c.value,v.value=t.vdoRoom||v.value,m.value=t.autoCleanup||!1,p.value=t.cleanupDays||30}}catch{}}function C(){try{const y={deviceName:c.value,vdoRoom:v.value,autoCleanup:m.value,cleanupDays:p.value};localStorage.setItem(Z,JSON.stringify(y)),u.success("Settings saved")}catch(y){u.error("Failed to save settings"),console.error("Failed to save settings:",y)}}function j(){c.value="Preke Device",v.value=X,m.value=!1,p.value=30,C(),u.info("Settings reset to defaults")}return F(()=>{i()}),(y,t)=>(a(),o("div",es,[e("div",ts,[t[6]||(t[6]=e("h3",{class:"text-sm font-semibold text-r58-text-secondary uppercase tracking-wide mb-4"},"Device",-1)),e("div",ss,[e("div",null,[t[4]||(t[4]=e("label",{class:"block text-sm font-medium mb-2"},"Device Name",-1)),V(e("input",{"onUpdate:modelValue":t[0]||(t[0]=_=>c.value=_),type:"text",class:"input w-full",placeholder:"My Preke Device"},null,512),[[O,c.value]]),t[5]||(t[5]=e("p",{class:"text-xs text-r58-text-secondary mt-1"},"Display name for this device in the app",-1))])])]),e("div",ns,[t[11]||(t[11]=e("h3",{class:"text-sm font-semibold text-r58-text-secondary uppercase tracking-wide mb-4"},"VDO.ninja / Mixer",-1)),e("div",as,[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium mb-2"},"Room Name",-1)),V(e("input",{"onUpdate:modelValue":t[1]||(t[1]=_=>v.value=_),type:"text",class:"input w-full",placeholder:"r58studio"},null,512),[[O,v.value]]),t[8]||(t[8]=e("p",{class:"text-xs text-r58-text-secondary mt-1"},"VDO.ninja room for video mixing",-1))]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium mb-2"},"VDO Host",-1)),e("input",{value:s.value,type:"text",class:"input w-full bg-r58-bg-tertiary",readonly:"",disabled:""},null,8,os),t[10]||(t[10]=e("p",{class:"text-xs text-r58-text-secondary mt-1"},"VDO.ninja server (read-only)",-1))])])]),e("div",ls,[t[16]||(t[16]=e("h3",{class:"text-sm font-semibold text-r58-text-secondary uppercase tracking-wide mb-4"},"Storage",-1)),e("div",is,[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium mb-2"},"Recording Path",-1)),e("input",{value:f.value,type:"text",class:"input w-full bg-r58-bg-tertiary",readonly:"",disabled:""},null,8,rs),t[13]||(t[13]=e("p",{class:"text-xs text-r58-text-secondary mt-1"},"Location where recordings are saved on device",-1))]),e("div",cs,[t[14]||(t[14]=e("div",null,[e("label",{class:"block text-sm font-medium"},"Auto-cleanup old recordings"),e("p",{class:"text-xs text-r58-text-secondary"},"Automatically delete recordings older than specified days")],-1)),e("button",{onClick:t[2]||(t[2]=_=>m.value=!m.value),class:D(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors",m.value?"bg-r58-accent-primary":"bg-r58-bg-tertiary"])},[e("span",{class:D(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",m.value?"translate-x-6":"translate-x-1"])},null,2)],2)]),m.value?(a(),o("div",ds,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium mb-2"},"Keep recordings for (days)",-1)),V(e("input",{"onUpdate:modelValue":t[3]||(t[3]=_=>p.value=_),type:"number",min:"1",max:"365",class:"input w-24"},null,512),[[O,p.value,void 0,{number:!0}]])])):N("",!0)])]),e("div",{class:"flex items-center justify-between"},[e("button",{onClick:j,class:"btn btn-secondary"}," Reset to Defaults "),e("button",{onClick:C,class:"btn btn-primary"}," Save Settings ")]),e("div",us,[t[19]||(t[19]=e("h3",{class:"text-sm font-semibold text-r58-text-secondary uppercase tracking-wide mb-4"},"About",-1)),e("div",ps,[t[18]||(t[18]=e("div",{class:"flex justify-between"},[e("span",{class:"text-r58-text-secondary"},"App Version"),e("span",null,"2.0.0")],-1)),e("div",vs,[t[17]||(t[17]=e("span",{class:"text-r58-text-secondary"},"Platform",-1)),e("span",null,d(n.value?"Desktop (Electron)":"Web Browser"),1)])])])]))}}),fs={class:"h-full flex flex-col"},xs={class:"px-6 py-4 border-b border-r58-bg-tertiary bg-r58-bg-secondary"},bs={class:"flex gap-2"},ys=["onClick"],gs={class:"flex-1 p-6 overflow-y-auto"},_s={key:2,class:"card"},hs={key:3,class:"card"},Ss=T({__name:"AdminView",setup(h){const u=de(),c=b("system"),v=[{id:"system",label:"System"},{id:"status",label:"Device Status"},{id:"logs",label:"Logs"},{id:"fleet",label:"Fleet"},{id:"settings",label:"Settings"}];return F(()=>{const s=u.query.tab;s&&v.some(f=>f.id===s)&&(c.value=s)}),(s,f)=>(a(),o("div",fs,[e("header",xs,[f[0]||(f[0]=e("h1",{class:"text-xl font-semibold mb-4"},"Admin",-1)),e("div",bs,[(a(),o(R,null,E(v,m=>e("button",{key:m.id,onClick:p=>c.value=m.id,class:D(["px-4 py-2 rounded-t-lg transition-colors",[c.value===m.id?"bg-r58-bg-primary text-r58-text-primary":"text-r58-text-secondary hover:text-r58-text-primary"]])},d(m.label),11,ys)),64))])]),e("div",gs,[c.value==="system"?(a(),U(Zt,{key:0})):c.value==="status"?(a(),U(Fe,{key:1})):c.value==="logs"?(a(),o("div",_s,[f[1]||(f[1]=e("h2",{class:"text-lg font-semibold mb-4"},"System Logs",-1)),W(ze)])):c.value==="fleet"?(a(),o("div",hs,[W(rt)])):c.value==="settings"?(a(),U(ms,{key:4})):N("",!0)])]))}});export{Ss as default};
