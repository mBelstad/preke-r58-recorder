import{d as w,r,c as s,a as e,b as p,w as f,x as k,K as h,O as _,p as j,t as x,e as C,S as V,f as N,o as n}from"./index-DdISjqYH.js";const D={class:"min-h-screen bg-r58-bg-primary flex items-center justify-center p-4"},M={key:0,class:"card max-w-md w-full"},O={class:"space-y-4"},S=["disabled"],B={class:"flex items-center gap-2"},U=["disabled"],E={key:0,class:"flex items-center justify-center gap-2"},T={key:1},A={key:0,class:"text-red-400 text-sm text-center"},F={key:1,class:"w-full h-full flex flex-col"},K={class:"bg-r58-bg-secondary border-b border-r58-bg-tertiary p-4 flex items-center justify-between"},L={class:"flex items-center gap-3"},R={class:"font-medium"},Y={class:"flex items-center gap-2"},G={key:0,class:"flex-1 bg-black"},I=["src"],J={key:1,class:"flex-1 flex items-center justify-center"},P={class:"text-center"},z=w({__name:"GuestView",setup(H){const o=r(""),i=r(!1),c=r(!1),l=r(null),u=r(null),y=r(null),d=r(!0);async function v(){if(o.value.trim()){i.value=!0,u.value=null;try{const a=await V(N("/api/v1/vdoninja/url"),{profile:"guestInvite",guest_name:o.value.trim()});a.url?(l.value=a.url,c.value=!0,d.value||window.open(a.url,"_blank")):u.value="Failed to get VDO.ninja URL"}catch(a){console.error("Failed to join as guest:",a),u.value=a instanceof Error?a.message:"Failed to connect"}finally{i.value=!1}}}function g(){c.value=!1,l.value=null,o.value=""}function b(){l.value&&window.open(l.value,"_blank")}return(a,t)=>(n(),s("div",D,[c.value?(n(),s("div",F,[e("div",K,[e("div",L,[t[6]||(t[6]=e("div",{class:"w-3 h-3 rounded-full bg-green-500 animate-pulse"},null,-1)),e("span",R,"Connected as "+x(o.value),1)]),e("div",Y,[d.value&&l.value?(n(),s("button",{key:0,onClick:b,class:"btn btn-sm btn-secondary",title:"Open in new tab"},[...t[7]||(t[7]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1),e("span",{class:"ml-1"},"New Tab",-1)])])):p("",!0),e("button",{onClick:g,class:"btn btn-sm btn-danger"}," Disconnect ")])]),d.value&&l.value?(n(),s("div",G,[e("iframe",{ref_key:"iframeRef",ref:y,src:l.value,class:"w-full h-full border-0",allow:"camera; microphone; display-capture; autoplay; clipboard-write",allowfullscreen:""},null,8,I)])):(n(),s("div",J,[e("div",P,[t[8]||(t[8]=C('<div class="w-20 h-20 rounded-full bg-r58-accent-success/20 flex items-center justify-center mx-auto mb-6"><svg class="w-10 h-10 text-r58-accent-success" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div><h2 class="text-2xl font-semibold mb-2">You&#39;re Connected!</h2><p class="text-r58-text-secondary mb-6"> VDO.ninja opened in a new tab. You can close this page. </p>',3)),l.value?(n(),s("button",{key:0,onClick:b,class:"btn btn-primary"}," Open VDO.ninja Again ")):p("",!0)])]))])):(n(),s("div",M,[t[5]||(t[5]=e("div",{class:"text-center mb-8"},[e("h1",{class:"text-2xl font-bold mb-2"},"Join Preke Studio"),e("p",{class:"text-r58-text-secondary"},"Enter your name to join as a remote guest")],-1)),e("div",O,[e("div",null,[t[2]||(t[2]=e("label",{class:"block text-sm font-medium mb-2",for:"guest-name"},"Your Name",-1)),f(e("input",{id:"guest-name","onUpdate:modelValue":t[0]||(t[0]=m=>o.value=m),type:"text",placeholder:"Enter your name...",class:"input w-full",disabled:i.value,onKeyup:h(v,["enter"])},null,40,S),[[k,o.value]])]),e("div",B,[f(e("input",{id:"embed-mode","onUpdate:modelValue":t[1]||(t[1]=m=>d.value=m),type:"checkbox",class:"w-4 h-4 rounded border-gray-600 bg-gray-700 text-r58-accent-primary focus:ring-r58-accent-primary"},null,512),[[_,d.value]]),t[3]||(t[3]=e("label",{for:"embed-mode",class:"text-sm text-r58-text-secondary"}," Stay on this page (embed video) ",-1))]),e("button",{onClick:v,disabled:!o.value.trim()||i.value,class:"btn btn-primary w-full btn-lg"},[i.value?(n(),s("span",E,[...t[4]||(t[4]=[e("span",{class:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"},null,-1),j(" Connecting... ",-1)])])):(n(),s("span",T,"Join Studio"))],8,U),u.value?(n(),s("p",A,x(u.value),1)):p("",!0)])]))]))}});export{z as default};
