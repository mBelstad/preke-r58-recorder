const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DC_9t8hQ.js","assets/index-D6CbdW7O.css"])))=>i.map(i=>d[i]);
import{r as h,E as ee,G as J,o as se,p as _e,H as Ie,l as P,I as ve,d as te,J as le,g as G,T as ge,w as ae,c as v,f as N,A as Be,e,q as K,B as ie,t as x,K as je,k as d,_ as de,L as Oe,j as Z,F as Y,n as F,y as oe,M as De,s as W,N as be,O as Ge,P as Ne,u as Se,a as He,z as ue,C as ze,Q as We,R as Re,S as qe,U as Ke,V as Ye,W as Qe,m as Ze,i as Ve,X as Xe,b as Je,v as et,Y as tt}from"./index-DC_9t8hQ.js";import{u as nt,C as ot,P as at,M as st}from"./ModeLoadingScreen-549TjedK.js";function rt(){const o=h(!1),t=h(!1);let n=null;const y=ee();J(()=>y.status,a=>{o.value=a==="recording"},{immediate:!0});function i(a){if(o.value)return a.preventDefault(),a.returnValue="Recording in progress. Are you sure you want to leave?",a.returnValue}se(()=>{window.addEventListener("beforeunload",i)}),_e(()=>{window.removeEventListener("beforeunload",i)}),Ie((a,r,c)=>{o.value?(n=()=>c(),t.value=!0,c(!1)):c()});function u(){t.value=!1,o.value=!1,y.stopRecording().finally(()=>{n&&(n(),n=null)})}function s(){t.value=!1,n=null}return{isGuardActive:o,showLeaveConfirmation:t,confirmLeave:u,cancelLeave:s}}const I=h(null),he=h(!1),Pe=h(null),ke=h(null),lt=10,ye=2,it=25;function ct(){const o=P(()=>I.value?I.value.available_gb<ye?"critical":I.value.available_gb<lt?"warning":"ok":"unknown"),t=P(()=>I.value?I.value.available_gb>=ye:!0),n=P(()=>{if(!I.value)return null;const a=I.value.available_gb*1024*1024*1024,r=it*1024*1024,c=a/r,l=Math.floor(c/3600),R=Math.floor(c%3600/60);return l>24?`${Math.floor(l/24)}d ${l%24}h`:l>0?`${l}h ${R}m`:`${R}m`}),y=P(()=>{switch(o.value){case"ok":return"emerald";case"warning":return"amber";case"critical":return"red";default:return"zinc"}}),i=P(()=>I.value?o.value==="critical"?`Disk space critically low (${I.value.available_gb.toFixed(1)} GB). Cannot start recording.`:o.value==="warning"?`Low disk space (${I.value.available_gb.toFixed(1)} GB). Estimated recording time: ${n.value}`:null:null);async function u(){he.value=!0,ke.value=null;try{const a=await ve.getDegradation();if(a.resources&&a.resources.disk_free_gb!==void 0){const r=a.resources.disk_free_gb,c=r*3;I.value={available_gb:r,total_gb:c,used_percent:100-r/c*100,recording_path:"/opt/r58-app/shared/recordings"}}return Pe.value=new Date,I.value}catch(a){return ke.value=a.message||"Failed to check disk space",console.error("Failed to check disk space:",a),null}finally{he.value=!1}}async function s(){return await u(),I.value?o.value==="critical"?{ok:!1,message:`Insufficient disk space (${I.value.available_gb.toFixed(1)} GB). Need at least ${ye} GB to start recording.`}:o.value==="warning"?{ok:!0,message:`Low disk space warning: ${I.value.available_gb.toFixed(1)} GB available. Estimated recording time: ${n.value}`}:{ok:!0}:{ok:!0,message:"Could not verify disk space. Proceeding with caution."}}return{diskSpace:I,isLoading:he,lastCheck:Pe,error:ke,status:o,statusColor:y,canStartRecording:t,estimatedRecordingTime:n,warningMessage:i,checkDiskSpace:u,preflightCheck:s}}const q=h(localStorage.getItem("r58_audio_feedback")!=="false");let we=null;function ut(){return we||(we=new(window.AudioContext||window.webkitAudioContext)),we}function z(o,t,n="sine",y=.3){if(q.value)try{const i=ut();i.state==="suspended"&&i.resume();const u=i.createOscillator(),s=i.createGain();u.connect(s),s.connect(i.destination),u.type=n,u.frequency.value=o;const a=i.currentTime;s.gain.setValueAtTime(0,a),s.gain.linearRampToValueAtTime(y,a+.01),s.gain.linearRampToValueAtTime(0,a+t),u.start(a),u.stop(a+t)}catch(i){console.warn("Audio feedback failed:",i)}}function dt(){q.value&&(z(440,.1,"sine",.2),setTimeout(()=>z(554,.1,"sine",.2),100),setTimeout(()=>z(659,.15,"sine",.25),200))}function ft(){q.value&&(z(880,.08,"sine",.3),setTimeout(()=>z(880,.15,"sine",.3),120))}function pt(){q.value&&(z(659,.1,"sine",.25),setTimeout(()=>z(554,.1,"sine",.2),100),setTimeout(()=>z(440,.15,"sine",.2),200))}function vt(){q.value&&(z(200,.15,"square",.15),setTimeout(()=>z(180,.2,"square",.15),180))}function mt(){q.value&&(z(1e3,.08,"sine",.2),setTimeout(()=>z(1e3,.08,"sine",.2),150))}function Me(){q.value&&z(1200,.03,"sine",.1)}function gt(o=50){if(q.value&&"vibrate"in navigator)try{navigator.vibrate(o)}catch{}}function bt(){function o(n){q.value=n,localStorage.setItem("r58_audio_feedback",String(n))}function t(){o(!q.value),q.value&&Me()}return{enabled:q,setEnabled:o,toggle:t,playSuccess:dt,playError:vt,playWarning:mt,playClick:Me,playRecordStart:ft,playRecordStop:pt,vibrate:gt}}const _t={class:"bg-preke-bg-elevated rounded-lg shadow-xl max-w-md w-full p-6"},ht=["placeholder"],kt={class:"text-xs text-preke-text-dim mt-2"},yt=te({__name:"SessionNameDialog",props:{open:{type:Boolean},suggestedName:{}},emits:["confirm","cancel","skip"],setup(o,{emit:t}){const n=o,y=t,i=h(""),u=h(null),s=P(()=>{const m=new Date,k=m.toLocaleDateString("en-CA"),_=m.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}).replace(":","");return`Recording_${k}_${_}`}),a=P(()=>n.suggestedName||s.value);J(()=>n.open,m=>{m&&(i.value=a.value,setTimeout(()=>{var k,_;(k=u.value)==null||k.focus(),(_=u.value)==null||_.select()},100))});function r(){y("confirm",i.value.trim()||a.value)}function c(){y("skip")}function l(){y("cancel")}function R(m){m.key==="Enter"?r():m.key==="Escape"&&l()}return(m,k)=>(d(),le(je,{to:"body"},[G(ge,{name:"fade"},{default:ae(()=>[o.open?(d(),v("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",onClick:Be(l,["self"]),onKeydown:R},[e("div",_t,[k[1]||(k[1]=e("h2",{class:"text-lg font-semibold mb-2"},"Name This Recording",-1)),k[2]||(k[2]=e("p",{class:"text-preke-text-dim text-sm mb-4"}," Give your recording a name to find it easily later (optional). ",-1)),K(e("input",{ref_key:"inputRef",ref:u,"onUpdate:modelValue":k[0]||(k[0]=_=>i.value=_),type:"text",placeholder:a.value,class:"w-full px-4 py-2 bg-preke-bg-surface border border-preke-bg-surface rounded-lg text-preke-text placeholder-preke-text-dim focus:outline-none focus:ring-2 focus:ring-preke-gold"},null,8,ht),[[ie,i.value]]),e("p",kt," Suggested: "+x(a.value),1),e("div",{class:"flex justify-between mt-6"},[e("button",{onClick:c,class:"text-sm text-preke-text-dim hover:text-preke-text transition-colors"}," Skip (use default) "),e("div",{class:"flex gap-3"},[e("button",{onClick:l,class:"btn"}," Cancel "),e("button",{onClick:r,class:"btn btn-primary"}," Start Recording ")])])])],32)):N("",!0)]),_:1})]))}}),wt=de(yt,[["__scopeId","data-v-2eeca4e8"]]),Ct={class:"recorder-controls"},xt={key:0,class:"recorder-controls__duration"},$t=["disabled","title"],Rt={key:0,class:"recorder-controls__spinner"},St={key:0,class:"recorder-controls__icon recorder-controls__icon--stop"},Tt={key:1,class:"recorder-controls__icon recorder-controls__icon--record"},Pt={class:"recorder-controls__hint"},Mt=te({__name:"RecorderControls",setup(o){const t=ee(),{register:n}=Oe(),{preflightCheck:y,status:i,canStartRecording:u}=ct(),{playRecordStart:s,playRecordStop:a,playError:r,playWarning:c,vibrate:l}=bt(),R=h(null),m=h(!1),k=h(!1),_=h(!1),S=h(!1),j=h(void 0),$=P(()=>t.status==="recording"),T=P(()=>t.status==="starting"),E=P(()=>t.status==="stopping"),O=P(()=>t.formattedDuration),w=P(()=>T.value||E.value||k.value),L=P(()=>T.value?"Starting recording...":E.value?"Stopping recording...":k.value?"Checking disk space...":!$.value&&!u.value?"Insufficient disk space":"");let A=null;se(()=>{A=n({key:" ",description:"Toggle Recording",action:V,context:"recorder",enabled:()=>!T.value&&!E.value})}),_e(()=>{A&&A()});async function V(){$.value?Q():await D()}async function D(p){k.value=!0;try{const H=await y();if(!H.ok){r(),l(200),Z.error("Cannot start recording",H.message||"Preflight check failed");return}if(H.message&&i.value==="warning"&&(c(),Z.warning("Low disk space",H.message)),S.value&&!p){j.value=void 0,_.value=!0;return}await b(p||j.value)}finally{k.value=!1}}async function b(p){try{await t.startRecording(p);const H=p||t.sessionId;s(),l([50,30,50]),Z.success("Recording started",`Session: ${H}`)}catch(H){r(),l(200),Z.error("Failed to start recording",H.message||"Unknown error",{label:"Retry",onClick:()=>D(p)})}}function B(p){_.value=!1,j.value=p,D(p)}function g(){_.value=!1,j.value=void 0,D()}function f(){_.value=!1,k.value=!1}async function M(){try{await t.stopRecording(),a(),l(100),Z.success("Recording stopped")}catch(p){r(),l(200),Z.error("Failed to stop recording",p.message||"Unknown error")}}function Q(){var p;m.value=!1,(p=R.value)==null||p.open(),setTimeout(()=>{m.value=!0},500)}function re(){m.value&&M()}async function C(){$.value?Q():await b()}return(p,H)=>(d(),v(Y,null,[e("div",Ct,[$.value?(d(),v("div",xt,x(O.value),1)):N("",!0),e("button",{onClick:C,disabled:w.value,class:F(["recorder-controls__btn",$.value?"recorder-controls__btn--stop":"recorder-controls__btn--start"]),title:L.value||($.value?"Stop Recording (Space)":"Start Recording (Space)")},[T.value||E.value||k.value?(d(),v("span",Rt)):(d(),v(Y,{key:1},[$.value?(d(),v("span",St)):(d(),v("span",Tt))],64)),e("span",null,x(k.value?"Checking...":$.value?"Stop":"Start Recording"),1)],10,$t),e("span",Pt,[H[0]||(H[0]=oe(" Press ",-1)),H[1]||(H[1]=e("kbd",null,"Space",-1)),oe(" to "+x($.value?"stop":"start"),1)])]),G(De,{ref_key:"stopConfirmDialog",ref:R,title:"Stop Recording?",message:`You have been recording for ${O.value}. This will finalize all files.`,"confirm-text":"Stop Recording","cancel-text":"Keep Recording",danger:!0,onConfirm:re},null,8,["message"]),G(wt,{open:_.value,onConfirm:B,onSkip:g,onCancel:f},null,8,["open"])],64))}}),Et=de(Mt,[["__scopeId","data-v-1e32920d"]]),pe=h(localStorage.getItem("r58_performance_mode")==="true"),Ce=h(localStorage.getItem("r58_performance_mode_auto")!=="false"),Lt=3,At=100,Bt=500;function jt(){const o=ee(),t=P(()=>pe.value?!0:Ce.value&&o.isRecording?o.inputs.filter(R=>R.isRecording).length>=Lt:!1),n=P(()=>t.value?Bt:At);J(t,l=>{l?document.body.classList.add("performance-mode"):document.body.classList.remove("performance-mode")},{immediate:!0});function y(l){pe.value=l,localStorage.setItem("r58_performance_mode",String(l))}function i(l){Ce.value=l,localStorage.setItem("r58_performance_mode_auto",String(l))}function u(){y(!pe.value)}function s(l,R){let m=0,k=null;return(..._)=>{const S=Date.now(),j=R??n.value,$=S-m;$>=j?(m=S,l(..._)):k||(k=window.setTimeout(()=>{m=Date.now(),k=null,l(..._)},j-$))}}function a(l,R){let m=null;return(...k)=>{m&&clearTimeout(m),m=window.setTimeout(()=>{l(...k),m=null},R??n.value)}}function r(l){return t.value?window.setTimeout(()=>l(performance.now()),n.value):requestAnimationFrame(l)}function c(l){t.value?clearTimeout(l):cancelAnimationFrame(l)}return{enabled:pe,autoEnable:Ce,isActive:t,updateInterval:n,setEnabled:y,setAutoEnable:i,toggle:u,throttle:s,debounce:a,requestFrame:r,cancelFrame:c}}const Dt=["title"],Nt={class:"flex items-center gap-1.5 text-sm"},Ht={key:0,class:"flex items-center gap-1.5 text-sm"},Wt={key:1,class:"flex items-center gap-1.5 text-sm text-red-400"},Vt={class:"font-mono"},Ut=te({__name:"RecordingHealth",setup(o,{expose:t}){const n=ee(),{isActive:y}=jt(),i=h({}),u=h(0),s=h(0),a=h(0);let r=null;function c(){const _={};let S=0;n.inputs.forEach($=>{_[$.id]=$.bytesWritten;const T=i.value[$.id]||0;S+=$.bytesWritten-T});const j=y.value?2:1;u.value=Math.round(S/(1024*1024)/j*10)/10,i.value=_}J(()=>n.isRecording,_=>{if(_){i.value={},u.value=0,s.value=0,a.value=0;const S=y.value?2e3:1e3;r=window.setInterval(c,S)}else r&&(clearInterval(r),r=null)},{immediate:!0}),J(y,_=>{if(n.isRecording&&r){clearInterval(r);const S=_?2e3:1e3;r=window.setInterval(c,S)}}),_e(()=>{r&&clearInterval(r)});const l=P(()=>n.isRecording?a.value>0||s.value>90?"critical":u.value<1||s.value>70?"warning":"healthy":"idle"),R=P(()=>{switch(l.value){case"healthy":return"emerald";case"warning":return"amber";case"critical":return"red";default:return"zinc"}});P(()=>{switch(l.value){case"healthy":return"Healthy";case"warning":return"Warning";case"critical":return"Critical";default:return"Idle"}});const m=P(()=>{if(!n.isRecording)return"Not recording";const _=[`Write speed: ${u.value} MB/s`,`Buffer: ${s.value}%`];return a.value>0&&_.push(`Frames dropped: ${a.value}`),_.join(`
`)});function k(_){_.buffer_percent!==void 0&&(s.value=_.buffer_percent),_.frames_dropped!==void 0&&(a.value=_.frames_dropped)}return t({updateFromMetrics:k}),(_,S)=>W(n).isRecording?(d(),v("div",{key:0,class:F(["flex items-center gap-3 px-3 py-1.5 rounded-lg transition-colors cursor-help",{"bg-emerald-500/10":R.value==="emerald","bg-amber-500/10":R.value==="amber","bg-red-500/10":R.value==="red"}]),title:m.value},[e("span",{class:F(["w-2 h-2 rounded-full",R.value==="emerald"?"bg-emerald-500":"",R.value==="amber"?"bg-amber-500 animate-pulse":"",R.value==="red"?"bg-red-500 animate-pulse":""])},null,2),e("div",Nt,[S[0]||(S[0]=e("svg",{class:"w-3.5 h-3.5 text-preke-text-dim",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})],-1)),e("span",{class:F(["font-mono",R.value==="emerald"?"text-emerald-400":"",R.value==="amber"?"text-amber-400":"",R.value==="red"?"text-red-400":""])},x(u.value)+" MB/s ",3)]),s.value>0?(d(),v("div",Ht,[S[1]||(S[1]=e("span",{class:"text-preke-text-dim"},"Buf:",-1)),e("span",{class:F(["font-mono",s.value<50?"text-emerald-400":"",s.value>=50&&s.value<80?"text-amber-400":"",s.value>=80?"text-red-400":""])},x(s.value)+"% ",3)])):N("",!0),a.value>0?(d(),v("div",Wt,[S[2]||(S[2]=e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),e("span",Vt,x(a.value)+" dropped",1)])):N("",!0)],10,Dt)):N("",!0)}});function Ee(o){return o.startsWith("192.168.")||o.startsWith("10.")||o.startsWith("172.")||o.startsWith("100.")||o==="127.0.0.1"||o==="localhost"}const Ft=5,It=1e3,Ot=3e4,Gt=()=>typeof window<"u"&&window.__NETWORK_DEBUG__===!0,Le=new Map,zt=1e3;function me(o,t,...n){if(!Gt())return;const y=Date.now(),i=Le.get(o)||0;y-i<zt||(Le.set(o,y),console.log(`[NETWORK DEBUG ${o}] ${t}`,...n))}const X=new Map,ce=new Map;async function qt(o){const t=be(),n=Ne();if(t&&!n)try{return`http://${new URL(t).hostname}:8889/${o}/whep`}catch{console.warn("[WHEP Manager] Invalid device URL, falling back to FRP")}if(!(typeof window<"u"&&!!window.electronAPI)&&typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"))return console.log("[WHEP Manager] Local device mode, using localhost MediaMTX"),`http://localhost:8889/${o}/whep`;if(typeof window<"u"&&window.location.hostname==="app.itagenten.no")return console.log("[WHEP Manager] Browser access from app.itagenten.no, using same-domain proxy"),`https://app.itagenten.no/${o}/whep`;const{getFrpUrl:i}=await Ge(async()=>{const{getFrpUrl:s}=await import("./index-DC_9t8hQ.js").then(a=>a.a4);return{getFrpUrl:s}},__vite__mapDeps([0,1])),u=await i();if(u)try{const s=new URL(u);return s.hostname.includes("itagenten.no")?`https://app.itagenten.no/${o}/whep`:s.hostname.includes("mediamtx")?`${u}/${o}/whep`:`https://${s.hostname.replace("api","mediamtx")}/${o}/whep`}catch{console.warn("[WHEP Manager] Invalid FRP URL, cannot build WHEP URL")}throw new Error("No device configured and no FRP fallback available")}async function Kt(o,t){const n=X.get(t);if(!n)return"unknown";try{const u=new URL(n.whepUrl).hostname;if(u.includes("itagenten.no"))return console.log(`[WHEP Manager ${t}] Detected relay (FRP URL)`),"relay";if(Ee(u))return console.log(`[WHEP Manager ${t}] Detected P2P (private IP: ${u})`),"p2p"}catch(i){console.warn(`[WHEP Manager ${t}] Failed to parse WHEP URL:`,i)}try{const i=await o.getStats();for(const u of i.values())if(u.type==="candidate-pair"&&u.state==="succeeded"){const s=i.get(u.remoteCandidateId);if((s==null?void 0:s.candidateType)==="relay")return console.log(`[WHEP Manager ${t}] Detected relay (TURN candidate)`),"relay";const a=s==null?void 0:s.address;if(a&&!Ee(a))return console.log(`[WHEP Manager ${t}] Detected relay (public IP: ${a})`),"relay"}}catch(i){console.warn(`[WHEP Manager ${t}] Failed to get WebRTC stats:`,i)}return be()&&!Ne()?(console.log(`[WHEP Manager ${t}] Assuming P2P (direct device URL configured)`),"p2p"):"unknown"}function ne(o){const t=X.get(o);if(!t)return;const n=ce.get(o);n&&n.forEach(y=>y(t))}function xe(o){const t=X.get(o);if(!t)return;if(t.reconnectAttempts>=Ft){console.error(`[WHEP Manager ${o}] Max reconnect attempts reached`),t.state="failed",ne(o);return}t.reconnectAttempts++;const n=Math.min(It*Math.pow(2,t.reconnectAttempts-1),Ot),y=n*.2*(Math.random()*2-1),i=Math.max(100,Math.round(n+y));me("WHEP",`Camera ${o}: Reconnect #${t.reconnectAttempts} in ${i}ms (base: ${n}ms)`),console.log(`[WHEP Manager ${o}] Scheduling reconnect #${t.reconnectAttempts} in ${i}ms`),t.state="connecting",ne(o),t.reconnectTimeout&&clearTimeout(t.reconnectTimeout),t.reconnectTimeout=setTimeout(()=>{Te(o)},i)}async function Te(o){let t=X.get(o);if(t&&(t.state==="connected"||t.state==="connecting"))return console.log(`[WHEP Manager ${o}] Reusing existing connection (state: ${t.state})`),t;if(t!=null&&t.isConnecting){for(me("WHEP",`Camera ${o}: Connection already in progress, skipping duplicate attempt`),console.log(`[WHEP Manager ${o}] Connection already in progress, waiting...`);t.isConnecting&&t.state==="connecting"&&(await new Promise(r=>setTimeout(r,100)),t=X.get(o),!!t););if(t)return t}const y=!(typeof window<"u"&&!!window.electronAPI)&&typeof window<"u"&&(window.location.hostname==="app.itagenten.no"||window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1");let i=be();if(y)console.log(`[WHEP Manager ${o}] Browser-only mode (no Electron) - using appropriate proxy`);else{let r=0;for(;!i&&r<5;)console.log(`[WHEP Manager ${o}] No device URL yet, waiting... (attempt ${r+1})`),await new Promise(c=>setTimeout(c,100)),i=be(),r++}const u=performance.now(),s=await qt(o);me("WHEP",`Camera ${o}: Creating connection to ${s}`),console.log(`[WHEP Manager ${o}] Creating connection to: ${s}`),console.log(`[WHEP Manager ${o}] Device URL was: ${i||"none (browser mode)"}`),t!=null&&t.peerConnection&&t.peerConnection.close(),t!=null&&t.disconnectedTimeout&&(clearTimeout(t.disconnectedTimeout),t.disconnectedTimeout=null),t&&(t.isConnecting=!0);const a=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun.cloudflare.com:3478"}]});t?(t.peerConnection=a,t.state="connecting",t.whepUrl=s,t.mediaStream=null,t.connectionType="unknown",t.connectionStartTime=u,t.isConnecting=!0):(t={cameraId:o,peerConnection:a,mediaStream:null,state:"connecting",connectionType:"unknown",refCount:0,whepUrl:s,lastConnectedAt:null,reconnectAttempts:0,reconnectTimeout:null,disconnectedTimeout:null,connectionStartTime:u,isConnecting:!0},X.set(o,t)),a.ontrack=r=>{if(r.streams[0]){t.mediaStream=r.streams[0],console.log(`[WHEP Manager ${o}] Received media stream`);try{const c=a.getReceivers();for(const l of c)l.track.kind==="video"&&"jitterBufferTarget"in l&&(l.jitterBufferTarget=100,console.log(`[WHEP Manager ${o}] Set jitterBufferTarget to 100ms for low latency`))}catch(c){console.warn(`[WHEP Manager ${o}] Could not set jitterBufferTarget:`,c)}ne(o)}},a.oniceconnectionstatechange=async()=>{const r=a.iceConnectionState;if(me("WHEP",`Camera ${o}: ICE state changed to ${r}`),console.log(`[WHEP Manager ${o}] ICE state: ${r}`),r==="connected"||r==="completed"){t.state="connected",t.lastConnectedAt=Date.now(),t.reconnectAttempts=0,t.isConnecting=!1,t.connectionType=await Kt(a,o),t.disconnectedTimeout&&(clearTimeout(t.disconnectedTimeout),t.disconnectedTimeout=null);const c=t.connectionStartTime?Math.round(performance.now()-t.connectionStartTime):0;console.log(`[WHEP Manager ${o}] Connected (${t.connectionType}) in ${c}ms`),ne(o)}else r==="failed"?(t.state="failed",t.connectionType="unknown",t.isConnecting=!1,ne(o),t.refCount>0&&xe(o)):r==="disconnected"&&(t.disconnectedTimeout&&clearTimeout(t.disconnectedTimeout),t.disconnectedTimeout=setTimeout(()=>{(a.iceConnectionState==="disconnected"||a.iceConnectionState==="failed")&&(t.state="disconnected",t.isConnecting=!1,ne(o),t.refCount>0&&xe(o)),t.disconnectedTimeout=null},3e3))},a.addTransceiver("video",{direction:"recvonly"}),a.addTransceiver("audio",{direction:"recvonly"});try{const r=await a.createOffer();await a.setLocalDescription(r);const c=await fetch(s,{method:"POST",headers:{"Content-Type":"application/sdp"},body:r.sdp});if(!c.ok)throw new Error(`WHEP request failed: ${c.status}`);const l=await c.text();await a.setRemoteDescription({type:"answer",sdp:l})}catch(r){console.error(`[WHEP Manager ${o}] Connection error:`,r),t.state="failed",t.isConnecting=!1,ne(o),t.refCount>0&&xe(o)}return t}async function Yt(o,t){ce.has(o)||ce.set(o,new Set),ce.get(o).add(t);let n=X.get(o);return(!n||n.state==="failed"||n.state==="disconnected")&&(n=await Te(o)),n.refCount++,console.log(`[WHEP Manager ${o}] Acquired connection (refCount: ${n.refCount})`),t(n),n}function Qt(o,t){const n=X.get(o);if(!n)return;const y=ce.get(o);y&&(y.delete(t),y.size===0&&ce.delete(o)),n.refCount=Math.max(0,n.refCount-1),console.log(`[WHEP Manager ${o}] Released connection (refCount: ${n.refCount})`),n.refCount===0&&(console.log(`[WHEP Manager ${o}] Closing unused connection`),n.reconnectTimeout&&clearTimeout(n.reconnectTimeout),n.disconnectedTimeout&&clearTimeout(n.disconnectedTimeout),n.peerConnection.close(),X.delete(o))}function $e(o){const t=X.get(o);t&&(console.log(`[WHEP Manager ${o}] Force reconnecting...`),t.reconnectAttempts=0,Te(o))}const Zt={class:"relative w-full h-full bg-black"},Xt=["title"],Jt={key:1,class:"absolute inset-0 flex items-center justify-center bg-black/50"},en={class:"text-center"},tn={class:"text-xs text-amber-400"},nn={key:3,class:"absolute inset-0 flex items-center justify-center bg-black/80"},on={class:"text-center text-preke-text-dim"},an={class:"text-sm"},Ae=te({__name:"InputPreview",props:{inputId:{},protocol:{}},emits:["videoReady","aspectRatio"],setup(o,{emit:t}){const n=o,y=t,i=ee();let u=!1;const s=P(()=>i.status==="recording"),a=h(null),r=h(!0),c=h(null),l=h("unknown"),R=h(!1),m=h(0);let k=null;function _(T){switch(console.log(`[InputPreview ${n.inputId}] Connection update:`,{state:T.state,type:T.connectionType,hasStream:!!T.mediaStream}),l.value=T.connectionType,m.value=T.reconnectAttempts,T.state){case"connecting":r.value=!0,c.value=null,R.value=T.reconnectAttempts>0;break;case"connected":r.value=!1,c.value=null,R.value=!1,T.mediaStream&&a.value&&a.value.srcObject!==T.mediaStream&&(a.value.srcObject=T.mediaStream,a.value.play().catch(E=>{console.warn(`[InputPreview ${n.inputId}] Autoplay prevented:`,E)}),u||(a.value.onloadeddata=()=>{if(!u&&a.value){u=!0;const E=a.value.videoWidth,O=a.value.videoHeight,w=E&&O?E/O:16/9;console.log(`[InputPreview ${n.inputId}] Video ready (${E}x${O}, ratio: ${w.toFixed(3)})`),y("aspectRatio",w),y("videoReady")}}));break;case"disconnected":R.value=!0,c.value=`Reconnecting... (${T.reconnectAttempts}/5)`;break;case"failed":r.value=!1,R.value=!1,c.value="Connection failed after multiple attempts";break}}async function S(){if(a.value){$(),r.value=!0,c.value=null,k=_;try{await Yt(n.inputId,k)}catch(T){console.error(`[InputPreview ${n.inputId}] Failed to acquire connection:`,T),c.value=T instanceof Error?T.message:"Failed to connect",r.value=!1}}}function j(){$e(n.inputId)}function $(){k&&(Qt(n.inputId,k),k=null)}return se(()=>{S()}),J(()=>n.inputId,()=>{S()}),J(s,(T,E)=>{E&&!T&&c.value?(console.log("[InputPreview] Recording stopped, reconnecting preview..."),$e(n.inputId)):!E&&T&&(console.log("[InputPreview] Recording started, will try to reconnect preview after delay..."),setTimeout(()=>{s.value&&(console.log("[InputPreview] Attempting to reconnect preview during recording..."),$e(n.inputId))},2e3))}),_e(()=>{$()}),(T,E)=>(d(),v("div",Zt,[e("video",{ref_key:"videoRef",ref:a,autoplay:"",muted:"",playsinline:"",class:"w-full h-full object-contain"},null,512),!r.value&&!c.value&&l.value!=="unknown"?(d(),v("div",{key:0,class:F(["absolute top-1 right-1 px-1.5 py-0.5 text-[10px] font-medium rounded",l.value==="p2p"?"bg-emerald-500/80 text-white":"bg-amber-500/80 text-white"]),title:l.value==="p2p"?"Direct P2P connection":"Relay connection (FRP)"},x(l.value==="p2p"?"P2P":"RELAY"),11,Xt)):N("",!0),r.value&&!R.value?(d(),v("div",Jt,[...E[0]||(E[0]=[e("div",{class:"animate-spin w-6 h-6 border-2 border-white border-t-transparent rounded-full"},null,-1)])])):N("",!0),R.value?(d(),v("div",{key:2,class:"absolute inset-0 flex items-center justify-center bg-black/70 cursor-pointer",onClick:j,title:"Click to force reconnect"},[e("div",en,[E[1]||(E[1]=e("div",{class:"animate-spin w-5 h-5 border-2 border-amber-400 border-t-transparent rounded-full mx-auto mb-2"},null,-1)),e("p",tn,x(c.value||"Reconnecting..."),1),E[2]||(E[2]=e("p",{class:"text-xs text-amber-400/60 mt-1"},"Tap to retry",-1))])])):c.value&&!r.value?(d(),v("div",nn,[e("div",on,[e("p",an,x(c.value),1),e("button",{onClick:j,class:"mt-2 text-xs text-preke-gold hover:underline"}," Retry ")])])):N("",!0)]))}}),sn={key:0,class:"h-full flex items-center justify-center"},rn={key:1,class:"input-grid"},ln={key:0,class:"input-grid__warning"},cn=["data-count"],un=["title","onClick"],dn={key:1,class:"w-full h-full flex items-center justify-center bg-preke-bg-surface"},fn={class:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/80 to-transparent p-4"},pn={class:"flex items-center justify-between"},vn={class:"flex items-center gap-2"},mn={class:"font-medium"},gn={key:0,class:"flex items-center gap-2 text-sm"},bn={class:"text-preke-text-dim"},_n={class:"enlarged-modal__info"},hn={class:"flex items-center gap-3"},kn={class:"font-semibold text-lg"},yn={key:0,class:"px-2 py-0.5 text-xs font-bold bg-preke-red/20 text-preke-red rounded"},wn={class:"flex items-center gap-4 text-sm"},Cn={class:"text-preke-text-dim"},xn=te({__name:"InputGrid",emits:["allVideosReady"],setup(o,{emit:t}){const n=ee(),y=Se(),i=t,u=h(new Set),s=h(null);function a(w){s.value=w}function r(){s.value=null}const c=h({});function l(w){u.value.add(w),console.log(`[InputGrid] Video ready: ${w} (${u.value.size}/${_.value.length})`),u.value.size>=_.value.length&&(console.log("[InputGrid] All videos ready!"),i("allVideosReady"))}function R(w,L){c.value[w]=L,console.log(`[InputGrid] Aspect ratio for ${w}: ${L.toFixed(3)}`)}function m(w){return{aspectRatio:`${c.value[w]||1.7777777777777777}`}}J(()=>_.value.length,()=>{u.value.clear()});const k=P(()=>{var w;return((w=y.capabilities)==null?void 0:w.current_mode)==="recorder"}),_=P(()=>n.inputs.filter(w=>w.hasSignal)),S=P(()=>n.framerateMismatch);function j(w){return w.isRecording?"border-preke-red ring-2 ring-preke-red/20":w.hasSignal?"border-emerald-500/50 hover:border-emerald-500":"border-preke-bg-surface/50 opacity-60"}function $(w){return w.hasSignal?w.framerate>=29?"excellent":w.framerate>=24?"good":"unstable":"none"}function T(w){switch($(w)){case"excellent":return"text-emerald-400";case"good":return"text-emerald-400";case"unstable":return"text-amber-400";case"none":return"text-preke-text-dim"}}function E(w){if(w===0)return"0 B";const L=1024,A=["B","KB","MB","GB"],V=Math.floor(Math.log(w)/Math.log(L));return parseFloat((w/Math.pow(L,V)).toFixed(1))+" "+A[V]}function O(w){if(!w.hasSignal)return`${w.label}: No signal detected`;const L=[`${w.label}`,`Resolution: ${w.resolution}`,`Framerate: ${w.framerate} fps`,`Quality: ${$(w)}`];return w.isRecording&&L.push(`Written: ${E(w.bytesWritten)}`),L.join(`
`)}return(w,L)=>_.value.length===0?(d(),v("div",sn,[...L[1]||(L[1]=[He('<div class="text-center text-preke-text-dim" data-v-53f60619><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-53f60619><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" data-v-53f60619></path></svg><p class="text-lg font-medium" data-v-53f60619>No Video Sources Connected</p><p class="text-sm mt-2" data-v-53f60619>Connect HDMI cables to begin recording</p></div>',1)])])):(d(),v("div",rn,[S.value?(d(),v("div",ln,[L[2]||(L[2]=e("svg",{class:"w-4 h-4 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),e("span",null,x(S.value),1)])):N("",!0),e("div",{class:"input-grid__container","data-count":_.value.length},[(d(!0),v(Y,null,ue(_.value,A=>(d(),v("div",{key:A.id,class:F(["input-grid__tile",j(A)]),style:ze(m(A.id)),title:O(A),onClick:V=>a(A)},[k.value?(d(),le(Ae,{key:0,"input-id":A.id,class:"w-full h-full",onVideoReady:V=>l(A.id),onAspectRatio:V=>R(A.id,V)},null,8,["input-id","onVideoReady","onAspectRatio"])):(d(),v("div",dn,[...L[3]||(L[3]=[e("div",{class:"text-center"},[e("svg",{class:"w-8 h-8 mx-auto mb-2 text-preke-text-dim/50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})]),e("span",{class:"text-xs text-preke-text-dim/70"},"Mixer mode")],-1)])])),e("div",fn,[e("div",pn,[e("div",vn,[e("span",{class:F(["w-2 h-2 rounded-full transition-colors",{"bg-emerald-500":$(A)==="excellent"||$(A)==="good","bg-amber-500 animate-pulse":$(A)==="unstable","bg-preke-text-dim":$(A)==="none"}])},null,2),e("span",mn,x(A.label),1)]),A.hasSignal?(d(),v("div",gn,[e("span",bn,x(A.resolution),1),e("span",{class:F(T(A))},x(A.framerate)+"fps",3)])):N("",!0)])])],14,un))),128))],8,cn),(d(),le(je,{to:"body"},[G(ge,{name:"enlarged"},{default:ae(()=>[s.value?(d(),v("div",{key:0,class:"enlarged-modal",onClick:r},[e("div",{class:"enlarged-modal__content",onClick:L[0]||(L[0]=Be(()=>{},["stop"]))},[k.value?(d(),le(Ae,{key:0,"input-id":s.value.id,class:"w-full h-full"},null,8,["input-id"])):N("",!0),e("div",_n,[e("div",hn,[e("span",{class:F(["w-2.5 h-2.5 rounded-full",{"bg-emerald-500":$(s.value)==="excellent"||$(s.value)==="good","bg-amber-500 animate-pulse":$(s.value)==="unstable","bg-preke-text-dim":$(s.value)==="none"}])},null,2),e("span",kn,x(s.value.label),1),s.value.isRecording?(d(),v("span",yn," REC ")):N("",!0)]),e("div",wn,[e("span",Cn,x(s.value.resolution),1),e("span",{class:F(T(s.value))},x(s.value.framerate)+"fps",3)])]),e("button",{class:"enlarged-modal__close",onClick:r,title:"Close (or click outside)"},[...L[4]||(L[4]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])):N("",!0)]),_:1})]))]))}}),$n=de(xn,[["__scopeId","data-v-53f60619"]]),Rn={key:0,class:"py-8 text-center text-preke-text-muted"},Sn={key:1,class:"camera-setup"},Tn={class:"camera-list"},Pn={class:"list-header"},Mn=["disabled"],En={key:0,class:"empty-state"},Ln={key:1,class:"camera-items"},An={class:"camera-item__info"},Bn={class:"camera-item__header"},jn={class:"camera-item__name"},Dn={class:"camera-item__details"},Nn={class:"camera-item__type"},Hn={class:"camera-item__ip"},Wn={class:"camera-item__actions"},Vn=["onClick","disabled"],Un={key:0,class:"btn-icon-sm",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Fn={key:1,class:"spinner"},In=["onClick","disabled"],On=["onClick","disabled"],Gn={key:0,class:"camera-form"},zn={class:"form-header"},qn={class:"form-title"},Kn={class:"form-content"},Yn={class:"form-group"},Qn={class:"form-group"},Zn=["value"],Xn={class:"form-group"},Jn={class:"form-group"},eo=["placeholder"],to={class:"form-hint"},no={class:"form-group"},oo={class:"form-checkbox"},ao={class:"form-actions"},so={class:"flex items-center justify-between w-full"},ro={key:0,class:"text-sm text-amber-400"},lo={key:1,class:"text-sm text-preke-text-muted"},io={class:"flex gap-3"},co=["disabled"],uo=te({__name:"CameraSetupModal",emits:["close","updated"],setup(o,{expose:t,emit:n}){const y=n,i=h(null),u=We(),s=h(!1),a=h(!1),r=h(null),c=h([]),l=h(null),R=[{value:"blackmagic",label:"Blackmagic Design Studio Camera 4K Pro"},{value:"obsbot_tail2",label:"OBSbot Tail 2"}],m=h({name:"",type:"blackmagic",ip:"",port:void 0,enabled:!0}),k={blackmagic:80,obsbot_tail2:52381},_=P(()=>l.value!==null),S=h(!1);async function j(){s.value=!0;try{const g=await ve.cameras.getConfig();c.value=g.cameras.map(f=>({name:f.name,type:f.type,ip:f.ip,port:f.port,enabled:f.enabled??!0})),S.value=!1}catch(g){console.error("[CameraSetup] Failed to load config:",g),u.error("Failed to load camera configuration")}finally{s.value=!1}}function $(){m.value={name:"",type:"blackmagic",ip:"",port:void 0,enabled:!0},l.value=null}function T(g){l.value=g,m.value={...c.value[g]}}function E(){$()}function O(){$(),l.value=-1}async function w(g){confirm(`Delete camera "${c.value[g].name}"?`)&&(c.value.splice(g,1),S.value=!0,await D())}async function L(g){r.value=g.name;try{(await ve.cameras.getStatus(g.name)).connected?u.success(`${g.name} is connected!`):u.warning(`${g.name} is not connected`)}catch{try{const M=await fetch(`http://${g.ip}:${g.port||k[g.type]}/`,{method:"HEAD",mode:"no-cors",signal:AbortSignal.timeout(3e3)});u.info(`${g.name}: IP ${g.ip} is reachable`)}catch{u.error(`${g.name}: Cannot reach ${g.ip}`)}}finally{r.value=null}}function A(){return m.value.name.trim()?m.value.ip.trim()?/^(\d{1,3}\.){3}\d{1,3}$/.test(m.value.ip)?c.value.findIndex((M,Q)=>M.name===m.value.name&&Q!==l.value)>=0?(u.error("Camera name already exists"),!1):!0:(u.error("Invalid IP address format"),!1):(u.error("Camera IP address is required"),!1):(u.error("Camera name is required"),!1)}function V(){A()&&(m.value.port||(m.value.port=k[m.value.type]),l.value===-1?c.value.push({...m.value}):l.value!==null&&l.value>=0&&(c.value[l.value]={...m.value}),S.value=!0,$())}async function D(){a.value=!0;try{await ve.cameras.updateConfig(c.value),u.success("Camera configuration saved!"),S.value=!1,y("updated")}catch(g){console.error("[CameraSetup] Failed to save config:",g),u.error("Failed to save configuration: "+(g.message||"Unknown error"))}finally{a.value=!1}}function b(){var g;(g=i.value)==null||g.open(),j()}function B(){var g;S.value&&!confirm("You have unsaved changes. Close anyway?")||((g=i.value)==null||g.close(),$(),S.value=!1,y("close"))}return t({open:b,close:B}),se(()=>{j()}),(g,f)=>(d(),le(Ke,{ref_key:"modalRef",ref:i,title:"Camera Setup",size:"xl",onClose:B},{header:ae(()=>[...f[5]||(f[5]=[e("div",{class:"flex items-center justify-between w-full"},[e("div",null,[e("h2",{class:"text-lg font-semibold text-preke-text"},"Camera Setup"),e("p",{class:"text-sm text-preke-text-muted mt-1"}," Configure external cameras for control ")])],-1)])]),footer:ae(()=>[e("div",so,[S.value?(d(),v("div",ro," You have unsaved changes ")):(d(),v("div",lo,x(c.value.length)+" camera"+x(c.value.length!==1?"s":"")+" configured ",1)),e("div",io,[e("button",{onClick:B,class:"btn-secondary"}," Close "),e("button",{onClick:D,disabled:!S.value||a.value,class:"btn-primary"},x(a.value?"Saving...":"Save Configuration"),9,co)])])]),default:ae(()=>[s.value?(d(),v("div",Rn," Loading camera configuration... ")):(d(),v("div",Sn,[e("div",Tn,[e("div",Pn,[f[7]||(f[7]=e("h3",{class:"list-title"},"Configured Cameras",-1)),e("button",{onClick:O,class:"btn-add",disabled:_.value},[...f[6]||(f[6]=[e("svg",{class:"btn-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),oe(" Add Camera ",-1)])],8,Mn)]),c.value.length===0&&!_.value?(d(),v("div",En,[...f[8]||(f[8]=[e("svg",{class:"empty-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1),e("p",{class:"empty-text"},"No cameras configured",-1),e("p",{class:"empty-hint"},'Click "Add Camera" to get started',-1)])])):(d(),v("div",Ln,[(d(!0),v(Y,null,ue(c.value,(M,Q)=>{var re;return d(),v("div",{key:Q,class:F(["camera-item",{"camera-item--disabled":!M.enabled}])},[e("div",An,[e("div",Bn,[e("span",jn,x(M.name),1),e("span",{class:F(["camera-item__badge",M.enabled?"camera-item__badge--enabled":"camera-item__badge--disabled"])},x(M.enabled?"Enabled":"Disabled"),3)]),e("div",Dn,[e("span",Nn,x(((re=R.find(C=>C.value===M.type))==null?void 0:re.label)||M.type),1),e("span",Hn,x(M.ip)+":"+x(M.port||k[M.type]),1)])]),e("div",Wn,[e("button",{onClick:C=>L(M),disabled:r.value===M.name,class:"btn-test",title:"Test Connection"},[r.value!==M.name?(d(),v("svg",Un,[...f[9]||(f[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"},null,-1)])])):(d(),v("span",Fn))],8,Vn),e("button",{onClick:C=>T(Q),disabled:_.value,class:"btn-edit",title:"Edit"},[...f[10]||(f[10]=[e("svg",{class:"btn-icon-sm",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,In),e("button",{onClick:C=>w(Q),disabled:_.value,class:"btn-delete",title:"Delete"},[...f[11]||(f[11]=[e("svg",{class:"btn-icon-sm",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,On)])],2)}),128))]))]),_.value?(d(),v("div",Gn,[e("div",zn,[e("h3",qn,x(l.value===-1?"Add Camera":"Edit Camera"),1),e("button",{onClick:E,class:"btn-cancel-form"},"Cancel")]),e("div",Kn,[e("div",Yn,[f[12]||(f[12]=e("label",{class:"form-label"},"Camera Name *",-1)),K(e("input",{"onUpdate:modelValue":f[0]||(f[0]=M=>m.value.name=M),type:"text",class:"form-input",placeholder:"e.g., BMD Cam 1"},null,512),[[ie,m.value.name]])]),e("div",Qn,[f[13]||(f[13]=e("label",{class:"form-label"},"Camera Type *",-1)),K(e("select",{"onUpdate:modelValue":f[1]||(f[1]=M=>m.value.type=M),class:"form-input"},[(d(),v(Y,null,ue(R,M=>e("option",{key:M.value,value:M.value},x(M.label),9,Zn)),64))],512),[[Re,m.value.type]])]),e("div",Xn,[f[14]||(f[14]=e("label",{class:"form-label"},"IP Address *",-1)),K(e("input",{"onUpdate:modelValue":f[2]||(f[2]=M=>m.value.ip=M),type:"text",class:"form-input",placeholder:"192.168.1.101"},null,512),[[ie,m.value.ip]]),f[15]||(f[15]=e("p",{class:"form-hint"},"Camera's network IP address",-1))]),e("div",Jn,[f[16]||(f[16]=e("label",{class:"form-label"},"Port",-1)),K(e("input",{"onUpdate:modelValue":f[3]||(f[3]=M=>m.value.port=M),type:"number",class:"form-input",placeholder:String(k[m.value.type])},null,8,eo),[[ie,m.value.port,void 0,{number:!0}]]),e("p",to,"Default: "+x(k[m.value.type])+" for "+x(m.value.type),1)]),e("div",no,[e("label",oo,[K(e("input",{"onUpdate:modelValue":f[4]||(f[4]=M=>m.value.enabled=M),type:"checkbox",class:"checkbox"},null,512),[[qe,m.value.enabled]]),f[17]||(f[17]=e("span",null,"Enabled",-1))]),f[18]||(f[18]=e("p",{class:"form-hint"},"Disable to keep configuration but not use the camera",-1))]),e("div",ao,[e("button",{onClick:V,class:"btn-save-form"},x(l.value===-1?"Add Camera":"Update Camera"),1),e("button",{onClick:E,class:"btn-cancel-form"}," Cancel ")])])])):N("",!0)]))]),_:1},512))}}),fo=de(uo,[["__scopeId","data-v-d42e0adf"]]),po={class:"sidebar"},vo={class:"sidebar__card sidebar__card--header"},mo={class:"connection-row"},go={class:"connection-status"},bo={class:"connection-label"},_o={key:0,class:"connection-latency"},ho=["disabled"],ko={class:"sidebar__card sidebar__card--recording"},yo={class:"recording__duration"},wo={class:"recording__meta"},Co={key:0,class:"sidebar__card sidebar__card--warning"},xo={class:"warning__text"},$o={key:1,class:"sidebar__card sidebar__card--davinci"},Ro={class:"davinci__buttons"},So=["disabled"],To=["disabled"],Po=["disabled"],Mo={class:"sidebar__card"},Eo={key:0,class:"cameras"},Lo={class:"camera__header"},Ao=["onClick","disabled"],Bo={key:1,class:"cameras-empty"},jo={key:0,class:"sidebar__card"},Do={key:1,class:"sidebar__card"},No=te({__name:"SessionInfoV2",setup(o){const t=Ve(),n=ee(),y=Se(),i=We(),{state:u,latencyMs:s}=Ye(),{connectionMethod:a}=Qe(),r=P(()=>{const C=u.value==="connected",p=u.value==="connecting",H=u.value==="degraded";if(C){let U="";return a.value==="relay"?U="Relay":a.value==="p2p"?U="P2P":a.value==="local"&&(U="Local"),{status:"online",color:"green",label:U||"Connected",latency:s.value,pulse:!1}}return p?{status:"connecting",color:"amber",label:"Connecting...",latency:null,pulse:!0}:H?{status:"degraded",color:"amber",label:"Slow",latency:s.value,pulse:!1}:{status:"offline",color:"red",label:"Offline",latency:null,pulse:!0}}),c=P(()=>n.currentSession),l=P(()=>n.activeInputs),R=P(()=>n.isRecording),m=P(()=>n.inputs.filter(C=>C.isRecording)),k=h("");se(()=>{const p=new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}).replace(/\//g,".");k.value=`Session ${p}`});const{cameras:_,loadCameras:S}=nt(),j=h(null),$=h(null),T=h(null),E=h(!1);se(async()=>{await S()});function O(C){var p;j.value=C,(p=$.value)==null||p.open()}function w(){j.value=null}function L(){var C;(C=T.value)==null||C.open()}function A(){S()}const V=P(()=>{const C=y.capabilities;if(!C)return null;const p=C.storage_total_gb||1,H=C.storage_available_gb||0,U=p-H,fe=Math.round(U/p*100),Ue=(l.value.length||1)*8,Fe=H/Ue;return{freeGB:Math.round(H),totalGB:Math.round(p),percent:fe,hoursRemaining:Math.round(Fe*10)/10,isLow:fe>85,isCritical:fe>95}});function D(){t.push({name:"admin",query:{tab:"settings"}})}const b=P(()=>Ze()),B=h(!1),g=P(()=>{const C=c.value;return C!=null&&C.id?`Preke_${C.id}`:`Preke_${k.value.replace(/\s+/g,"_")}`}),f=window.electronAPI;async function M(){if(f!=null&&f.davinciOpenProject){B.value=!0,i.info("Opening DaVinci Resolve...");try{const C=await f.davinciOpenProject(g.value);C.success?i.success(`Opened project: ${C.projectName}`):i.error(C.error||"Failed to open DaVinci project")}catch(C){console.error("DaVinci error:",C),i.error("Failed to connect to DaVinci Resolve")}finally{B.value=!1}}}async function Q(){if(f!=null&&f.davinciCreateMulticam){B.value=!0;try{f.davinciOpenProject&&await f.davinciOpenProject(g.value);const C=await f.davinciCreateMulticam({projectName:g.value,clipName:`Multicam_${k.value.replace(/\s+/g,"_")}`,syncMethod:"timecode"});C.success?i.success(`Created timeline: ${C.timelineName}`):i.error(C.error||"Failed to create multicam timeline")}catch(C){console.error("DaVinci error:",C),i.error("Failed to create multicam timeline")}finally{B.value=!1}}}async function re(){if(f!=null&&f.davinciRefreshClips){B.value=!0,i.info("Refreshing growing clips...");try{const C=await f.davinciRefreshClips();if(C.success){const p=C.clipsRefreshed||0;i.success(`Refreshed ${p} clip${p!==1?"s":""}`)}else i.error(C.error||"Failed to refresh clips")}catch(C){console.error("DaVinci refresh error:",C),i.error("Failed to refresh clips")}finally{B.value=!1}}}return(C,p)=>{var H;return d(),v("div",po,[e("div",vo,[e("div",mo,[e("div",go,[e("span",{class:F(["connection-dot",[`connection-dot--${r.value.color}`,{"connection-dot--pulse":r.value.pulse}]])},null,2),e("span",bo,x(r.value.label),1),r.value.latency?(d(),v("span",_o,x(r.value.latency)+"ms ",1)):N("",!0)])]),p[3]||(p[3]=e("div",{class:"sidebar__divider"},null,-1)),p[4]||(p[4]=e("label",{class:"sidebar__label"},"Session Name",-1)),K(e("input",{"onUpdate:modelValue":p[0]||(p[0]=U=>k.value=U),type:"text",class:"sidebar__input",placeholder:"Session 06.01.2026",disabled:R.value},null,8,ho),[[ie,k.value]])]),R.value?(d(),v(Y,{key:0},[e("div",ko,[p[5]||(p[5]=e("div",{class:"recording__header"},[e("span",{class:"recording__dot"}),e("span",{class:"recording__label"},"Recording")],-1)),e("div",yo,x(W(n).formattedDuration),1),e("div",wo,x(m.value.length)+" camera"+x(m.value.length!==1?"s":"")+" recording ",1)]),(H=V.value)!=null&&H.isLow?(d(),v("div",Co,[p[7]||(p[7]=e("span",{class:"warning__icon"},"⚠️",-1)),e("div",xo,[p[6]||(p[6]=e("strong",null,"Low storage",-1)),e("span",null,x(V.value.freeGB)+" GB remaining",1)])])):N("",!0),b.value?(d(),v("div",$o,[p[8]||(p[8]=He('<div class="davinci__header" data-v-9c962cbb><svg class="davinci__icon" viewBox="0 0 24 24" fill="currentColor" data-v-9c962cbb><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" data-v-9c962cbb></path></svg><span class="davinci__label" data-v-9c962cbb>DaVinci Resolve</span></div><p class="davinci__hint" data-v-9c962cbb>Edit while recording (mount R58 recordings via SMB)</p>',2)),e("div",Ro,[e("button",{onClick:M,disabled:B.value,class:"davinci__btn"},x(B.value?"Opening...":"Open Project"),9,So),e("button",{onClick:Q,disabled:B.value,class:"davinci__btn davinci__btn--secondary"}," Create Multicam ",8,To),e("button",{onClick:re,disabled:B.value,class:"davinci__btn davinci__btn--secondary",title:"Refresh growing clips to update duration"},x(B.value?"Refreshing...":"Refresh Clips"),9,Po)])])):N("",!0)],64)):(d(),v(Y,{key:1},[e("div",Mo,[e("div",{class:"sidebar__label"},[p[10]||(p[10]=oe(" Camera Controls ",-1)),e("button",{onClick:L,class:"camera-setup-btn",title:"Setup Cameras"},[...p[9]||(p[9]=[e("svg",{class:"camera-setup-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("circle",{cx:"12",cy:"12",r:"3"})],-1)])])]),W(_).length>0?(d(),v("div",Eo,[(d(!0),v(Y,null,ue(W(_),U=>(d(),v("div",{key:U.name,class:"camera"},[e("div",Lo,[oe(x(U.name)+" ",1),e("span",{class:F(["camera__status",U.connected?"camera__status--connected":"camera__status--disconnected"])},x(U.connected?"●":"○"),3)]),e("button",{class:"camera__control-btn",onClick:fe=>O(U.name),disabled:!U.connected},[...p[11]||(p[11]=[e("svg",{class:"camera__control-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("circle",{cx:"12",cy:"12",r:"3"})],-1),e("span",null,"Controls",-1)])],8,Ao)]))),128))])):(d(),v("div",Bo,[p[12]||(p[12]=e("p",{class:"cameras-empty__text"},"No cameras configured",-1)),e("button",{onClick:L,class:"cameras-empty__btn"}," Setup Cameras ")]))]),G(ot,{ref_key:"cameraModalRef",ref:$,"camera-name":j.value,onClose:w},null,8,["camera-name"]),G(fo,{ref_key:"cameraSetupModalRef",ref:T,onUpdated:A},null,512),E.value?(d(),v("div",jo,[G(at,{"camera-name":j.value,onClose:p[1]||(p[1]=U=>E.value=!1)},null,8,["camera-name"])])):(d(),v("div",Do,[p[14]||(p[14]=e("div",{class:"sidebar__label"},"PTZ Controller",-1)),e("button",{onClick:p[2]||(p[2]=U=>E.value=!0),class:"sidebar__btn",title:"Open PTZ Controller (Gamepad/Joystick)"},[...p[13]||(p[13]=[e("svg",{class:"sidebar__btn-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"1.8"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})],-1),oe(" Open PTZ Controller ",-1)])])])),e("div",{class:"sidebar__card"},[p[16]||(p[16]=e("div",{class:"sidebar__label"},"Quick Actions",-1)),e("button",{onClick:D,class:"sidebar__btn"},[...p[15]||(p[15]=[e("svg",{class:"sidebar__btn-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"1.8"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("circle",{cx:"12",cy:"12",r:"3"})],-1),oe(" Configure Inputs ",-1)])])])],64))])}}}),Ho=de(No,[["__scopeId","data-v-9c962cbb"]]),Wo={class:"h-full flex flex-col"},Vo={class:"recorder-header"},Uo={class:"recorder-header__left"},Fo={class:"recorder-header__title"},Io={key:0,class:"recorder-header__badge"},Oo={class:"flex-1 flex min-h-0 overflow-hidden"},Go={class:"flex-1 min-h-0 min-w-0 p-3 overflow-hidden"},zo={class:"w-72 flex-shrink-0 border-l border-preke-surface-border bg-preke-surface/80 backdrop-blur-lg p-4 overflow-y-auto"},qo={class:"mb-4"},Ko={key:0,class:"mt-2 space-y-3 p-3 bg-preke-bg-base border border-preke-border rounded-lg"},Yo=["value"],Qo={key:0},Zo=["value"],Xo=["value"],Jo={key:1,class:"p-3 bg-preke-bg-elevated border border-preke-border-gold rounded"},ea={class:"flex gap-2"},ta=["disabled"],na={key:2,class:"text-xs text-preke-text-muted"},oa={class:"font-mono"},aa=te({__name:"RecorderView",setup(o){const t=Ve(),n=ee(),y=Se(),{showLeaveConfirmation:i,confirmLeave:u,cancelLeave:s}=rt(),a=h(!1),r=h(!1),c=h(""),l=h(!1);function R(){t.push("/")}const m=P(()=>n.status==="recording"),k=P(()=>n.formattedDuration),_=h(!0),S=h(!1),j=h(!1),$=P(()=>S.value&&j.value);function T(){_.value=!1}async function E(){var b;if(!Xe())return;await y.fetchCapabilities();const D=(b=y.capabilities)==null?void 0:b.current_mode;if(D&&D!=="recorder"){console.log("[Recorder] Not in recorder mode, switching...");try{(await fetch(await Je("/api/mode/recorder"),{method:"POST"})).ok&&(await y.fetchCapabilities(),Z.success("Switched to Recorder mode"))}catch(B){console.warn("[Recorder] Failed to switch mode:",B)}}}function O(){console.log("[Recorder] All videos ready!"),j.value=!0}async function w(){n.selectedClient?await n.loadProjects(n.selectedClient.id):n.projects=[],n.setProject(null)}async function L(D){const b=D.target.value;if(b==="new")r.value=!0;else if(b){const B=n.projects.find(g=>g.id===parseInt(b));n.setProject(B)}else n.setProject(null)}async function A(){if(!n.selectedClient||!c.value.trim()){Z.error("Please enter a project name");return}l.value=!0;try{const D=await n.createProject(n.selectedClient.id,c.value.trim(),n.recordingType||"podcast");await n.loadProjects(n.selectedClient.id),n.setProject(D),r.value=!1,c.value="",Z.success("Project created")}catch(D){Z.error(D.message||"Failed to create project")}finally{l.value=!1}}se(async()=>{const D=performance.now();await Promise.all([E(),n.fetchInputs(),n.fetchStatus(),n.loadClients()]);const b=n.inputs.filter(B=>B.hasSignal).length;console.log(`[Recorder] Data loaded: ${n.inputs.length} inputs, ${b} with signal (${Math.round(performance.now()-D)}ms)`),S.value=!0,b===0&&(j.value=!0)});const V=h(null);return J(i,D=>{var b,B;D?(b=V.value)==null||b.open():(B=V.value)==null||B.close()}),(D,b)=>(d(),v(Y,null,[G(ge,{name:"fade"},{default:ae(()=>[_.value?(d(),le(st,{key:0,mode:"recorder","content-ready":$.value,"min-time":1500,"max-time":5e3,"show-cancel":!0,onReady:T,onCancel:R},null,8,["content-ready"])):N("",!0)]),_:1}),G(ge,{name:"content-fade"},{default:ae(()=>{var B;return[K(e("div",Wo,[e("header",Vo,[e("div",Uo,[e("div",Fo,[e("span",{class:F(["recorder-header__indicator",{"recorder-header__indicator--active":m.value}])},null,2),b[6]||(b[6]=e("span",{class:"recorder-header__label"},"Recorder",-1))]),m.value?(d(),v("span",Io," REC ")):N("",!0),G(Ut)]),G(Et)]),e("div",Oo,[e("div",Go,[G($n,{onAllVideosReady:O})]),e("aside",zo,[e("div",qo,[e("button",{onClick:b[0]||(b[0]=g=>a.value=!a.value),class:"w-full flex items-center justify-between p-3 bg-preke-bg-elevated border border-preke-border rounded-lg hover:border-preke-border-gold transition-colors"},[b[8]||(b[8]=e("span",{class:"text-sm font-medium text-preke-text-dim"},"Project (Optional)",-1)),(d(),v("svg",{class:F(["w-4 h-4 text-preke-text-muted transition-transform",{"rotate-180":a.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...b[7]||(b[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))]),a.value?(d(),v("div",Ko,[e("div",null,[b[10]||(b[10]=e("label",{class:"block text-xs font-medium text-preke-text-subtle mb-1"},"Recording Type",-1)),K(e("select",{"onUpdate:modelValue":b[1]||(b[1]=g=>W(n).recordingType=g),onChange:b[2]||(b[2]=g=>W(n).setRecordingType(g.target.value)),class:"w-full px-3 py-2 bg-preke-bg-elevated border border-preke-border rounded text-sm text-preke-text-primary focus:outline-none focus:ring-2 focus:ring-preke-gold"},[...b[9]||(b[9]=[e("option",{value:null},"Select type...",-1),e("option",{value:"podcast"},"Podcast",-1),e("option",{value:"recording"},"Talking Head",-1),e("option",{value:"course"},"Course",-1),e("option",{value:"webinar"},"Webinar",-1)])],544),[[Re,W(n).recordingType]])]),e("div",null,[b[12]||(b[12]=e("label",{class:"block text-xs font-medium text-preke-text-subtle mb-1"},"Client",-1)),K(e("select",{"onUpdate:modelValue":b[3]||(b[3]=g=>W(n).selectedClient=g),onChange:w,class:"w-full px-3 py-2 bg-preke-bg-elevated border border-preke-border rounded text-sm text-preke-text-primary focus:outline-none focus:ring-2 focus:ring-preke-gold"},[b[11]||(b[11]=e("option",{value:null},"Select client...",-1)),(d(!0),v(Y,null,ue(W(n).clients,g=>(d(),v("option",{key:g.id,value:g},x(g.name),9,Yo))),128))],544),[[Re,W(n).selectedClient]])]),W(n).selectedClient?(d(),v("div",Qo,[b[15]||(b[15]=e("label",{class:"block text-xs font-medium text-preke-text-subtle mb-1"},"Project",-1)),e("select",{value:((B=W(n).selectedProject)==null?void 0:B.id)||"",onChange:L,class:"w-full px-3 py-2 bg-preke-bg-elevated border border-preke-border rounded text-sm text-preke-text-primary focus:outline-none focus:ring-2 focus:ring-preke-gold"},[b[13]||(b[13]=e("option",{value:""},"Select project...",-1)),(d(!0),v(Y,null,ue(W(n).projects,g=>(d(),v("option",{key:g.id,value:g.id},x(g.name),9,Xo))),128)),b[14]||(b[14]=e("option",{value:"new"},"+ Create New Project",-1))],40,Zo)])):N("",!0),r.value?(d(),v("div",Jo,[b[16]||(b[16]=e("label",{class:"block text-xs font-medium text-preke-text-subtle mb-1"},"New Project Name",-1)),K(e("input",{"onUpdate:modelValue":b[4]||(b[4]=g=>c.value=g),type:"text",placeholder:"Project name",class:"w-full px-3 py-2 bg-preke-bg-base border border-preke-border rounded text-sm text-preke-text-primary focus:outline-none focus:ring-2 focus:ring-preke-gold mb-2",onKeyup:tt(A,["enter"])},null,544),[[ie,c.value]]),e("div",ea,[e("button",{onClick:A,disabled:l.value||!c.value.trim(),class:"flex-1 px-3 py-1.5 bg-preke-gold text-preke-bg-base rounded text-xs font-medium hover:bg-preke-gold-hover disabled:opacity-50 disabled:cursor-not-allowed"},x(l.value?"Creating...":"Create"),9,ta),e("button",{onClick:b[5]||(b[5]=g=>{r.value=!1,c.value=""}),class:"flex-1 px-3 py-1.5 bg-preke-bg-base border border-preke-border rounded text-xs font-medium hover:bg-preke-bg-elevated"}," Cancel ")])])):N("",!0),W(n).selectedClient&&W(n).selectedProject?(d(),v("div",na,[e("span",oa,x(W(n).recordingPath),1)])):N("",!0)])):N("",!0)]),G(Ho)])]),G(De,{ref_key:"leaveDialog",ref:V,title:"Recording in Progress",message:`You are currently recording (${k.value}). Leaving will stop the recording and save all files.`,"confirm-text":"Leave and Stop Recording","cancel-text":"Stay",danger:!0,onConfirm:W(u),onCancel:W(s)},null,8,["message","onConfirm","onCancel"])],512),[[et,!_.value]])]}),_:1})],64))}}),ia=de(aa,[["__scopeId","data-v-0c8a0007"]]);export{ia as default};
