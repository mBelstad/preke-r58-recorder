import{d as p,u as h,r as c,o as b,b as x,c as i,a as t,e as g,f as w,n as f,t as d,g as y,h as k,i as a}from"./index-tWw6F2ft.js";const _={class:"h-full flex flex-col items-center justify-center p-8"},C={class:"flex gap-6"},S=["disabled"],M={class:"h-full flex flex-col items-center justify-center gap-4"},B={class:"w-16 h-16 rounded-full bg-r58-recorder/20 flex items-center justify-center group-hover:scale-110 transition-transform"},j={key:0,class:"w-8 h-8 text-r58-recorder animate-spin",fill:"none",viewBox:"0 0 24 24"},V={key:1,class:"w-8 h-8 text-r58-recorder",fill:"currentColor",viewBox:"0 0 24 24"},z={class:"text-center"},$={class:"text-sm text-r58-text-secondary"},E=["disabled"],A={class:"h-full flex flex-col items-center justify-center gap-4"},F={class:"w-16 h-16 rounded-full bg-r58-mixer/20 flex items-center justify-center group-hover:scale-110 transition-transform"},N={key:0,class:"w-8 h-8 text-r58-mixer animate-spin",fill:"none",viewBox:"0 0 24 24"},O={key:1,class:"w-8 h-8 text-r58-mixer",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"2"},P={class:"text-center"},H={class:"text-sm text-r58-text-secondary"},R={key:0,class:"mt-4 text-r58-accent-danger text-sm"},G=p({__name:"StudioView",setup(T){const m=y(),v=h(),o=c("recorder"),r=c(!1),n=c(null);b(async()=>{try{(await fetch(x("/api/mode/idle"),{method:"POST"})).ok&&(console.log("[Studio] Switched to idle mode"),await v.fetchCapabilities())}catch(s){console.warn("[Studio] Failed to switch to idle mode:",s)}});async function u(s){if(!r.value){o.value=s,r.value=!0,n.value=null;try{const e=await fetch(x(`/api/mode/${s}`),{method:"POST"});if(!e.ok){const l=await e.json().catch(()=>({}));throw new Error(l.detail||`Failed to switch to ${s} mode`)}m.push(`/${s}`)}catch(e){const l=e instanceof Error?e.message:"Failed to switch mode";n.value=l,k.error(l),console.error("Mode switch error:",e)}finally{r.value=!1}}}return(s,e)=>(a(),i("div",_,[e[8]||(e[8]=t("h1",{class:"text-4xl font-bold mb-2"},"Preke Studio",-1)),e[9]||(e[9]=t("p",{class:"text-r58-text-secondary mb-12"},"Select a mode to begin",-1)),t("div",C,[t("button",{onClick:e[0]||(e[0]=l=>u("recorder")),disabled:r.value,class:f(["group relative w-64 h-48 rounded-2xl border-2 transition-all duration-300 disabled:opacity-60 disabled:cursor-wait",[o.value==="recorder"?"border-r58-recorder bg-r58-recorder/10":"border-r58-bg-tertiary hover:border-r58-recorder/50 hover:bg-r58-bg-secondary"]])},[t("div",M,[t("div",B,[r.value&&o.value==="recorder"?(a(),i("svg",j,[...e[2]||(e[2]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(a(),i("svg",V,[...e[3]||(e[3]=[t("circle",{cx:"12",cy:"12",r:"8"},null,-1)])]))]),t("div",z,[e[4]||(e[4]=t("h3",{class:"text-xl font-semibold"},"Recorder",-1)),t("p",$,d(r.value&&o.value==="recorder"?"Switching mode...":"Multi-cam ISO recording"),1)])])],10,S),t("button",{onClick:e[1]||(e[1]=l=>u("mixer")),disabled:r.value,class:f(["group relative w-64 h-48 rounded-2xl border-2 transition-all duration-300 disabled:opacity-60 disabled:cursor-wait",[o.value==="mixer"?"border-r58-mixer bg-r58-mixer/10":"border-r58-bg-tertiary hover:border-r58-mixer/50 hover:bg-r58-bg-secondary"]])},[t("div",A,[t("div",F,[r.value&&o.value==="mixer"?(a(),i("svg",N,[...e[5]||(e[5]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(a(),i("svg",O,[...e[6]||(e[6]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 6h16M4 12h16m-7 6h7"},null,-1),t("circle",{cx:"8",cy:"6",r:"2",fill:"currentColor"},null,-1),t("circle",{cx:"16",cy:"12",r:"2",fill:"currentColor"},null,-1),t("circle",{cx:"12",cy:"18",r:"2",fill:"currentColor"},null,-1)])]))]),t("div",P,[e[7]||(e[7]=t("h3",{class:"text-xl font-semibold"},"Mixer",-1)),t("p",H,d(r.value&&o.value==="mixer"?"Switching mode...":"Live switching & streaming"),1)])])],10,E)]),n.value?(a(),i("div",R,d(n.value),1)):g("",!0),e[10]||(e[10]=w('<div class="mt-12 flex gap-8 text-sm text-r58-text-secondary"><div class="flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-r58-accent-success"></span><span>4 inputs available</span></div><div class="flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-r58-accent-success"></span><span>Storage: 256 GB free</span></div></div>',1))]))}});export{G as default};
