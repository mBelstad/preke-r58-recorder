const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DJLG8H7m.js","assets/index-C0yTe7w1.css"])))=>i.map(i=>d[i]);
import{a5 as g}from"./index-DJLG8H7m.js";let P=null;async function u(){if(P)return P;try{const{getDeviceUrl:e}=await g(async()=>{const{getDeviceUrl:o}=await import("./index-DJLG8H7m.js").then(a=>a.ad);return{getDeviceUrl:o}},__vite__mapDeps([0,1])),r=e();if(r){const o=new AbortController,a=setTimeout(()=>o.abort(),3e3),s=await fetch(`${r}/api/config`,{signal:o.signal,mode:"cors",cache:"no-cache"});if(clearTimeout(a),s.ok){const n=await s.json();if(n.vdo_host||n.vdoninja_host)return P=n.vdo_host||n.vdoninja_host,P}}}catch{console.log("[VDO.ninja] Device does not provide VDO.ninja host configuration")}const t="app.itagenten.no";return P=t,console.log(`[VDO.ninja] Using default host: ${t}`),t}function m(){return"https"}async function h(){return await u()==="app.itagenten.no"?"/vdo":""}const i="studio",l="preke-r58-2024";function p(){var e,r;const t=`
/* R58 VDO.ninja Theme - Colors Only */
:root {
  --r58-bg: #0f172a;
  --r58-bg2: #1e293b;
  --r58-bg3: #334155;
  --r58-text: #f8fafc;
  --r58-muted: #94a3b8;
  --r58-blue: #3b82f6;
  --r58-green: #22c55e;
  --r58-gold: #f59e0b;
  --r58-border: #475569;
}
body { background: var(--r58-bg); color: var(--r58-text); }
#mainmenu, .controlButtons, #guestFeatures { background: var(--r58-bg2); }
button, .button { background: var(--r58-bg3); color: var(--r58-text); border-color: var(--r58-border); }
button:hover { background: var(--r58-blue); }
input, select, textarea { background: var(--r58-bg3); color: var(--r58-text); border-color: var(--r58-border); }
a { color: var(--r58-blue); }
.vidcon { background: var(--r58-bg2); border-color: var(--r58-border); border-radius: 8px; }
video { border-radius: 6px; }
`;if(typeof window<"u"&&((r=(e=window.location)==null?void 0:e.origin)!=null&&r.startsWith("file://")))return"";try{return btoa(unescape(encodeURIComponent(t)))}catch{return""}}async function V(t,e){const r=await u();if(!r)return null;const o=m(),a=await h(),s=new URL(`${o}://${r}${a}/`);return s.searchParams.set("room",i),s.searchParams.set("push",t.toLowerCase().replace(/\s+/g,"-")),s.searchParams.set("label",t),s.searchParams.set("webcam",""),s.searchParams.set("mic",""),s.searchParams.set("quality","1"),s.toString()}async function U(t,e,r,o={}){const a=await u();if(!a)return null;const s=m(),n=await h(),c=new URL(`${s}://${a}${n}/`);if(c.searchParams.set("whepplay",e),c.searchParams.set("push",t),c.searchParams.set("room",i),c.searchParams.set("password",l),c.searchParams.set("label",r),c.searchParams.set("autostart","true"),c.searchParams.set("stereo","2"),c.searchParams.set("whepwait","2000"),o.useMediamtx!==!1){const w=await O();w&&c.searchParams.set("mediamtx",w)}const d=p();d&&c.searchParams.set("b64css",d);const b=c.toString();return console.log(`[VDO.ninja] Camera contribution URL for ${t}: room=${i}, password=${l.substring(0,4)}...`),b}async function $(t){const e=await u();if(!e)return null;const r=m(),o=await h(),a=new URL(`${r}://${e}${o}/`);a.searchParams.set("scene",""),a.searchParams.set("room",i),a.searchParams.set("cover",""),a.searchParams.set("quality","0"),a.searchParams.set("width","1280"),a.searchParams.set("height","720"),a.searchParams.set("cleanoutput",""),a.searchParams.set("hideheader",""),a.searchParams.set("nologo",""),a.searchParams.set("whipout",t),a.searchParams.set("autostart",""),a.searchParams.set("videodevice","0"),a.searchParams.set("audiodevice","0");const s=p();return s&&a.searchParams.set("b64css",s),a.toString()}async function x(t){const e=await u();if(!e)return null;const r=m(),o=await h(),a=new URL(`${r}://${e}${o}/`);a.searchParams.set("scene","0"),a.searchParams.set("layout",""),a.searchParams.set("remote",""),a.searchParams.set("room",i),a.searchParams.set("password",l),a.searchParams.set("cleanviewer",""),a.searchParams.set("chroma","000"),a.searchParams.set("ssar","landscape"),a.searchParams.set("nosettings",""),a.searchParams.set("showlabels",""),a.searchParams.set("prefercurrenttab",""),a.searchParams.set("selfbrowsersurface","include"),a.searchParams.set("displaysurface","browser"),a.searchParams.set("np",""),a.searchParams.set("publish",""),a.searchParams.set("quality","1"),a.searchParams.set("screenshareaspectratio","1.7777777777777777"),a.searchParams.set("locked","1.7777777777777777"),a.searchParams.set("maxvideobitrate","2500"),a.searchParams.set("totalroombitrate","6000");const s=await O()||"app.itagenten.no";{let c=s;if(!s.includes("://")){const d=s==="localhost"||s==="127.0.0.1"||s.startsWith("192.168.")||s.startsWith("10.")||s.startsWith("172.")?"http":"https";c=s.includes(":")?`${d}://${s}`:`${d}://${s}:8889`}a.searchParams.set("mediamtx",c)}const n=p();return n&&a.searchParams.set("b64css",n),a.toString()}async function v(){var t;try{const{getDeviceUrl:e}=await g(async()=>{const{getDeviceUrl:o}=await import("./index-DJLG8H7m.js").then(a=>a.ad);return{getDeviceUrl:o}},__vite__mapDeps([0,1])),r=e();if(r){const o=new AbortController,a=setTimeout(()=>o.abort(),3e3),s=await fetch(`${r}/api/config`,{signal:o.signal,mode:"cors",cache:"no-cache"});if(clearTimeout(a),s.ok){const n=await s.json();if((t=n.vdo_ninja)!=null&&t.api_key)return n.vdo_ninja.api_key}}}catch{console.log("[VDO.ninja] Could not fetch API key from config")}return"preke-r58-2024-secure-key"}async function R(t={}){const e=await u();if(!e)return null;const r=m(),o=await h(),a=new URL(`${r}://${e}${o}/mixer.html`),s=t.room||i;a.searchParams.set("room",s),a.searchParams.set("director",s),a.searchParams.set("password",l);const n=await v();n&&a.searchParams.set("api",n),t.useMediamtx!==!1&&t.mediamtxHost&&a.searchParams.set("mediamtx",t.mediamtxHost),a.searchParams.set("totalroombitrate","6000"),a.searchParams.set("maxvideobitrate","2000");const c=p();c&&a.searchParams.set("b64css",c);const f=a.toString();return console.log(`[VDO.ninja] Mixer URL: room=${s}, director=${s}, password=${l.substring(0,4)}...`),f}async function O(){try{const{getFrpUrl:t}=await g(async()=>{const{getFrpUrl:r}=await import("./index-DJLG8H7m.js").then(o=>o.ad);return{getFrpUrl:r}},__vite__mapDeps([0,1])),e=await t();if(e)try{const r=new URL(e);return r.hostname.includes("itagenten.no")?"app.itagenten.no":r.hostname.replace("api","mediamtx")}catch{console.warn("[VDO.ninja] Failed to construct MediaMTX host from FRP URL")}}catch{}return null}async function T(t){return console.log(`[VDO.ninja] Using HTTPS proxy for ${t}`),`https://app.itagenten.no/${t}/whep`}async function _(t,e={}){const r=await u();if(!r)return null;const o=m(),a=await h(),s=new URL(`${o}://${r}${a}/`);t===0?s.searchParams.set("scene",""):s.searchParams.set("scene",t.toString()),s.searchParams.set("room",e.room||i),s.searchParams.set("password",l),s.searchParams.set("cover",""),s.searchParams.set("cleanoutput",""),s.searchParams.set("hideheader",""),s.searchParams.set("nologo",""),s.searchParams.set("quality",(e.quality??2).toString()),e.muted&&s.searchParams.set("muted","");const n=p();return n&&s.searchParams.set("b64css",n),s.toString()}async function y(t=0,e){return _(t,{muted:!1,quality:2,room:e})}async function C(t=1){const e=await y(t);if(!e)return console.warn("[VDO.ninja] Cannot open popup - VDO.ninja not configured"),null;const o=window.open(e,"R58_Program_Output","width=1280,height=720,menubar=no,toolbar=no,location=no,status=no");return o||console.warn("[VDO.ninja] Popup blocked - please allow popups for this site"),o}export{i as V,$ as a,x as b,_ as c,T as d,U as e,l as f,u as g,O as h,R as i,m as j,V as k,C as o};
