import{d as b,r as C,h as m,j as p,k,B as _,c as l,a as e,n as r,b as w,t as y,y as M,F as R,q as B,o as s,_ as I}from"./index-CssX6Kh2.js";const $={class:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-r58-bg-primary"},z={class:"relative z-10 flex flex-col items-center gap-8"},L={class:"relative"},j={key:0,class:"w-12 h-12 text-r58-recorder animate-pulse",fill:"currentColor",viewBox:"0 0 24 24"},S={key:1,class:"w-12 h-12 text-r58-mixer",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"2"},T={class:"text-center"},N={class:"text-3xl font-bold mb-2"},F={class:"text-r58-text-secondary"},V={key:0},q={key:1},D={class:"w-64 h-1.5 bg-r58-bg-tertiary rounded-full overflow-hidden"},E={key:0,class:"flex gap-3"},P=3e3,U=b({__name:"ModeLoadingScreen",props:{mode:{},camerasReady:{},totalCameras:{},isLoading:{type:Boolean}},emits:["ready"],setup(a,{emit:g}){const t=a,v=g;let i=null;const c=C(0),h=m(()=>t.totalCameras&&t.totalCameras>0?Math.min(100,(t.camerasReady||0)/t.totalCameras*100):c.value*25),o=m(()=>t.mode==="recorder"?"r58-recorder":"r58-mixer"),x=m(()=>t.mode==="recorder"?"Recorder":"Mixer");let d=null;return p(()=>{i=setTimeout(()=>{v("ready")},P),t.camerasReady||(d=setInterval(()=>{c.value=(c.value+1)%5},600))}),k(()=>{i&&clearTimeout(i),d&&clearInterval(d)}),_(()=>t.camerasReady,u=>{u&&u>0&&setTimeout(()=>v("ready"),500)}),(u,n)=>(s(),l("div",$,[e("div",{class:r(["absolute inset-0 opacity-20",a.mode==="recorder"?"bg-gradient-radial-red":"bg-gradient-radial-blue"])},null,2),e("div",z,[e("div",L,[e("div",{class:r(["absolute inset-0 rounded-full animate-ping opacity-20",`bg-${o.value}`]),style:{"animation-duration":"1.5s"}},null,2),e("div",{class:r(["absolute inset-0 rounded-full animate-ping opacity-10",`bg-${o.value}`]),style:{"animation-duration":"2s","animation-delay":"0.5s"}},null,2),e("div",{class:r(["relative w-24 h-24 rounded-full flex items-center justify-center",`bg-${o.value}/20`])},[a.mode==="recorder"?(s(),l("svg",j,[...n[0]||(n[0]=[e("circle",{cx:"12",cy:"12",r:"8"},null,-1)])])):(s(),l("svg",S,[...n[1]||(n[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 6h16M4 12h16m-7 6h7"},null,-1),e("circle",{cx:"8",cy:"6",r:"2",fill:"currentColor",class:"animate-pulse"},null,-1),e("circle",{cx:"16",cy:"12",r:"2",fill:"currentColor",class:"animate-pulse",style:{"animation-delay":"0.2s"}},null,-1),e("circle",{cx:"12",cy:"18",r:"2",fill:"currentColor",class:"animate-pulse",style:{"animation-delay":"0.4s"}},null,-1)])]))],2)]),e("div",T,[e("h2",N,y(x.value),1),e("p",F,[a.camerasReady!==void 0&&a.totalCameras?(s(),l("span",V," Loading cameras... "+y(a.camerasReady)+"/"+y(a.totalCameras),1)):(s(),l("span",q," Initializing cameras... "))])]),e("div",D,[e("div",{class:r(["h-full rounded-full transition-all duration-300",`bg-${o.value}`]),style:M({width:`${h.value}%`})},null,6)]),a.totalCameras?(s(),l("div",E,[(s(!0),l(R,null,B(a.totalCameras,f=>(s(),l("div",{key:f,class:r(["w-3 h-3 rounded-full transition-all duration-300",[f<=(a.camerasReady||0)?`bg-${o.value}`:"bg-r58-bg-tertiary"]])},null,2))),128))])):w("",!0)])]))}}),A=I(U,[["__scopeId","data-v-5f3848ac"]]);export{A as M};
