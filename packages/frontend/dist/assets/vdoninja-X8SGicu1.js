const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DZOHfCnv.js","assets/index-CUkGBgLQ.css"])))=>i.map(i=>d[i]);
import{a1 as m}from"./index-DZOHfCnv.js";let c=null;async function d(){if(c)return c;try{const{getDeviceUrl:o}=await m(async()=>{const{getDeviceUrl:t}=await import("./index-DZOHfCnv.js").then(e=>e.a6);return{getDeviceUrl:t}},__vite__mapDeps([0,1])),s=o();if(s){const t=new AbortController,e=setTimeout(()=>t.abort(),3e3),a=await fetch(`${s}/api/config`,{signal:t.signal,mode:"cors",cache:"no-cache"});if(clearTimeout(e),a.ok){const n=await a.json();if(n.vdo_host||n.vdoninja_host)return c=n.vdo_host||n.vdoninja_host,c}}}catch{console.log("[VDO.ninja] Device does not provide VDO.ninja host configuration")}const r="r58-vdo.itagenten.no";return c=r,console.log(`[VDO.ninja] Using default host: ${r}`),r}function h(){return"https"}const i="studio",u="preke-r58-2024";function g(){var o,s;const r=`
/* R58 VDO.ninja Theme - Colors Only */
:root {
  --r58-bg: #0f172a;
  --r58-bg2: #1e293b;
  --r58-bg3: #334155;
  --r58-text: #f8fafc;
  --r58-muted: #94a3b8;
  --r58-blue: #3b82f6;
  --r58-green: #22c55e;
  --r58-gold: #f59e0b;
  --r58-border: #475569;
}
body { background: var(--r58-bg); color: var(--r58-text); }
#mainmenu, .controlButtons, #guestFeatures { background: var(--r58-bg2); }
button, .button { background: var(--r58-bg3); color: var(--r58-text); border-color: var(--r58-border); }
button:hover { background: var(--r58-blue); }
input, select, textarea { background: var(--r58-bg3); color: var(--r58-text); border-color: var(--r58-border); }
a { color: var(--r58-blue); }
.vidcon { background: var(--r58-bg2); border-color: var(--r58-border); border-radius: 8px; }
video { border-radius: 6px; }
`;if(typeof window<"u"&&((s=(o=window.location)==null?void 0:o.origin)!=null&&s.startsWith("file://")))return"";try{return btoa(unescape(encodeURIComponent(r)))}catch{return""}}async function v(r,o,s){const t=await d();if(!t)return null;const e=h(),a=new URL(`${e}://${t}/`);a.searchParams.set("whepplay",o),a.searchParams.set("push",r),a.searchParams.set("room",i),a.searchParams.set("password",u),a.searchParams.set("label",s),a.searchParams.set("autostart","true"),a.searchParams.set("stereo","2"),a.searchParams.set("whepwait","2000");const n=await P();n&&a.searchParams.set("mediamtx",n);const l=g();l&&a.searchParams.set("b64css",l);const f=a.toString();return console.log(`[VDO.ninja] Camera contribution URL for ${r}: room=${i}, password=${u.substring(0,4)}...`),f}async function _(r){const o=await d();if(!o)return null;const s=h(),t=new URL(`${s}://${o}/`);t.searchParams.set("scene",""),t.searchParams.set("room",i),t.searchParams.set("cover",""),t.searchParams.set("quality","0"),t.searchParams.set("width","1280"),t.searchParams.set("height","720"),t.searchParams.set("cleanoutput",""),t.searchParams.set("hideheader",""),t.searchParams.set("nologo",""),t.searchParams.set("whipout",r),t.searchParams.set("autostart",""),t.searchParams.set("videodevice","0"),t.searchParams.set("audiodevice","0");const e=g();return e&&t.searchParams.set("b64css",e),t.toString()}async function p(){var r;try{const{getDeviceUrl:o}=await m(async()=>{const{getDeviceUrl:t}=await import("./index-DZOHfCnv.js").then(e=>e.a6);return{getDeviceUrl:t}},__vite__mapDeps([0,1])),s=o();if(s){const t=new AbortController,e=setTimeout(()=>t.abort(),3e3),a=await fetch(`${s}/api/config`,{signal:t.signal,mode:"cors",cache:"no-cache"});if(clearTimeout(e),a.ok){const n=await a.json();if((r=n.vdo_ninja)!=null&&r.api_key)return n.vdo_ninja.api_key}}}catch{console.log("[VDO.ninja] Could not fetch API key from config")}return"preke-r58-2024-secure-key"}async function U(r={}){const o=await d();if(!o)return null;const s=h(),t=new URL(`${s}://${o}/mixer.html`),e=r.room||i;t.searchParams.set("room",e),t.searchParams.set("director",e),t.searchParams.set("password",u);const a=await p();a&&t.searchParams.set("api",a),r.mediamtxHost&&t.searchParams.set("mediamtx",r.mediamtxHost),t.searchParams.set("totalroombitrate","6000"),t.searchParams.set("maxvideobitrate","2000");const n=g();n&&t.searchParams.set("b64css",n);const l=t.toString();return console.log(`[VDO.ninja] Mixer URL: room=${e}, director=${e}, password=${u.substring(0,4)}...`),l}async function P(){try{const{getDeviceUrl:r,getFrpUrl:o}=await m(async()=>{const{getDeviceUrl:t,getFrpUrl:e}=await import("./index-DZOHfCnv.js").then(a=>a.a6);return{getDeviceUrl:t,getFrpUrl:e}},__vite__mapDeps([0,1])),s=await o();if(s)try{const t=new URL(s);return t.hostname.includes("itagenten.no")?"app.itagenten.no":t.hostname.replace("api","mediamtx")}catch{console.warn("[VDO.ninja] Failed to construct MediaMTX host from FRP URL")}}catch{}return null}async function D(r){const{getDeviceUrl:o,getFrpUrl:s}=await m(async()=>{const{getDeviceUrl:e,getFrpUrl:a}=await import("./index-DZOHfCnv.js").then(n=>n.a6);return{getDeviceUrl:e,getFrpUrl:a}},__vite__mapDeps([0,1]));if(typeof window<"u"&&window.electronAPI){const e=o();if(e)try{const a=new URL(e);return console.log(`[VDO.ninja] Using direct WHEP for ${r}`),`http://${a.hostname}:8889/${r}/whep`}catch{}}const t=await s();if(t)try{const e=new URL(t);return e.hostname.includes("itagenten.no")?`https://app.itagenten.no/${r}/whep`:`https://${e.hostname.replace("api","mediamtx")}/${r}/whep`}catch{console.warn("[VDO.ninja] Failed to construct MediaMTX WHEP URL")}return null}async function w(r,o={}){const s=await d();if(!s)return null;const t=h(),e=new URL(`${t}://${s}/`);r===0?e.searchParams.set("scene",""):e.searchParams.set("scene",r.toString()),e.searchParams.set("room",o.room||i),e.searchParams.set("password",u),e.searchParams.set("cover",""),e.searchParams.set("cleanoutput",""),e.searchParams.set("hideheader",""),e.searchParams.set("nologo",""),e.searchParams.set("quality",(o.quality??2).toString()),o.muted&&e.searchParams.set("muted","");const a=g();return a&&e.searchParams.set("b64css",a),e.toString()}async function b(r=1,o){return w(r,{muted:!1,quality:2,room:o})}async function y(r=1){const o=await b(r);if(!o)return console.warn("[VDO.ninja] Cannot open popup - VDO.ninja not configured"),null;const t=window.open(o,"R58_Program_Output","width=1280,height=720,menubar=no,toolbar=no,location=no,status=no");return t||console.warn("[VDO.ninja] Popup blocked - please allow popups for this site"),t}export{i as V,w as a,_ as b,D as c,v as d,u as e,P as f,d as g,U as h,h as i,y as o};
