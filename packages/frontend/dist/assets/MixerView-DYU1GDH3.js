import{d as b,A as y,r as d,h as m,j as h,c as u,l as v,a as e,m as O,T as V,t as o,J as w,b as x,F as R,E as D,o as n,_ as L}from"./index-C-yh7s6l.js";import{g as S,a as M,V as f,b as C}from"./vdoninja-BhCxUzCu.js";import{M as j}from"./ModeLoadingScreen-DuNPVOgc.js";const k={class:"h-full flex flex-col bg-r58-bg-primary"},P={class:"flex items-center justify-between px-4 py-2 border-b border-r58-bg-tertiary bg-r58-bg-secondary"},T={class:"flex items-center gap-3"},B={class:"text-sm text-r58-text-secondary"},I={class:"flex items-center gap-2 text-xs text-r58-text-secondary"},E={class:"px-2 py-1 bg-r58-bg-tertiary rounded"},N={class:"flex-1 relative"},A=["src"],F={key:0,class:"absolute inset-0 flex items-center justify-center bg-r58-bg-primary"},H=b({__name:"MixerView",setup(U){const l=y(),i=d(!0),s=d(!1),c=m(()=>l.inputs.filter(a=>a.hasSignal)),p=m(()=>{const a=M(),t=S(),r=new URL(`${t}://${a}/mixer.html`);return r.searchParams.set("room",f),r.searchParams.set("password",C),r.toString()});function _(){console.log("[Mixer] VDO.ninja mixer iframe loaded"),s.value=!0}function g(){i.value=!1}return h(async()=>{await l.fetchInputs()}),(a,t)=>(n(),u(R,null,[v(V,{name:"fade"},{default:O(()=>[i.value?(n(),D(j,{key:0,mode:"mixer","content-ready":s.value,"min-time":1500,"max-time":1e4,onReady:g},null,8,["content-ready"])):x("",!0)]),_:1}),e("div",k,[e("header",P,[e("div",T,[t[0]||(t[0]=e("span",{class:"text-lg font-semibold text-r58-mixer"},"Mixer",-1)),e("span",B,o(c.value.length)+" camera"+o(c.value.length!==1?"s":"")+" detected ",1)]),e("div",I,[e("span",E,"Room: "+o(w(f)),1)])]),e("div",N,[e("iframe",{src:p.value,onLoad:_,class:"absolute inset-0 w-full h-full border-0",allow:"camera; microphone; autoplay; display-capture",allowfullscreen:""},null,40,A),s.value?x("",!0):(n(),u("div",F,[...t[1]||(t[1]=[e("div",{class:"flex flex-col items-center gap-4"},[e("div",{class:"w-8 h-8 border-2 border-r58-accent-primary border-t-transparent rounded-full animate-spin"}),e("span",{class:"text-r58-text-secondary"},"Loading VDO.ninja mixer..."),e("span",{class:"text-xs text-r58-text-secondary/60"},"Cameras will appear when bridge is running")],-1)])]))])])],64))}}),q=L(H,[["__scopeId","data-v-a3f998b9"]]);export{q as default};
