import{d as w,r,o as p,b as q,K as m,w as l,e,c,f,y as g,t as h,n as y,k as a,_ as k}from"./index-DmBbGiO-.js";import{S}from"./StudioDisplayShell-RM2H6CHc.js";import"./AnimatedBackground-Cjmy2OHl.js";const b={class:"qr-view__content"},x={key:0,class:"qr-view__loading glass-card"},C={key:1,class:"qr-view__error glass-card"},R={key:2,class:"qr-view__welcome-layout"},P={class:"qr-view__qr-container glass-card qr-view__fade-in"},Q=["src"],U=w({__name:"QRView",setup(N){const _=r(null),i=r(!0),t=r(null),n=r(""),d=r("");p(async()=>{await v()});async function v(){i.value=!0,t.value=null;try{const o=await fetch(await q("/api/v1/wordpress/qr-session"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!o.ok)throw new Error("Failed to create QR session");const s=await o.json();_.value=s.token;const u=window.location.origin;d.value=`${u}/#/customer/${s.token}`,n.value=`https://api.qrserver.com/v1/create-qr-code/?size=600x600&data=${encodeURIComponent(d.value)}`}catch(o){t.value=o.message||"Failed to create session",console.error("QR session creation error:",o)}finally{i.value=!1}}return(o,s)=>(a(),m(S,{title:"Welcome to Preke Studio",subtitle:"Your professional recording experience starts here",accent:"gold","show-footer":!0,"main-class":"qr-view__main"},{"header-right":l(()=>[e("div",{class:y(["qr-view__status",{"qr-view__status--error":!!t.value}])},[s[0]||(s[0]=e("span",{class:"qr-view__status-dot"},null,-1)),g(" "+h(t.value?"Session unavailable":"Ready for scan"),1)],2)]),footer:l(()=>[...s[5]||(s[5]=[e("div",{class:"qr-view__footer-content"},[e("span",{class:"qr-view__footer-text"},"Need help? Ask the studio technician.")],-1)])]),default:l(()=>[e("div",b,[i.value?(a(),c("div",x,[...s[1]||(s[1]=[e("div",{class:"qr-view__spinner"},null,-1),e("p",{class:"qr-view__loading-text"},"Preparing your session...",-1)])])):t.value?(a(),c("div",C,[...s[2]||(s[2]=[e("div",{class:"qr-view__error-icon"},"!",-1),e("h2",{class:"qr-view__error-title"},"Unable to Load",-1),e("p",{class:"qr-view__error-message"},"Please refresh the page or contact staff",-1)])])):_.value&&n.value?(a(),c("div",R,[s[3]||(s[3]=e("div",{class:"qr-view__welcome-section"},[e("h1",{class:"qr-view__welcome-title"},"Welcome"),e("p",{class:"qr-view__welcome-tagline"},"Scan to begin your professional recording session")],-1)),e("div",P,[e("img",{src:n.value,alt:"QR Code - Scan with your phone",class:"qr-view__qr-image"},null,8,Q)]),s[4]||(s[4]=e("div",{class:"qr-view__instructions glass-card qr-view__fade-in"},[e("h2",{class:"qr-view__instructions-title"},"Get Started"),e("ol",{class:"qr-view__instructions-list"},[e("li",null,"Open your phone camera"),e("li",null,"Point it at the QR code above")]),e("p",{class:"qr-view__instructions-note"},"Your session controls will appear on your phone")],-1))])):f("",!0)])]),_:1}))}}),O=k(U,[["__scopeId","data-v-06670417"]]);export{O as default};
