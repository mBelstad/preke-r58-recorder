import{d as u,r,o as w,b as p,c as t,f as m,e,k as a,_ as q}from"./index-DZOHfCnv.js";const f={class:"qr-view"},h={key:0,class:"qr-view__loading"},y={key:1,class:"qr-view__error"},g={key:2,class:"qr-view__content"},k={class:"qr-view__qr-container"},R=["src"],C=u({__name:"QRView",setup(Q){const c=r(null),n=r(!0),i=r(null),l=r(""),d=r("");w(async()=>{await _()});async function _(){n.value=!0,i.value=null;try{const o=await fetch(await p("/api/v1/wordpress/qr-session"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!o.ok)throw new Error("Failed to create QR session");const s=await o.json();c.value=s.token;const v=window.location.origin;d.value=`${v}/#/customer/${s.token}`,l.value=`https://api.qrserver.com/v1/create-qr-code/?size=600x600&data=${encodeURIComponent(d.value)}`}catch(o){i.value=o.message||"Failed to create session",console.error("QR session creation error:",o)}finally{n.value=!1}}return(o,s)=>(a(),t("div",f,[n.value?(a(),t("div",h,[...s[0]||(s[0]=[e("div",{class:"qr-view__spinner"},null,-1),e("p",{class:"qr-view__loading-text"},"Preparing your session...",-1)])])):i.value?(a(),t("div",y,[...s[1]||(s[1]=[e("svg",{class:"qr-view__error-icon",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"})],-1),e("h2",{class:"qr-view__error-title"},"Unable to Load",-1),e("p",{class:"qr-view__error-message"},"Please refresh the page",-1)])])):c.value&&l.value?(a(),t("div",g,[s[2]||(s[2]=e("div",{class:"qr-view__welcome"},[e("h1",{class:"qr-view__welcome-title"},"Welcome"),e("p",{class:"qr-view__welcome-subtitle"},"Scan the QR code with your phone to get started")],-1)),e("div",k,[e("img",{src:l.value,alt:"QR Code - Scan with your phone",class:"qr-view__qr-image"},null,8,R)]),s[3]||(s[3]=e("p",{class:"qr-view__instructions"}," Point your phone camera at the QR code to access controls and information ",-1))])):m("",!0)]))}}),x=q(C,[["__scopeId","data-v-7194770d"]]);export{x as default};
