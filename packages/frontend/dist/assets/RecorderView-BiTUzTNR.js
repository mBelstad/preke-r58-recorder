import{D as F,E as N,o as K,l as ne,G as De,r as k,j as $,H as We,d as I,I as pe,m as D,T as de,p as fe,c as y,f as E,z as Ne,e as n,w as ge,A as Ce,t as C,J as He,i as h,_ as Y,K as Fe,h as U,F as H,n as M,x as q,L as $e,q as ee,M as te,N as xe,u as me,a as Ge,y as ve,B as Re,O as Ue,P as Ve,g as Se,Q as Ie,b as je,v as Oe}from"./index-BSprUZPn.js";import{M as ze}from"./ModeLoadingScreen-aTXKr9_M.js";const O=k(!1),X=k(!1);let z=null;function qe(){const o=F();N(()=>o.status,c=>{O.value=c==="recording"},{immediate:!0});function e(c){if(O.value)return c.preventDefault(),c.returnValue="Recording in progress. Are you sure you want to leave?",c.returnValue}K(()=>{window.addEventListener("beforeunload",e)}),ne(()=>{window.removeEventListener("beforeunload",e)}),De((c,u,l)=>{O.value?(z=()=>l(),X.value=!0,l(!1)):l()});function s(){X.value=!1,O.value=!1,o.stopRecording().finally(()=>{z&&(z(),z=null)})}function v(){X.value=!1,z=null}return{isGuardActive:O,showLeaveConfirmation:X,confirmLeave:s,cancelLeave:v}}const T=k(null),se=k(!1),we=k(null),ae=k(null),Ke=10,re=2,Ye=25;function Qe(){const o=$(()=>T.value?T.value.available_gb<re?"critical":T.value.available_gb<Ke?"warning":"ok":"unknown"),e=$(()=>T.value?T.value.available_gb>=re:!0),s=$(()=>{if(!T.value)return null;const a=T.value.available_gb*1024*1024*1024,p=Ye*1024*1024,b=a/p,d=Math.floor(b/3600),g=Math.floor(b%3600/60);return d>24?`${Math.floor(d/24)}d ${d%24}h`:d>0?`${d}h ${g}m`:`${g}m`}),v=$(()=>{switch(o.value){case"ok":return"emerald";case"warning":return"amber";case"critical":return"red";default:return"zinc"}}),c=$(()=>T.value?o.value==="critical"?`Disk space critically low (${T.value.available_gb.toFixed(1)} GB). Cannot start recording.`:o.value==="warning"?`Low disk space (${T.value.available_gb.toFixed(1)} GB). Estimated recording time: ${s.value}`:null:null);async function u(){se.value=!0,ae.value=null;try{const a=await We.getDegradation();if(a.resources&&a.resources.disk_free_gb!==void 0){const p=a.resources.disk_free_gb,b=p*3;T.value={available_gb:p,total_gb:b,used_percent:100-p/b*100,recording_path:"/opt/r58-app/shared/recordings"}}return we.value=new Date,T.value}catch(a){return ae.value=a.message||"Failed to check disk space",console.error("Failed to check disk space:",a),null}finally{se.value=!1}}async function l(){return await u(),T.value?o.value==="critical"?{ok:!1,message:`Insufficient disk space (${T.value.available_gb.toFixed(1)} GB). Need at least ${re} GB to start recording.`}:o.value==="warning"?{ok:!0,message:`Low disk space warning: ${T.value.available_gb.toFixed(1)} GB available. Estimated recording time: ${s.value}`}:{ok:!0}:{ok:!0,message:"Could not verify disk space. Proceeding with caution."}}return{diskSpace:T,isLoading:se,lastCheck:we,error:ae,status:o,statusColor:v,canStartRecording:e,estimatedRecordingTime:s,warningMessage:c,checkDiskSpace:u,preflightCheck:l}}const B=k(localStorage.getItem("r58_audio_feedback")!=="false");let ie=null;function Xe(){return ie||(ie=new(window.AudioContext||window.webkitAudioContext)),ie}function L(o,e,s="sine",v=.3){if(B.value)try{const c=Xe();c.state==="suspended"&&c.resume();const u=c.createOscillator(),l=c.createGain();u.connect(l),l.connect(c.destination),u.type=s,u.frequency.value=o;const a=c.currentTime;l.gain.setValueAtTime(0,a),l.gain.linearRampToValueAtTime(v,a+.01),l.gain.linearRampToValueAtTime(0,a+e),u.start(a),u.stop(a+e)}catch(c){console.warn("Audio feedback failed:",c)}}function Je(){B.value&&(L(440,.1,"sine",.2),setTimeout(()=>L(554,.1,"sine",.2),100),setTimeout(()=>L(659,.15,"sine",.25),200))}function Ze(){B.value&&(L(880,.08,"sine",.3),setTimeout(()=>L(880,.15,"sine",.3),120))}function et(){B.value&&(L(659,.1,"sine",.25),setTimeout(()=>L(554,.1,"sine",.2),100),setTimeout(()=>L(440,.15,"sine",.2),200))}function tt(){B.value&&(L(200,.15,"square",.15),setTimeout(()=>L(180,.2,"square",.15),180))}function nt(){B.value&&(L(1e3,.08,"sine",.2),setTimeout(()=>L(1e3,.08,"sine",.2),150))}function ye(){B.value&&L(1200,.03,"sine",.1)}function ot(o=50){if(B.value&&"vibrate"in navigator)try{navigator.vibrate(o)}catch{}}function st(){function o(s){B.value=s,localStorage.setItem("r58_audio_feedback",String(s))}function e(){o(!B.value),B.value&&ye()}return{enabled:B,setEnabled:o,toggle:e,playSuccess:Je,playError:tt,playWarning:nt,playClick:ye,playRecordStart:Ze,playRecordStop:et,vibrate:ot}}const at={class:"bg-preke-bg-elevated rounded-lg shadow-xl max-w-md w-full p-6"},rt=["placeholder"],it={class:"text-xs text-preke-text-dim mt-2"},lt=I({__name:"SessionNameDialog",props:{open:{type:Boolean},suggestedName:{}},emits:["confirm","cancel","skip"],setup(o,{emit:e}){const s=o,v=e,c=k(""),u=k(null),l=$(()=>{const w=new Date,m=w.toLocaleDateString("en-CA"),f=w.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}).replace(":","");return`Recording_${m}_${f}`}),a=$(()=>s.suggestedName||l.value);N(()=>s.open,w=>{w&&(c.value=a.value,setTimeout(()=>{var m,f;(m=u.value)==null||m.focus(),(f=u.value)==null||f.select()},100))});function p(){v("confirm",c.value.trim()||a.value)}function b(){v("skip")}function d(){v("cancel")}function g(w){w.key==="Enter"?p():w.key==="Escape"&&d()}return(w,m)=>(h(),pe(He,{to:"body"},[D(de,{name:"fade"},{default:fe(()=>[o.open?(h(),y("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",onClick:Ne(d,["self"]),onKeydown:g},[n("div",at,[m[1]||(m[1]=n("h2",{class:"text-lg font-semibold mb-2"},"Name This Recording",-1)),m[2]||(m[2]=n("p",{class:"text-preke-text-dim text-sm mb-4"}," Give your recording a name to find it easily later (optional). ",-1)),ge(n("input",{ref_key:"inputRef",ref:u,"onUpdate:modelValue":m[0]||(m[0]=f=>c.value=f),type:"text",placeholder:a.value,class:"w-full px-4 py-2 bg-preke-bg-surface border border-preke-bg-surface rounded-lg text-preke-text placeholder-preke-text-dim focus:outline-none focus:ring-2 focus:ring-preke-gold"},null,8,rt),[[Ce,c.value]]),n("p",it," Suggested: "+C(a.value),1),n("div",{class:"flex justify-between mt-6"},[n("button",{onClick:b,class:"text-sm text-preke-text-dim hover:text-preke-text transition-colors"}," Skip (use default) "),n("div",{class:"flex gap-3"},[n("button",{onClick:d,class:"btn"}," Cancel "),n("button",{onClick:p,class:"btn btn-primary"}," Start Recording ")])])])],32)):E("",!0)]),_:1})]))}}),ct=Y(lt,[["__scopeId","data-v-2eeca4e8"]]),ut={class:"recorder-controls"},dt={key:0,class:"recorder-controls__duration"},ft=["disabled","title"],vt={key:0,class:"recorder-controls__spinner"},pt={key:0,class:"recorder-controls__icon recorder-controls__icon--stop"},gt={key:1,class:"recorder-controls__icon recorder-controls__icon--record"},mt={class:"recorder-controls__hint"},_t=I({__name:"RecorderControls",setup(o){const e=F(),{register:s}=Fe(),{preflightCheck:v,status:c,canStartRecording:u}=Qe(),{playRecordStart:l,playRecordStop:a,playError:p,playWarning:b,vibrate:d}=st(),g=k(null),w=k(!1),m=k(!1),f=k(!1),x=k(!1),S=k(void 0),_=$(()=>e.status==="recording"),t=$(()=>e.status==="starting"),r=$(()=>e.status==="stopping"),i=$(()=>e.formattedDuration),R=$(()=>t.value||r.value||m.value),G=$(()=>t.value?"Starting recording...":r.value?"Stopping recording...":m.value?"Checking disk space...":!_.value&&!u.value?"Insufficient disk space":"");let oe=null;K(()=>{oe=s({key:" ",description:"Toggle Recording",action:Te,context:"recorder",enabled:()=>!t.value&&!r.value})}),ne(()=>{oe&&oe()});async function Te(){_.value?be():await Q()}async function Q(A){m.value=!0;try{const P=await v();if(!P.ok){p(),d(200),U.error("Cannot start recording",P.message||"Preflight check failed");return}if(P.message&&c.value==="warning"&&(b(),U.warning("Low disk space",P.message)),x.value&&!A){S.value=void 0,f.value=!0;return}await he(A||S.value)}finally{m.value=!1}}async function he(A){try{await e.startRecording(A);const P=A||e.sessionId;l(),d([50,30,50]),U.success("Recording started",`Session: ${P}`)}catch(P){p(),d(200),U.error("Failed to start recording",P.message||"Unknown error",{label:"Retry",onClick:()=>Q(A)})}}function Me(A){f.value=!1,S.value=A,Q(A)}function Ee(){f.value=!1,S.value=void 0,Q()}function Ae(){f.value=!1,m.value=!1}async function Pe(){try{await e.stopRecording(),a(),d(100),U.success("Recording stopped",`Duration: ${i.value}`)}catch(A){p(),d(200),U.error("Failed to stop recording",A.message||"Unknown error")}}function be(){var A;w.value=!1,(A=g.value)==null||A.open(),setTimeout(()=>{w.value=!0},500)}function Le(){w.value&&Pe()}async function Be(){_.value?be():await he()}return(A,P)=>(h(),y(H,null,[n("div",ut,[_.value?(h(),y("div",dt,C(i.value),1)):E("",!0),n("button",{onClick:Be,disabled:R.value,class:M(["recorder-controls__btn",_.value?"recorder-controls__btn--stop":"recorder-controls__btn--start"]),title:G.value||(_.value?"Stop Recording (Space)":"Start Recording (Space)")},[t.value||r.value||m.value?(h(),y("span",vt)):(h(),y(H,{key:1},[_.value?(h(),y("span",pt)):(h(),y("span",gt))],64)),n("span",null,C(m.value?"Checking...":_.value?"Stop":"Start Recording"),1)],10,ft),n("span",mt,[P[0]||(P[0]=q(" Press ",-1)),P[1]||(P[1]=n("kbd",null,"Space",-1)),q(" to "+C(_.value?"stop":"start"),1)])]),D($e,{ref_key:"stopConfirmDialog",ref:g,title:"Stop Recording?",message:`You have been recording for ${i.value}. This will finalize all files.`,"confirm-text":"Stop Recording","cancel-text":"Keep Recording",danger:!0,onConfirm:Le},null,8,["message"]),D(ct,{open:f.value,onConfirm:Me,onSkip:Ee,onCancel:Ae},null,8,["open"])],64))}}),ht=Y(_t,[["__scopeId","data-v-38c04e0c"]]),J=k(localStorage.getItem("r58_performance_mode")==="true"),le=k(localStorage.getItem("r58_performance_mode_auto")!=="false"),bt=3,wt=100,yt=500;function kt(){const o=F(),e=$(()=>J.value?!0:le.value&&o.isRecording?o.inputs.filter(g=>g.isRecording).length>=bt:!1),s=$(()=>e.value?yt:wt);N(e,d=>{d?document.body.classList.add("performance-mode"):document.body.classList.remove("performance-mode")},{immediate:!0});function v(d){J.value=d,localStorage.setItem("r58_performance_mode",String(d))}function c(d){le.value=d,localStorage.setItem("r58_performance_mode_auto",String(d))}function u(){v(!J.value)}function l(d,g){let w=0,m=null;return(...f)=>{const x=Date.now(),S=g??s.value,_=x-w;_>=S?(w=x,d(...f)):m||(m=window.setTimeout(()=>{w=Date.now(),m=null,d(...f)},S-_))}}function a(d,g){let w=null;return(...m)=>{w&&clearTimeout(w),w=window.setTimeout(()=>{d(...m),w=null},g??s.value)}}function p(d){return e.value?window.setTimeout(()=>d(performance.now()),s.value):requestAnimationFrame(d)}function b(d){e.value?clearTimeout(d):cancelAnimationFrame(d)}return{enabled:J,autoEnable:le,isActive:e,updateInterval:s,setEnabled:v,setAutoEnable:c,toggle:u,throttle:l,debounce:a,requestFrame:p,cancelFrame:b}}const Ct=["title"],$t={class:"flex items-center gap-1.5 text-sm"},xt={key:0,class:"flex items-center gap-1.5 text-sm"},Rt={key:1,class:"flex items-center gap-1.5 text-sm text-red-400"},St={class:"font-mono"},Tt=I({__name:"RecordingHealth",setup(o,{expose:e}){const s=F(),{isActive:v}=kt(),c=k({}),u=k(0),l=k(0),a=k(0);let p=null;function b(){const f={};let x=0;s.inputs.forEach(_=>{f[_.id]=_.bytesWritten;const t=c.value[_.id]||0;x+=_.bytesWritten-t});const S=v.value?2:1;u.value=Math.round(x/(1024*1024)/S*10)/10,c.value=f}N(()=>s.isRecording,f=>{if(f){c.value={},u.value=0,l.value=0,a.value=0;const x=v.value?2e3:1e3;p=window.setInterval(b,x)}else p&&(clearInterval(p),p=null)},{immediate:!0}),N(v,f=>{if(s.isRecording&&p){clearInterval(p);const x=f?2e3:1e3;p=window.setInterval(b,x)}}),ne(()=>{p&&clearInterval(p)});const d=$(()=>s.isRecording?a.value>0||l.value>90?"critical":u.value<1||l.value>70?"warning":"healthy":"idle"),g=$(()=>{switch(d.value){case"healthy":return"emerald";case"warning":return"amber";case"critical":return"red";default:return"zinc"}});$(()=>{switch(d.value){case"healthy":return"Healthy";case"warning":return"Warning";case"critical":return"Critical";default:return"Idle"}});const w=$(()=>{if(!s.isRecording)return"Not recording";const f=[`Write speed: ${u.value} MB/s`,`Buffer: ${l.value}%`];return a.value>0&&f.push(`Frames dropped: ${a.value}`),f.join(`
`)});function m(f){f.buffer_percent!==void 0&&(l.value=f.buffer_percent),f.frames_dropped!==void 0&&(a.value=f.frames_dropped)}return e({updateFromMetrics:m}),(f,x)=>ee(s).isRecording?(h(),y("div",{key:0,class:M(["flex items-center gap-3 px-3 py-1.5 rounded-lg transition-colors cursor-help",{"bg-emerald-500/10":g.value==="emerald","bg-amber-500/10":g.value==="amber","bg-red-500/10":g.value==="red"}]),title:w.value},[n("span",{class:M(["w-2 h-2 rounded-full",g.value==="emerald"?"bg-emerald-500":"",g.value==="amber"?"bg-amber-500 animate-pulse":"",g.value==="red"?"bg-red-500 animate-pulse":""])},null,2),n("div",$t,[x[0]||(x[0]=n("svg",{class:"w-3.5 h-3.5 text-preke-text-dim",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})],-1)),n("span",{class:M(["font-mono",g.value==="emerald"?"text-emerald-400":"",g.value==="amber"?"text-amber-400":"",g.value==="red"?"text-red-400":""])},C(u.value)+" MB/s ",3)]),l.value>0?(h(),y("div",xt,[x[1]||(x[1]=n("span",{class:"text-preke-text-dim"},"Buf:",-1)),n("span",{class:M(["font-mono",l.value<50?"text-emerald-400":"",l.value>=50&&l.value<80?"text-amber-400":"",l.value>=80?"text-red-400":""])},C(l.value)+"% ",3)])):E("",!0),a.value>0?(h(),y("div",Rt,[x[2]||(x[2]=n("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),n("span",St,C(a.value)+" dropped",1)])):E("",!0)],10,Ct)):E("",!0)}}),Mt=["65.109.32.111"],Et=5,At=1e3,Pt=3e4,Lt=()=>typeof window<"u"&&window.__NETWORK_DEBUG__===!0,ke=new Map,Bt=1e3;function Z(o,e,...s){if(!Lt())return;const v=Date.now(),c=ke.get(o)||0;v-c<Bt||(ke.set(o,v),console.log(`[NETWORK DEBUG ${o}] ${e}`,...s))}const W=new Map,j=new Map;function Dt(o){const e=te(),s=xe();if(e&&!s)try{return`http://${new URL(e).hostname}:8889/${o}/whep`}catch{console.warn("[WHEP Manager] Invalid device URL, falling back to FRP")}return`https://r58-mediamtx.itagenten.no/${o}/whep`}async function Wt(o,e){const s=W.get(e);if(!s)return"unknown";try{const u=new URL(s.whepUrl).hostname;if(u.includes("itagenten.no"))return console.log(`[WHEP Manager ${e}] Detected relay (FRP URL)`),"relay";if(u.startsWith("100."))return console.log(`[WHEP Manager ${e}] Detected P2P (Tailscale IP: ${u})`),"p2p";if(u.startsWith("192.168.")||u.startsWith("10.")||u.startsWith("172."))return console.log(`[WHEP Manager ${e}] Detected P2P (LAN IP: ${u})`),"p2p"}catch(c){console.warn(`[WHEP Manager ${e}] Failed to parse WHEP URL:`,c)}try{const c=await o.getStats();for(const u of c.values())if(u.type==="candidate-pair"&&u.state==="succeeded"){const l=c.get(u.remoteCandidateId);if((l==null?void 0:l.candidateType)==="relay")return console.log(`[WHEP Manager ${e}] Detected relay (TURN candidate)`),"relay";const a=l==null?void 0:l.address;if(a&&Mt.includes(a))return console.log(`[WHEP Manager ${e}] Detected relay (VPS IP: ${a})`),"relay"}}catch(c){console.warn(`[WHEP Manager ${e}] Failed to get WebRTC stats:`,c)}return te()&&!xe()?(console.log(`[WHEP Manager ${e}] Assuming P2P (direct device URL configured)`),"p2p"):"unknown"}function V(o){const e=W.get(o);if(!e)return;const s=j.get(o);s&&s.forEach(v=>v(e))}function ce(o){const e=W.get(o);if(!e)return;if(e.reconnectAttempts>=Et){console.error(`[WHEP Manager ${o}] Max reconnect attempts reached`),e.state="failed",V(o);return}e.reconnectAttempts++;const s=Math.min(At*Math.pow(2,e.reconnectAttempts-1),Pt),v=s*.2*(Math.random()*2-1),c=Math.max(100,Math.round(s+v));Z("WHEP",`Camera ${o}: Reconnect #${e.reconnectAttempts} in ${c}ms (base: ${s}ms)`),console.log(`[WHEP Manager ${o}] Scheduling reconnect #${e.reconnectAttempts} in ${c}ms`),e.state="connecting",V(o),e.reconnectTimeout&&clearTimeout(e.reconnectTimeout),e.reconnectTimeout=setTimeout(()=>{_e(o)},c)}async function _e(o){let e=W.get(o);if(e&&(e.state==="connected"||e.state==="connecting"))return console.log(`[WHEP Manager ${o}] Reusing existing connection (state: ${e.state})`),e;if(e!=null&&e.isConnecting){for(Z("WHEP",`Camera ${o}: Connection already in progress, skipping duplicate attempt`),console.log(`[WHEP Manager ${o}] Connection already in progress, waiting...`);e.isConnecting&&e.state==="connecting"&&(await new Promise(a=>setTimeout(a,100)),e=W.get(o),!!e););if(e)return e}let s=te(),v=0;for(;!s&&v<5;)console.log(`[WHEP Manager ${o}] No device URL yet, waiting... (attempt ${v+1})`),await new Promise(a=>setTimeout(a,100)),s=te(),v++;const c=performance.now(),u=Dt(o);Z("WHEP",`Camera ${o}: Creating connection to ${u}`),console.log(`[WHEP Manager ${o}] Creating connection to: ${u}`),console.log(`[WHEP Manager ${o}] Device URL was: ${s}`),e!=null&&e.peerConnection&&e.peerConnection.close(),e!=null&&e.disconnectedTimeout&&(clearTimeout(e.disconnectedTimeout),e.disconnectedTimeout=null),e&&(e.isConnecting=!0);const l=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun.cloudflare.com:3478"}]});e?(e.peerConnection=l,e.state="connecting",e.whepUrl=u,e.mediaStream=null,e.connectionType="unknown",e.connectionStartTime=c,e.isConnecting=!0):(e={cameraId:o,peerConnection:l,mediaStream:null,state:"connecting",connectionType:"unknown",refCount:0,whepUrl:u,lastConnectedAt:null,reconnectAttempts:0,reconnectTimeout:null,disconnectedTimeout:null,connectionStartTime:c,isConnecting:!0},W.set(o,e)),l.ontrack=a=>{a.streams[0]&&(e.mediaStream=a.streams[0],console.log(`[WHEP Manager ${o}] Received media stream`),V(o))},l.oniceconnectionstatechange=async()=>{const a=l.iceConnectionState;if(Z("WHEP",`Camera ${o}: ICE state changed to ${a}`),console.log(`[WHEP Manager ${o}] ICE state: ${a}`),a==="connected"||a==="completed"){e.state="connected",e.lastConnectedAt=Date.now(),e.reconnectAttempts=0,e.isConnecting=!1,e.connectionType=await Wt(l,o),e.disconnectedTimeout&&(clearTimeout(e.disconnectedTimeout),e.disconnectedTimeout=null);const p=e.connectionStartTime?Math.round(performance.now()-e.connectionStartTime):0;console.log(`[WHEP Manager ${o}] Connected (${e.connectionType}) in ${p}ms`),V(o)}else a==="failed"?(e.state="failed",e.connectionType="unknown",e.isConnecting=!1,V(o),e.refCount>0&&ce(o)):a==="disconnected"&&(e.disconnectedTimeout&&clearTimeout(e.disconnectedTimeout),e.disconnectedTimeout=setTimeout(()=>{(l.iceConnectionState==="disconnected"||l.iceConnectionState==="failed")&&(e.state="disconnected",e.isConnecting=!1,V(o),e.refCount>0&&ce(o)),e.disconnectedTimeout=null},3e3))},l.addTransceiver("video",{direction:"recvonly"}),l.addTransceiver("audio",{direction:"recvonly"});try{const a=await l.createOffer();await l.setLocalDescription(a);const p=await fetch(u,{method:"POST",headers:{"Content-Type":"application/sdp"},body:a.sdp});if(!p.ok)throw new Error(`WHEP request failed: ${p.status}`);const b=await p.text();await l.setRemoteDescription({type:"answer",sdp:b})}catch(a){console.error(`[WHEP Manager ${o}] Connection error:`,a),e.state="failed",e.isConnecting=!1,V(o),e.refCount>0&&ce(o)}return e}async function Nt(o,e){j.has(o)||j.set(o,new Set),j.get(o).add(e);let s=W.get(o);return(!s||s.state==="failed"||s.state==="disconnected")&&(s=await _e(o)),s.refCount++,console.log(`[WHEP Manager ${o}] Acquired connection (refCount: ${s.refCount})`),e(s),s}function Ht(o,e){const s=W.get(o);if(!s)return;const v=j.get(o);v&&(v.delete(e),v.size===0&&j.delete(o)),s.refCount=Math.max(0,s.refCount-1),console.log(`[WHEP Manager ${o}] Released connection (refCount: ${s.refCount})`),s.refCount===0&&(console.log(`[WHEP Manager ${o}] Closing unused connection`),s.reconnectTimeout&&clearTimeout(s.reconnectTimeout),s.disconnectedTimeout&&clearTimeout(s.disconnectedTimeout),s.peerConnection.close(),W.delete(o))}function ue(o){const e=W.get(o);e&&(console.log(`[WHEP Manager ${o}] Force reconnecting...`),e.reconnectAttempts=0,_e(o))}const Ft={class:"relative w-full h-full bg-black"},Gt=["title"],Ut={key:1,class:"absolute inset-0 flex items-center justify-center bg-black/50"},Vt={key:2,class:"absolute inset-0 flex items-center justify-center bg-black/70"},It={class:"text-center"},jt={class:"text-xs text-amber-400"},Ot={key:3,class:"absolute inset-0 flex items-center justify-center bg-black/80"},zt={class:"text-center text-preke-text-dim"},qt={class:"text-sm"},Kt=I({__name:"InputPreview",props:{inputId:{},protocol:{}},emits:["videoReady","aspectRatio"],setup(o,{emit:e}){const s=o,v=e,c=F();let u=!1;const l=$(()=>c.status==="recording"),a=k(null),p=k(!0),b=k(null),d=k("unknown"),g=k(!1),w=k(0);let m=null;function f(t){switch(console.log(`[InputPreview ${s.inputId}] Connection update:`,{state:t.state,type:t.connectionType,hasStream:!!t.mediaStream}),d.value=t.connectionType,w.value=t.reconnectAttempts,t.state){case"connecting":p.value=!0,b.value=null,g.value=t.reconnectAttempts>0;break;case"connected":p.value=!1,b.value=null,g.value=!1,t.mediaStream&&a.value&&a.value.srcObject!==t.mediaStream&&(a.value.srcObject=t.mediaStream,a.value.play().catch(r=>{console.warn(`[InputPreview ${s.inputId}] Autoplay prevented:`,r)}),u||(a.value.onloadeddata=()=>{if(!u&&a.value){u=!0;const r=a.value.videoWidth,i=a.value.videoHeight,R=r&&i?r/i:16/9;console.log(`[InputPreview ${s.inputId}] Video ready (${r}x${i}, ratio: ${R.toFixed(3)})`),v("aspectRatio",R),v("videoReady")}}));break;case"disconnected":g.value=!0,b.value=`Reconnecting... (${t.reconnectAttempts}/5)`;break;case"failed":p.value=!1,g.value=!1,b.value="Connection failed after multiple attempts";break}}async function x(){if(a.value){_(),p.value=!0,b.value=null,m=f;try{await Nt(s.inputId,m)}catch(t){console.error(`[InputPreview ${s.inputId}] Failed to acquire connection:`,t),b.value=t instanceof Error?t.message:"Failed to connect",p.value=!1}}}function S(){ue(s.inputId)}function _(){m&&(Ht(s.inputId,m),m=null)}return K(()=>{x()}),N(()=>s.inputId,()=>{x()}),N(l,(t,r)=>{r&&!t&&b.value?(console.log("[InputPreview] Recording stopped, reconnecting preview..."),ue(s.inputId)):!r&&t&&(console.log("[InputPreview] Recording started, will try to reconnect preview after delay..."),setTimeout(()=>{l.value&&(console.log("[InputPreview] Attempting to reconnect preview during recording..."),ue(s.inputId))},2e3))}),ne(()=>{_()}),(t,r)=>(h(),y("div",Ft,[n("video",{ref_key:"videoRef",ref:a,autoplay:"",muted:"",playsinline:"",class:"w-full h-full object-contain"},null,512),!p.value&&!b.value&&d.value!=="unknown"?(h(),y("div",{key:0,class:M(["absolute top-1 right-1 px-1.5 py-0.5 text-[10px] font-medium rounded",d.value==="p2p"?"bg-emerald-500/80 text-white":"bg-amber-500/80 text-white"]),title:d.value==="p2p"?"Direct P2P connection":"Relay connection (FRP)"},C(d.value==="p2p"?"P2P":"RELAY"),11,Gt)):E("",!0),p.value&&!g.value?(h(),y("div",Ut,[...r[0]||(r[0]=[n("div",{class:"animate-spin w-6 h-6 border-2 border-white border-t-transparent rounded-full"},null,-1)])])):E("",!0),g.value?(h(),y("div",Vt,[n("div",It,[r[1]||(r[1]=n("div",{class:"animate-spin w-5 h-5 border-2 border-amber-400 border-t-transparent rounded-full mx-auto mb-2"},null,-1)),n("p",jt,C(b.value||"Reconnecting..."),1)])])):b.value&&!p.value?(h(),y("div",Ot,[n("div",zt,[n("p",qt,C(b.value),1),n("button",{onClick:S,class:"mt-2 text-xs text-preke-gold hover:underline"}," Retry ")])])):E("",!0)]))}}),Yt={key:0,class:"h-full flex items-center justify-center"},Qt={key:1,class:"input-grid"},Xt={key:0,class:"input-grid__warning"},Jt=["data-count"],Zt=["title"],en={key:1,class:"w-full h-full flex items-center justify-center bg-preke-bg-surface"},tn={class:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/80 to-transparent p-4"},nn={class:"flex items-center justify-between"},on={class:"flex items-center gap-2"},sn={class:"font-medium"},an={key:0,class:"flex items-center gap-2 text-sm"},rn={class:"text-preke-text-dim"},ln={key:0,class:"mt-2 flex items-center justify-between"},cn={class:"text-sm font-mono text-preke-text-dim"},un=I({__name:"InputGrid",emits:["allVideosReady"],setup(o,{emit:e}){const s=F(),v=me(),c=e,u=k(new Set),l=k({});function a(t){u.value.add(t),console.log(`[InputGrid] Video ready: ${t} (${u.value.size}/${g.value.length})`),u.value.size>=g.value.length&&(console.log("[InputGrid] All videos ready!"),c("allVideosReady"))}function p(t,r){l.value[t]=r,console.log(`[InputGrid] Aspect ratio for ${t}: ${r.toFixed(3)}`)}function b(t){return{aspectRatio:`${l.value[t]||1.7777777777777777}`}}N(()=>g.value.length,()=>{u.value.clear()});const d=$(()=>{var t;return((t=v.capabilities)==null?void 0:t.current_mode)==="recorder"}),g=$(()=>s.inputs.filter(t=>t.hasSignal)),w=$(()=>s.framerateMismatch);function m(t){return t.isRecording?"border-preke-red ring-2 ring-preke-red/20":t.hasSignal?"border-emerald-500/50 hover:border-emerald-500":"border-preke-bg-surface/50 opacity-60"}function f(t){return t.hasSignal?t.framerate>=29?"excellent":t.framerate>=24?"good":"unstable":"none"}function x(t){switch(f(t)){case"excellent":return"text-emerald-400";case"good":return"text-emerald-400";case"unstable":return"text-amber-400";case"none":return"text-preke-text-dim"}}function S(t){if(t===0)return"0 B";const r=1024,i=["B","KB","MB","GB"],R=Math.floor(Math.log(t)/Math.log(r));return parseFloat((t/Math.pow(r,R)).toFixed(1))+" "+i[R]}function _(t){if(!t.hasSignal)return`${t.label}: No signal detected`;const r=[`${t.label}`,`Resolution: ${t.resolution}`,`Framerate: ${t.framerate} fps`,`Quality: ${f(t)}`];return t.isRecording&&r.push(`Written: ${S(t.bytesWritten)}`),r.join(`
`)}return(t,r)=>g.value.length===0?(h(),y("div",Yt,[...r[0]||(r[0]=[Ge('<div class="text-center text-preke-text-dim" data-v-2ed3c95b><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-2ed3c95b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" data-v-2ed3c95b></path></svg><p class="text-lg font-medium" data-v-2ed3c95b>No Video Sources Connected</p><p class="text-sm mt-2" data-v-2ed3c95b>Connect HDMI cables to begin recording</p></div>',1)])])):(h(),y("div",Qt,[w.value?(h(),y("div",Xt,[r[1]||(r[1]=n("svg",{class:"w-4 h-4 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),n("span",null,C(w.value),1)])):E("",!0),n("div",{class:"input-grid__container","data-count":g.value.length},[(h(!0),y(H,null,ve(g.value,i=>(h(),y("div",{key:i.id,class:M(["input-grid__tile",m(i)]),style:Re(b(i.id)),title:_(i)},[d.value?(h(),pe(Kt,{key:0,"input-id":i.id,class:"w-full h-full",onVideoReady:R=>a(i.id),onAspectRatio:R=>p(i.id,R)},null,8,["input-id","onVideoReady","onAspectRatio"])):(h(),y("div",en,[...r[2]||(r[2]=[n("div",{class:"text-center"},[n("svg",{class:"w-8 h-8 mx-auto mb-2 text-preke-text-dim/50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})]),n("span",{class:"text-xs text-preke-text-dim/70"},"Mixer mode")],-1)])])),n("div",tn,[n("div",nn,[n("div",on,[n("span",{class:M(["w-2 h-2 rounded-full transition-colors",{"bg-emerald-500":f(i)==="excellent"||f(i)==="good","bg-amber-500 animate-pulse":f(i)==="unstable","bg-preke-text-dim":f(i)==="none"}])},null,2),n("span",sn,C(i.label),1)]),i.hasSignal?(h(),y("div",an,[n("span",rn,C(i.resolution),1),n("span",{class:M(x(i))},C(i.framerate)+"fps",3)])):E("",!0)]),i.isRecording?(h(),y("div",ln,[r[3]||(r[3]=n("div",{class:"flex items-center gap-2 text-preke-red"},[n("span",{class:"w-2 h-2 rounded-full bg-preke-red animate-recording"}),n("span",{class:"text-sm font-medium"},"REC")],-1)),n("span",cn,C(S(i.bytesWritten)),1)])):E("",!0)])],14,Zt))),128))],8,Jt)]))}}),dn=Y(un,[["__scopeId","data-v-2ed3c95b"]]),fn={class:"sidebar"},vn={class:"sidebar__card sidebar__card--header"},pn={class:"connection-row"},gn={class:"connection-status"},mn={class:"connection-label"},_n={key:0,class:"connection-latency"},hn=["disabled"],bn={class:"sidebar__card sidebar__card--recording"},wn={class:"recording__duration"},yn={class:"recording__meta"},kn={class:"sidebar__card"},Cn={class:"stats"},$n={class:"stats__label"},xn={class:"stats__value"},Rn={key:0,class:"sidebar__card sidebar__card--warning"},Sn={class:"warning__text"},Tn={class:"sidebar__card"},Mn={class:"sidebar__hint"},En={class:"sidebar__card"},An={class:"cameras"},Pn={class:"camera__header"},Ln={class:"camera__controls"},Bn=["onClick"],Dn={class:"camera__btn-label"},Wn=["onClick"],Nn={class:"camera__btn-label"},Hn=["onClick"],Fn={class:"camera__btn-label"},Gn=["onClick"],Un={class:"camera__btn-label"},Vn={key:0,class:"sidebar__card"},In={class:"storage"},jn={class:"storage__bar"},On={class:"storage__info"},zn={class:"storage__estimate"},qn=I({__name:"SessionInfoV2",setup(o){const e=Se(),s=F(),v=me(),{state:c,latencyMs:u}=Ue(),{connectionMethod:l}=Ve(),a=$(()=>{const _=c.value==="connected",t=c.value==="connecting",r=c.value==="degraded";if(_){let i="";return l.value==="relay"?i="Relay":l.value==="p2p"?i="P2P":l.value==="local"&&(i="Local"),{status:"online",color:"green",label:i||"Connected",latency:u.value,pulse:!1}}return t?{status:"connecting",color:"amber",label:"Connecting...",latency:null,pulse:!0}:r?{status:"degraded",color:"amber",label:"Slow",latency:u.value,pulse:!1}:{status:"offline",color:"red",label:"Offline",latency:null,pulse:!0}});$(()=>s.currentSession);const p=$(()=>s.activeInputs),b=$(()=>s.isRecording),d=$(()=>s.inputs.filter(_=>_.isRecording)),g=k("");K(()=>{const t=new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}).replace(/\//g,".");g.value=`Session ${t}`});const w=k([{id:"cam1",name:"CAM 1",focus:"auto",wb:"auto",shutter:"auto",aperture:"auto"},{id:"cam2",name:"CAM 2",focus:"auto",wb:"auto",shutter:"auto",aperture:"auto"},{id:"cam3",name:"CAM 3",focus:"auto",wb:"auto",shutter:"auto",aperture:"auto"},{id:"cam4",name:"CAM 4",focus:"auto",wb:"auto",shutter:"auto",aperture:"auto"}]);function m(_,t){const r=w.value[_];r&&(r[t]=r[t]==="auto"?"manual":"auto")}const f=$(()=>{const _=v.capabilities;if(!_)return null;const t=_.storage_used_gb||0,r=_.storage_total_gb||1,i=r-t,R=Math.round(t/r*100),G=i/10;return{freeGB:Math.round(i),totalGB:Math.round(r),percent:R,hoursRemaining:Math.round(G*10)/10,isLow:R>85,isCritical:R>95}});function x(_){if(_===0)return"0 B";const t=1024,r=["B","KB","MB","GB","TB"],i=Math.floor(Math.log(_)/Math.log(t));return parseFloat((_/Math.pow(t,i)).toFixed(2))+" "+r[i]}function S(){e.push({name:"admin",query:{tab:"settings"}})}return(_,t)=>{var r;return h(),y("div",fn,[n("div",vn,[n("div",pn,[n("div",gn,[n("span",{class:M(["connection-dot",[`connection-dot--${a.value.color}`,{"connection-dot--pulse":a.value.pulse}]])},null,2),n("span",mn,C(a.value.label),1),a.value.latency?(h(),y("span",_n,C(a.value.latency)+"ms ",1)):E("",!0)])]),t[1]||(t[1]=n("div",{class:"sidebar__divider"},null,-1)),t[2]||(t[2]=n("label",{class:"sidebar__label"},"Session Name",-1)),ge(n("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>g.value=i),type:"text",class:"sidebar__input",placeholder:"Session 06.01.2026",disabled:b.value},null,8,hn),[[Ce,g.value]])]),b.value?(h(),y(H,{key:0},[n("div",bn,[t[3]||(t[3]=n("div",{class:"recording__header"},[n("span",{class:"recording__dot"}),n("span",{class:"recording__label"},"Recording")],-1)),n("div",wn,C(ee(s).formattedDuration),1),n("div",yn,C(d.value.length)+" camera"+C(d.value.length!==1?"s":"")+" recording ",1)]),n("div",kn,[t[4]||(t[4]=n("div",{class:"sidebar__label"},"Recording Stats",-1)),n("div",Cn,[(h(!0),y(H,null,ve(d.value,i=>(h(),y("div",{key:i.id,class:"stats__item"},[n("span",$n,C(i.label),1),n("span",xn,C(x(i.bytesWritten)),1)]))),128))])]),(r=f.value)!=null&&r.isLow?(h(),y("div",Rn,[t[6]||(t[6]=n("span",{class:"warning__icon"},"⚠️",-1)),n("div",Sn,[t[5]||(t[5]=n("strong",null,"Low storage",-1)),n("span",null,C(f.value.freeGB)+" GB remaining",1)])])):E("",!0)],64)):(h(),y(H,{key:1},[n("div",Tn,[t[9]||(t[9]=n("div",{class:"sidebar__label"},"Status",-1)),n("p",Mn,[q(C(p.value.length)+" input"+C(p.value.length!==1?"s":"")+" with signal. Press ",1),t[7]||(t[7]=n("kbd",null,"Space",-1)),t[8]||(t[8]=q(" to start recording. ",-1))])]),n("div",En,[t[14]||(t[14]=n("div",{class:"sidebar__label"},"Camera Controls",-1)),n("div",An,[(h(!0),y(H,null,ve(w.value,(i,R)=>(h(),y("div",{key:i.id,class:"camera"},[n("div",Pn,C(i.name),1),n("div",Ln,[n("button",{class:M(["camera__btn",{"camera__btn--auto":i.focus==="auto"}]),onClick:G=>m(R,"focus"),title:"Focus"},[t[10]||(t[10]=n("span",{class:"camera__btn-icon"},"◎",-1)),n("span",Dn,C(i.focus==="auto"?"A":"M"),1)],10,Bn),n("button",{class:M(["camera__btn",{"camera__btn--auto":i.wb==="auto"}]),onClick:G=>m(R,"wb"),title:"White Balance"},[t[11]||(t[11]=n("span",{class:"camera__btn-icon"},"☀",-1)),n("span",Nn,C(i.wb==="auto"?"A":"M"),1)],10,Wn),n("button",{class:M(["camera__btn",{"camera__btn--auto":i.shutter==="auto"}]),onClick:G=>m(R,"shutter"),title:"Shutter"},[t[12]||(t[12]=n("span",{class:"camera__btn-icon"},"⏱",-1)),n("span",Fn,C(i.shutter==="auto"?"A":"M"),1)],10,Hn),n("button",{class:M(["camera__btn",{"camera__btn--auto":i.aperture==="auto"}]),onClick:G=>m(R,"aperture"),title:"Aperture"},[t[13]||(t[13]=n("span",{class:"camera__btn-icon"},"◐",-1)),n("span",Un,C(i.aperture==="auto"?"A":"M"),1)],10,Gn)])]))),128))])]),f.value?(h(),y("div",Vn,[t[15]||(t[15]=n("div",{class:"sidebar__label"},"Storage",-1)),n("div",In,[n("div",jn,[n("div",{class:M(["storage__fill",{"storage__fill--ok":!f.value.isLow,"storage__fill--low":f.value.isLow&&!f.value.isCritical,"storage__fill--critical":f.value.isCritical}]),style:Re({width:`${f.value.percent}%`})},null,6)]),n("div",On,[n("span",null,C(f.value.freeGB)+" GB free",1),n("span",zn,"~"+C(f.value.hoursRemaining)+"h",1)])])])):E("",!0),n("div",{class:"sidebar__card"},[t[17]||(t[17]=n("div",{class:"sidebar__label"},"Quick Actions",-1)),n("button",{onClick:S,class:"sidebar__btn"},[...t[16]||(t[16]=[n("svg",{class:"sidebar__btn-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"1.8"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),n("circle",{cx:"12",cy:"12",r:"3"})],-1),q(" Configure Inputs ",-1)])])])],64))])}}}),Kn=Y(qn,[["__scopeId","data-v-dd5d083c"]]),Yn={class:"h-full flex flex-col"},Qn={class:"recorder-header"},Xn={class:"recorder-header__left"},Jn={class:"recorder-header__title"},Zn={key:0,class:"recorder-header__badge"},eo={class:"flex-1 flex min-h-0 overflow-hidden"},to={class:"flex-1 min-h-0 min-w-0 p-3 overflow-hidden"},no={class:"w-72 flex-shrink-0 border-l border-preke-surface-border bg-preke-surface/80 backdrop-blur-lg p-4 overflow-y-auto"},oo=I({__name:"RecorderView",setup(o){const e=Se(),s=F(),v=me(),{showLeaveConfirmation:c,confirmLeave:u,cancelLeave:l}=qe();function a(){e.push("/")}const p=$(()=>s.status==="recording"),b=$(()=>s.formattedDuration),d=k(!0),g=k(!1),w=k(!1),m=$(()=>g.value&&w.value);function f(){d.value=!1}async function x(){var r;if(!Ie())return;await v.fetchCapabilities();const t=(r=v.capabilities)==null?void 0:r.current_mode;if(t&&t!=="recorder"){console.log("[Recorder] Not in recorder mode, switching...");try{(await fetch(je("/api/mode/recorder"),{method:"POST"})).ok&&(await v.fetchCapabilities(),U.success("Switched to Recorder mode"))}catch(i){console.warn("[Recorder] Failed to switch mode:",i)}}}function S(){console.log("[Recorder] All videos ready!"),w.value=!0}K(async()=>{const t=performance.now();await Promise.all([x(),s.fetchInputs(),s.fetchStatus()]);const r=s.inputs.filter(i=>i.hasSignal).length;console.log(`[Recorder] Data loaded: ${s.inputs.length} inputs, ${r} with signal (${Math.round(performance.now()-t)}ms)`),g.value=!0,r===0&&(w.value=!0)});const _=k(null);return N(c,t=>{var r,i;t?(r=_.value)==null||r.open():(i=_.value)==null||i.close()}),(t,r)=>(h(),y(H,null,[D(de,{name:"fade"},{default:fe(()=>[d.value?(h(),pe(ze,{key:0,mode:"recorder","content-ready":m.value,"min-time":1500,"max-time":5e3,"show-cancel":!0,onReady:f,onCancel:a},null,8,["content-ready"])):E("",!0)]),_:1}),D(de,{name:"content-fade"},{default:fe(()=>[ge(n("div",Yn,[n("header",Qn,[n("div",Xn,[n("div",Jn,[n("span",{class:M(["recorder-header__indicator",{"recorder-header__indicator--active":p.value}])},null,2),r[0]||(r[0]=n("span",{class:"recorder-header__label"},"Recorder",-1))]),p.value?(h(),y("span",Zn," REC ")):E("",!0),D(Tt)]),D(ht)]),n("div",eo,[n("div",to,[D(dn,{onAllVideosReady:S})]),n("aside",no,[D(Kn)])]),D($e,{ref_key:"leaveDialog",ref:_,title:"Recording in Progress",message:`You are currently recording (${b.value}). Leaving will stop the recording and save all files.`,"confirm-text":"Leave and Stop Recording","cancel-text":"Stay",danger:!0,onConfirm:ee(u),onCancel:ee(l)},null,8,["message","onConfirm","onCancel"])],512),[[Oe,!d.value]])]),_:1})],64))}}),ro=Y(oo,[["__scopeId","data-v-52bf7624"]]);export{ro as default};
