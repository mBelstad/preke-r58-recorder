# MediaMTX configuration for R58 Recorder
logLevel: info
logDestinations: [stdout]

# RTSP settings
rtspAddress: :8554

# RTMP settings
rtmpAddress: :1935

# HLS settings - optimized for STABILITY under high load
# Increased buffer to prevent 404 errors when system is busy
hlsAddress: :8888
hlsAlwaysRemux: yes
hlsSegmentCount: 10         # 20-second buffer (10 x 2s) - prevents segment expiry under load
hlsSegmentDuration: 2s      # Longer segments reduce generation frequency and CPU load
hlsPartDuration: 400ms      # Balanced LL-HLS - still fast but more stable
hlsAllowOrigin: "*"

# SRT settings
srtAddress: :8890

# WebRTC settings (low latency for live view)
webrtcAddress: :8889
webrtcAllowOrigin: "*"
webrtcEncryption: no

# Paths configuration
# Camera streams published via RTSP (rtspclientsink with H.265)
paths:
  cam0:
    source: publisher
  cam1:
    source: publisher
  cam2:
    source: publisher
  cam3:
    source: publisher
  mixer_program:
    source: publisher
  # Remote guest paths (published via WHIP)
  guest1:
    source: publisher
  guest2:
    source: publisher
  # Ninja guest paths (published via WebRTC subscriber)
  ninja_guest1:
    source: publisher
  ninja_guest2:
    source: publisher
  ninja_guest3:
    source: publisher
  ninja_guest4:
    source: publisher
  # Ninja program output (if using Ninja mixer)
  ninja_program:
    source: publisher
  # Reveal.js presentation streams
  slides:
    source: publisher
  slides_overlay:
    source: publisher
