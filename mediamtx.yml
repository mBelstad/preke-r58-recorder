# MediaMTX configuration for R58 Recorder
logLevel: info
logDestinations: [stdout]

# RTSP settings
rtspAddress: :8554

# RTMP settings
rtmpAddress: :1935

# HLS settings - optimized for FAST STARTUP while maintaining reliability
# Balance between startup speed and connection stability
hlsAddress: :8888
hlsAlwaysRemux: yes
hlsSegmentCount: 7          # Reduced from 15 - less buffering needed, faster manifest load
hlsSegmentDuration: 1s      # Reduced from 3s - MUCH faster startup (1s vs 6-9s)
hlsPartDuration: 200ms      # Reduced from 300ms - faster LL-HLS startup
hlsAllowOrigin: "*"

# SRT settings
srtAddress: :8890

# WebRTC settings (low latency for live view)
webrtcAddress: :8889
webrtcAllowOrigin: "*"
webrtcEncryption: no

# Paths configuration
# Migrated to RTP sources for H.265 hardware encoding (2025-12-19)
# Ingest pipelines push H.265 via RTP to these ports, consumers subscribe via RTSP
paths:
  cam0:
    source: rtp://0.0.0.0:5000  # RTP H.265 from ingest pipeline
  cam1:
    source: rtp://0.0.0.0:5002  # RTP H.265 from ingest pipeline
  cam2:
    source: rtp://0.0.0.0:5004  # RTP H.265 from ingest pipeline
  cam3:
    source: rtp://0.0.0.0:5006  # RTP H.265 from ingest pipeline
  mixer_program:
    source: publisher  # Mixer publishes via RTMP (H.265 not supported in flvmux)
  # Remote guest paths (published via WHIP)
  guest1:
    source: publisher
  guest2:
    source: publisher
  # Ninja guest paths (published via WebRTC subscriber)
  ninja_guest1:
    source: publisher
  ninja_guest2:
    source: publisher
  ninja_guest3:
    source: publisher
  ninja_guest4:
    source: publisher
  # Ninja program output (if using Ninja mixer)
  ninja_program:
    source: publisher
