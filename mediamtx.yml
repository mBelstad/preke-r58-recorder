# MediaMTX configuration for R58 Recorder
logLevel: info
logDestinations: [stdout]

# RTSP settings
rtspAddress: :8554

# RTMP settings
rtmpAddress: :1935

# HLS settings (separate port for HLS) - optimized for remote access via Cloudflare Tunnel
# Larger segments reduce HTTP request overhead and improve reliability over high-latency connections
# Increased segment count and duration for better buffering over unreliable connections
hlsAddress: :8888
hlsAlwaysRemux: yes
hlsSegmentCount: 15         # Increased buffer for unreliable remote connections
hlsSegmentDuration: 3s      # 3-second segments for better stability (prioritize reliability over latency)
hlsPartDuration: 300ms      # 300ms parts to reduce HTTP request frequency
hlsAllowOrigin: "*"

# SRT settings
srtAddress: :8890

# WebRTC settings (low latency for live view)
webrtcAddress: :8889
webrtcAllowOrigin: "*"
webrtcEncryption: no

# Paths configuration
# In always-on ingest architecture, only cam0-cam3 paths are used
# Ingest pipelines publish to these paths, all consumers subscribe
paths:
  cam0:
    source: publisher
  cam1:
    source: publisher
  cam2:
    source: publisher
  cam3:
    source: publisher
  mixer_program:
    source: publisher
  # Remote guest paths (published via WHIP)
  guest1:
    source: publisher
  guest2:
    source: publisher
