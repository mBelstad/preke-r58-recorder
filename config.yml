# R58 Recorder Configuration

# Platform will be auto-detected (macos or r58)
# You can override it here if needed
# On macOS, device paths are ignored (videotestsrc is used)
# On R58, use /dev/video0, /dev/video1, etc.
platform: auto

# Logging level: DEBUG, INFO, WARNING, ERROR
log_level: INFO

# MediaMTX configuration (optional)
mediamtx:
  enabled: true
  rtsp_port: 8554
  rtmp_port: 1935
  srt_port: 8890

# Mixer configuration (optional)
mixer:
  enabled: true  # Set to true to enable mixer
  output_resolution: 1920x1080
  output_bitrate: 8000  # kbps
  output_codec: h264  # h264 or h265
  recording_enabled: false  # Enable program output recording
  recording_path: /var/recordings/mixer/program_%Y%m%d_%H%M%S.mp4
  mediamtx_enabled: true  # Stream mixer output to MediaMTX
  mediamtx_path: mixer_program  # MediaMTX path for mixer output
  scenes_dir: scenes  # Directory for scene JSON files

# Camera configurations
# R58 4x4 3S HDMI port mappings:
#   HDMI N0  → /dev/video0  (rkcif-mipi-lvds via LT6911 7-002b bridge)
#   HDMI N60 → /dev/video60 (hdmirx direct)
#   HDMI N11 → /dev/video11 (rkcif-mipi-lvds1 via LT6911 4-002b bridge)
#   HDMI N21 → /dev/video22 (rkcif-mipi-lvds2 via LT6911 2-002b bridge)
cameras:
  cam0:
    device: /dev/video0  # HDMI N0 (rkcif via LT6911 bridge)
    resolution: 1920x1080
    bitrate: 5000
    codec: h264
    output_path: /mnt/sdcard/recordings/cam0/recording_%Y%m%d_%H%M%S.mp4
    mediamtx_enabled: true
    mediamtx_path: null  # Auto-generated if null: rtsp://localhost:8554/cam0

  cam1:
    device: /dev/video60  # HDMI N60 (hdmirx direct)
    resolution: 1920x1080
    bitrate: 5000
    codec: h264
    output_path: /mnt/sdcard/recordings/cam1/recording_%Y%m%d_%H%M%S.mp4
    mediamtx_enabled: true
    mediamtx_path: null

  cam2:
    device: /dev/video11  # HDMI N11 (rkcif via LT6911 bridge)
    resolution: 1920x1080
    bitrate: 5000
    codec: h264
    output_path: /mnt/sdcard/recordings/cam2/recording_%Y%m%d_%H%M%S.mp4
    mediamtx_enabled: true
    mediamtx_path: null

  cam3:
    device: /dev/video22  # HDMI N21 (rkcif-mipi-lvds2 via LT6911 2-002b bridge)
    resolution: 1920x1080
    bitrate: 5000
    codec: h265
    output_path: /mnt/sdcard/recordings/cam3/recording_%Y%m%d_%H%M%S.mp4
    mediamtx_enabled: true
    mediamtx_path: null

