# Logrotate configuration for R58 application logs
# Install to: /etc/logrotate.d/r58
#
# Installation:
#   sudo cp deployment/logrotate-r58.conf /etc/logrotate.d/r58
#   sudo chmod 644 /etc/logrotate.d/r58
#
# Test:
#   sudo logrotate -d /etc/logrotate.d/r58  # Dry run
#   sudo logrotate -f /etc/logrotate.d/r58  # Force rotation

# Application logs (if any write to /var/log/r58/)
/var/log/r58/*.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 0640 root adm
    sharedscripts
    postrotate
        # Reload services if needed (most use journald)
        systemctl reload preke-recorder 2>/dev/null || true
    endscript
}

# Journald logs are already rotated by systemd
# Configuration in /etc/systemd/journald.conf:
#   SystemMaxUse=500M
#   SystemMaxFileSize=50M
#   MaxRetentionSec=7day

